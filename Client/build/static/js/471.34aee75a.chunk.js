"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[471],{1046:(e,a,t)=>{t.d(a,{A:()=>v});var l=t(9379),o=t(1206),n=t(4450),i=t(1778),r=t(5066),s=t(5043),d=t(1094),c=t(216),u=t(6914),m=t(8152),x=t(5369),h=t(579);function v(e){const{columnsData:a,tableData:t,title:v,type:p,selectedValues:g,setSelectedValues:j}=e,S=(0,s.useMemo)((()=>a),[a]),f=(0,s.useMemo)((()=>t),[t]),[y,b]=(JSON.parse(localStorage.getItem("user")),(0,s.useState)()),C=(0,d.useTable)({columns:S,data:f,initialState:{pageIndex:0}},d.useGlobalFilter,d.useSortBy,d.usePagination),{getTableProps:B,getTableBodyProps:N,headerGroups:z,prepareRow:A,page:T,canPreviousPage:w,canNextPage:L,pageOptions:D,pageCount:H,gotoPage:P,nextPage:W,previousPage:I,setPageSize:F,state:{pageIndex:k,pageSize:O}}=C;D.length<y&&b(D.length);const V=(0,o.dU)("gray.500","white"),E=(0,o.dU)("gray.200","whiteAlpha.100"),G=(e,a)=>{"multi"===p?e.target.checked?j((e=>[...e,a])):j((e=>e.filter((e=>e!==a)))):e.target.checked?j(a):j(null)};return(0,h.jsxs)(c.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,h.jsx)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,h.jsxs)(n.Text,{color:V,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[v,"  (",(0,h.jsx)(u.A,{targetNumber:null===f||void 0===f?void 0:f.length},null===f||void 0===f?void 0:f.length),")"]})}),(0,h.jsx)(n.Box,{overflowY:"auto",className:"table-container-property",children:(0,h.jsxs)(i.XI,(0,l.A)((0,l.A)({},B()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,h.jsx)(i.d8,{zIndex:1,children:null===z||void 0===z?void 0:z.map(((e,a)=>(0,s.createElement)(i.Tr,(0,l.A)((0,l.A)({},e.getHeaderGroupProps()),{},{key:a}),e.headers.map(((e,a)=>(0,s.createElement)(i.Th,(0,l.A)((0,l.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:a,borderColor:E}),(0,h.jsxs)(n.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,h.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:e.render("Header")}),!1!==e.isSortable&&(0,h.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,h.jsx)(x.GOR,{}):(0,h.jsx)(x.XhJ,{}):(0,h.jsx)(x.MjW,{})})]})))))))}),(0,h.jsxs)(i.NN,(0,l.A)((0,l.A)({},N()),{},{children:[0===(null===f||void 0===f?void 0:f.length)&&(0,h.jsx)(i.Tr,{children:(0,h.jsx)(i.Td,{colSpan:S.length,children:(0,h.jsx)(n.Text,{textAlign:"center",width:"100%",color:V,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===T||void 0===T?void 0:T.map(((e,a)=>{var t;return A(e),(0,s.createElement)(i.Tr,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:a}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,a)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsxs)(n.Flex,{align:"center",children:["multi"===p?(0,h.jsx)(r.Sc,{colorScheme:"brandScheme",value:g,isChecked:g.includes(null===e||void 0===e?void 0:e.value),onChange:a=>G(a,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,h.jsx)(r.Sc,{colorScheme:"brandScheme",value:g,isChecked:g===(null===e||void 0===e?void 0:e.value),onChange:a=>G(a,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]}):"title"===(null===e||void 0===e?void 0:e.column.Header)||"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsx)(n.Text,{me:"10px",color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"phone Number"===(null===e||void 0===e?void 0:e.column.Header)||"Email Address"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsx)(n.Text,{fontSize:"sm",fontWeight:"700",color:V,children:null===e||void 0===e?void 0:e.value}):("physical Address"===(null===e||void 0===e?void 0:e.column.Header)||"mailing Address"===(null===e||void 0===e?void 0:e.column.Header)||"Contact Method"===(null===e||void 0===e?void 0:e.column.Header))&&(t=(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(i.Td,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:a,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),t)})))}))]}))]}))}),(null===f||void 0===f?void 0:f.length)>5&&(0,h.jsx)(m.A,{gotoPage:P,gopageValue:y,setGopageValue:b,pageCount:H,canPreviousPage:w,previousPage:I,canNextPage:L,pageOptions:D,setPageSize:F,nextPage:W,pageSize:O,pageIndex:k})]})}},9565:(e,a,t)=>{t.d(a,{A:()=>u});var l=t(9942),o=t(4450),n=t(2554),i=t(5043),r=t(1046),s=t(9488),d=t(8860),c=t(579);const u=e=>{const{onClose:a,isOpen:t,fieldName:u,setFieldValue:m,data:x}=e,[h,v]=(0,i.useState)(),[p,g]=(0,i.useState)(!1);JSON.parse(localStorage.getItem("user"));return(0,c.jsxs)(l.aF,{onClose:a,size:"full",isOpen:t,children:[(0,c.jsx)(l.mH,{}),(0,c.jsxs)(l.$m,{children:[(0,c.jsx)(l.rQ,{children:"Select Contact"}),(0,c.jsx)(l.s_,{}),(0,c.jsx)(l.cw,{children:p?(0,c.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,c.jsx)(s.A,{})}):(0,c.jsx)(r.A,{tableData:x,selectedValues:h,setSelectedValues:v,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,c.jsxs)(l.jl,{children:[(0,c.jsxs)(n.Button,{variant:"brand",size:"sm",me:2,onClick:async()=>{try{g(!0),m(u,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!p,leftIcon:(0,c.jsx)(d.NLY,{}),children:[" ",p?(0,c.jsx)(s.A,{}):"Select"]}),(0,c.jsx)(n.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>a(),children:"Close"})]})]})]})}},7214:(e,a,t)=>{t.d(a,{A:()=>v});var l=t(9379),o=t(1206),n=t(4450),i=t(1778),r=t(5066),s=t(5043),d=t(1094),c=t(216),u=t(6914),m=t(8152),x=t(5369),h=t(579);function v(e){const{columnsData:a,tableData:t,title:v,type:p,selectedValues:g,setSelectedValues:j}=e,S=(0,s.useMemo)((()=>a),[a]),f=(0,s.useMemo)((()=>t),[t]),[y,b]=(JSON.parse(localStorage.getItem("user")),(0,s.useState)()),C=(0,d.useTable)({columns:S,data:f,initialState:{pageIndex:0}},d.useGlobalFilter,d.useSortBy,d.usePagination),{getTableProps:B,getTableBodyProps:N,headerGroups:z,prepareRow:A,page:T,canPreviousPage:w,canNextPage:L,pageOptions:D,pageCount:H,gotoPage:P,nextPage:W,previousPage:I,setPageSize:F,state:{pageIndex:k,pageSize:O}}=C;D.length<y&&b(D.length);const V=(0,o.dU)("gray.500","white"),E=(0,o.dU)("gray.200","whiteAlpha.100"),G=(e,a)=>{"multi"===p?e.target.checked?j((e=>[...e,a])):j((e=>e.filter((e=>e!==a)))):e.target.checked?j(a):j(null)};return(0,h.jsxs)(c.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,h.jsx)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,h.jsxs)(n.Text,{color:V,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[v,"  (",(0,h.jsx)(u.A,{targetNumber:null===f||void 0===f?void 0:f.length},null===f||void 0===f?void 0:f.length),")"]})}),(0,h.jsx)(n.Box,{overflowY:"auto",className:"table-container-property",children:(0,h.jsxs)(i.XI,(0,l.A)((0,l.A)({},B()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,h.jsx)(i.d8,{zIndex:1,children:null===z||void 0===z?void 0:z.map(((e,a)=>(0,s.createElement)(i.Tr,(0,l.A)((0,l.A)({},e.getHeaderGroupProps()),{},{key:a}),e.headers.map(((e,a)=>(0,s.createElement)(i.Th,(0,l.A)((0,l.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:a,borderColor:E}),(0,h.jsxs)(n.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,h.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:e.render("Header")}),!1!==e.isSortable&&(0,h.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,h.jsx)(x.GOR,{}):(0,h.jsx)(x.XhJ,{}):(0,h.jsx)(x.MjW,{})})]})))))))}),(0,h.jsxs)(i.NN,(0,l.A)((0,l.A)({},N()),{},{children:[0===(null===f||void 0===f?void 0:f.length)&&(0,h.jsx)(i.Tr,{children:(0,h.jsx)(i.Td,{colSpan:S.length,children:(0,h.jsx)(n.Text,{textAlign:"center",width:"100%",color:V,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===T||void 0===T?void 0:T.map(((e,a)=>{var t;return A(e),(0,s.createElement)(i.Tr,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:a}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,a)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsxs)(n.Flex,{align:"center",children:["multi"===p?(0,h.jsx)(r.Sc,{colorScheme:"brandScheme",value:g,isChecked:g.includes(null===e||void 0===e?void 0:e.value),onChange:a=>G(a,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,h.jsx)(r.Sc,{colorScheme:"brandScheme",value:g,isChecked:g===(null===e||void 0===e?void 0:e.value),onChange:a=>G(a,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]}):"Lead Name"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Email"===(null===e||void 0===e?void 0:e.column.Header)||"Lead PhoneNumber"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsx)(n.Text,{me:"10px",color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("Lead Address"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Status"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Owner"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Score"===(null===e||void 0===e?void 0:e.column.Header))&&(t=(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(i.Td,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:a,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),t)})))}))]}))]}))}),(null===f||void 0===f?void 0:f.length)>5&&(0,h.jsx)(m.A,{gotoPage:P,gopageValue:y,setGopageValue:b,pageCount:H,canPreviousPage:w,previousPage:I,canNextPage:L,pageOptions:D,setPageSize:F,nextPage:W,pageSize:O,pageIndex:k})]})}},1125:(e,a,t)=>{t.d(a,{A:()=>u});var l=t(9942),o=t(4450),n=t(2554),i=t(5043),r=t(7214),s=t(9488),d=t(8860),c=t(579);const u=e=>{const{onClose:a,isOpen:t,fieldName:u,setFieldValue:m,data:x}=e,[h,v]=(0,i.useState)(),[p,g]=(0,i.useState)(!1);JSON.parse(localStorage.getItem("user"));return(0,c.jsxs)(l.aF,{onClose:a,size:"full",isOpen:t,children:[(0,c.jsx)(l.mH,{}),(0,c.jsxs)(l.$m,{children:[(0,c.jsx)(l.rQ,{children:"Select Lead"}),(0,c.jsx)(l.s_,{}),(0,c.jsx)(l.cw,{children:p?(0,c.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,c.jsx)(s.A,{})}):(0,c.jsx)(r.A,{tableData:x,selectedValues:h,setSelectedValues:v,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,c.jsxs)(l.jl,{children:[(0,c.jsxs)(n.Button,{variant:"brand",size:"sm",me:2,onClick:async()=>{try{g(!0),m(u,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!p,leftIcon:(0,c.jsx)(d.NLY,{}),children:[" ",p?(0,c.jsx)(s.A,{}):"Select"]}),(0,c.jsx)(n.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>a(),children:"Close"})]})]})]})}},8471:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var l=t(5043),o=t(3216),n=t(5475),i=t(4034),r=t(9754),s=t(4450),d=t(5376),c=t(2554),u=t(6305),m=t(5574),x=t(55),h=t(7368),v=t(3516),p=t(899),g=t(9942),j=t(8510),S=t(7682),f=t(4626),y=t(9488),b=t(577),C=t(7508),B=t(579);const N=e=>{const{state:a,allData:t,advanceSearch:l,setAdvanceSearch:o,isLoding:n,setSearchedData:i,setDisplaySearchData:r,setSearchClear:d,setSearchbox:u}=e,m=(0,C.wA)(),x=p.Ik({senderName:p.Yj(),realetedTo:p.Yj(),createByName:p.Yj()}),h=(0,v.Wx)({initialValues:{senderName:"",realetedTo:"",createByName:""},validationSchema:x,onSubmit:(e,a)=>{let{resetForm:l}=a;m((0,b.gB)(e)),m((0,b.DW)({values:e,allData:t,type:"Email"}));const n=[{name:["senderName"],value:e.senderName},{name:["realetedTo"],value:e.realetedTo},{name:["createByName"],value:e.createByName}];m((0,b.Tr)(n.filter((e=>e.value)))),r(!0),o(!1),l(),u("")}}),{errors:N,touched:z,values:A,handleBlur:T,handleChange:w,handleSubmit:L,setFieldValue:D,resetForm:H,dirty:P}=h;return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(g.aF,{onClose:()=>{o(!1),H()},isOpen:l,isCentered:!0,children:[(0,B.jsx)(g.mH,{}),(0,B.jsxs)(g.$m,{children:[(0,B.jsx)(g.rQ,{children:"Advance Search"}),(0,B.jsx)(g.s_,{onClick:()=>{o(!1),H()}}),(0,B.jsx)(g.cw,{children:(0,B.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,B.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Sender Name"}),(0,B.jsx)(S.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===A||void 0===A?void 0:A.senderName,name:"senderName",placeholder:"Enter Sender Name",fontWeight:"500"}),(0,B.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",N.senderName&&z.senderName&&N.senderName]})]}),(0,B.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Realeted To"}),(0,B.jsxs)(f.l6,{value:null===A||void 0===A?void 0:A.realetedTo,fontSize:"sm",name:"realetedTo",onChange:w,fontWeight:"500",placeholder:"Select Realeted To",children:[(0,B.jsx)("option",{value:"contact",children:"Contact"}),(0,B.jsx)("option",{value:"lead",children:"Lead"})]}),(0,B.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",N.realetedTo&&z.realetedTo&&N.realetedTo]})]}),(0,B.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"CreateBy Name"}),(0,B.jsx)(S.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===A||void 0===A?void 0:A.createByName,name:"createByName",placeholder:"Enter CreateBy Name",fontWeight:"500"}),(0,B.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",N.createByName&&z.createByName&&N.createByName]})]})]})}),(0,B.jsxs)(g.jl,{children:[(0,B.jsx)(c.Button,{size:"sm",variant:"brand",mr:2,onClick:L,disabled:!(!n&&P),children:n?(0,B.jsx)(y.A,{}):"Search"}),(0,B.jsx)(c.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>H(),children:"Clear"})]})]})]})})};var z=t(6178),A=t.n(z),T=t(7149),w=t(4960),L=t(5104),D=t(3186),H=t(9565),P=t(1125),W=t(3388),I=t(9849);const F=e=>{const{onClose:a,isOpen:t}=e,[o,n]=(0,l.useState)(!1),[i,r]=(0,l.useState)([]),[d,m]=(0,l.useState)(!1),[x,h]=(0,l.useState)(!1),p=JSON.parse(localStorage.getItem("user")),b={sender:null===p||void 0===p?void 0:p._id,recipient:"",subject:"",callNotes:"",createByContact:"",createByLead:"",startDate:new Date,endDate:"",category:"contact",assignmentTo:"",assignmentToLead:"",createBy:null===p||void 0===p?void 0:p._id},C=(0,v.Wx)({initialValues:b,validationSchema:I.y4,onSubmit:(e,a)=>{let{resetForm:t}=a;O(),t()}}),{errors:N,touched:z,values:A,handleBlur:T,handleChange:w,handleSubmit:F,setFieldValue:k}=C,O=async()=>{try{n(!0),200===(await(0,u.d_)("api/email/add",A)).status&&(e.onClose(),e.setAction((e=>!e)))}catch(a){console.log(a)}finally{n(!1)}};(0,l.useEffect)((async()=>{A.start=null===e||void 0===e?void 0:e.date;try{var a;let e;"Contact"===A.category?e=await(0,u.x4)("superAdmin"===p.role?"api/contact/":"api/contact/?createBy=".concat(p._id)):"Lead"===A.category&&(e=await(0,u.x4)("superAdmin"===p.role?"api/lead/":"api/lead/?createBy=".concat(p._id))),r(null===(a=e)||void 0===a?void 0:a.data)}catch(t){console.log(t)}}),[e,A.category]);return(0,l.useEffect)((()=>{(async()=>{if(A.createByContact){let o=await(0,u.x4)("api/contact/view/",A.createByContact);var e,a,t,l;200===(null===o||void 0===o?void 0:o.status)&&(k("recipient",null===o||void 0===o||null===(e=o.data)||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.email),A.recipient=null===o||void 0===o||null===(t=o.data)||void 0===t||null===(l=t.contact)||void 0===l?void 0:l.email)}else if(A.createByLead){let e=await(0,u.x4)("api/lead/view/",A.createByLead);var o,n,i,r;200===(null===e||void 0===e?void 0:e.status)&&(k("recipient",null===e||void 0===e||null===(o=e.data)||void 0===o||null===(n=o.lead)||void 0===n?void 0:n.leadEmail),A.recipient=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(r=i.lead)||void 0===r?void 0:r.leadEmail)}})()}),[A.createByContact,A.createByLead]),(0,B.jsxs)(g.aF,{onClose:a,isOpen:t,isCentered:!0,children:[(0,B.jsx)(g.mH,{}),(0,B.jsxs)(g.$m,{children:[(0,B.jsx)(g.rQ,{children:"Add Email "}),(0,B.jsx)(g.s_,{}),(0,B.jsxs)(g.cw,{children:[(0,B.jsx)(H.A,{isOpen:d,data:i,onClose:m,fieldName:"createByContact",setFieldValue:k}),(0,B.jsx)(P.A,{isOpen:x,data:i,onClose:h,fieldName:"createByLead",setFieldValue:k}),(0,B.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,B.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Related"}),(0,B.jsx)(L.z6,{onChange:e=>{k("category",e),k("createByContact",""),k("createByLead","")},value:A.category,children:(0,B.jsxs)(s.Stack,{direction:"row",children:[(0,B.jsx)(L.sx,{value:"Contact",children:"Contact"}),(0,B.jsx)(L.sx,{value:"Lead",children:"Lead"})]})})]}),(0,B.jsx)(s.GridItem,{colSpan:{base:12},children:"Contact"===A.category?(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient  (Contact)"}),(0,B.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,B.jsx)(f.l6,{value:A.createByContact,name:"createByContact",onChange:w,mb:N.createByContact&&z.createByContact?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:N.createByContact&&z.createByContact?"red.300":null,children:null===i||void 0===i?void 0:i.map((e=>(0,B.jsx)("option",{value:e._id,children:"Contact"===A.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,B.jsx)(c.IconButton,{onClick:()=>m(!0),ml:2,fontSize:"25px",icon:(0,B.jsx)(W.G2h,{})})]})]})}):"Lead"===A.category?(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Lead)"}),(0,B.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,B.jsx)(f.l6,{value:A.createByLead,name:"createByLead",onChange:w,mb:N.createByLead&&z.createByLead?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:N.createByLead&&z.createByLead?"red.300":null,children:null===i||void 0===i?void 0:i.map((e=>(0,B.jsx)("option",{value:e._id,children:"Contact"===A.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,B.jsx)(c.IconButton,{onClick:()=>h(!0),ml:2,fontSize:"25px",icon:(0,B.jsx)(W.G2h,{})})]})]})}):""}),(0,B.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,B.jsxs)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,B.jsx)(s.Text,{color:"red",children:"*"})]}),(0,B.jsx)(S.Input,{fontSize:"sm",disabled:!0,value:A.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:N.recipient&&z.recipient?"red.300":null}),(0,B.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",N.recipient&&z.recipient&&N.recipient]})]}),(0,B.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,B.jsx)(S.Input,{type:"datetime-local",fontSize:"sm",onChange:w,onBlur:T,value:A.startDate,name:"startDate",fontWeight:"500",borderColor:null!==N&&void 0!==N&&N.startDate&&null!==z&&void 0!==z&&z.startDate?"red.300":null}),(0,B.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",N.startDate&&z.startDate&&N.startDate]})]}),(0,B.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,B.jsx)(S.Input,{type:"datetime-local",fontSize:"sm",min:A.startDate,onChange:w,onBlur:T,value:A.endDate,name:"endDate",fontWeight:"500",borderColor:null!==N&&void 0!==N&&N.endDate&&null!==z&&void 0!==z&&z.endDate?"red.300":null}),(0,B.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",N.endDate&&z.endDate&&N.endDate]})]}),(0,B.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,B.jsxs)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Subject",(0,B.jsx)(s.Text,{color:"red",children:"*"})]}),(0,B.jsx)(S.Input,{fontSize:"sm",onChange:w,onBlur:T,value:A.subject,name:"subject",placeholder:"subject",fontWeight:"500",borderColor:N.subject&&z.subject?"red.300":null}),(0,B.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",N.subject&&z.subject&&N.subject]})]}),(0,B.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,B.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,B.jsx)(D.T,{resize:"none",fontSize:"sm",placeholder:"Enter Message",onChange:w,onBlur:T,value:A.message,name:"message",fontWeight:"500",borderColor:N.message&&z.message?"red.300":null}),(0,B.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",N.message&&z.message&&N.message]})]})]})]}),(0,B.jsxs)(g.jl,{children:[(0,B.jsx)(c.Button,{variant:"brand",size:"sm",disabled:!!o,onClick:F,children:o?(0,B.jsx)(y.A,{}):"Save"}),(0,B.jsx)(c.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{C.resetForm(),a()},size:"sm",children:"Close"})]})]})]})},k=e=>{const[a,t]=(0,l.useState)(!1),{isOpen:v,onOpen:p,onClose:g}=(0,r.j1)(),[j,S]=(0,l.useState)(!1),[f,y]=(0,l.useState)([]),[b,C]=(0,l.useState)(!1),[z,L]=(0,l.useState)([]),[D,H]=(0,l.useState)(""),P=JSON.parse(localStorage.getItem("user")),W=(0,o.Zp)(),[I,k]=(0,l.useState)(!1),[O,V]=(0,l.useState)([]),[E,G]=(0,l.useState)(!1),[_,R]=(0,l.useState)([]),[M,J,Y]=(0,m.h)(["Emails","Leads","Contacts"]),X={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var a;let{row:t}=e;return(0,B.jsx)(s.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,B.jsxs)(d.W1,{isLazy:!0,children:[(0,B.jsx)(d.IU,{children:(0,B.jsx)(h.txp,{})}),(0,B.jsxs)(d.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===M||void 0===M?void 0:M.view)&&(0,B.jsx)(d.Dr,{py:2.5,color:"green",onClick:()=>W("/Email/".concat(null===t||void 0===t?void 0:t.values._id)),icon:(0,B.jsx)(i.ViewIcon,{mb:"2px",fontSize:15}),children:"View"}),null!==t&&void 0!==t&&null!==(a=t.original)&&void 0!==a&&a.createBy&&null!==Y&&void 0!==Y&&Y.view?(0,B.jsxs)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>{var e;return W((null===t||void 0===t||null===(e=t.original)||void 0===e?void 0:e.createBy)&&"/contactView/".concat(null===t||void 0===t?void 0:t.original.createBy))},icon:(null===t||void 0===t?void 0:t.original.createBy)&&(0,B.jsx)(w.oau,{fontSize:15}),children:["  ",(null===t||void 0===t?void 0:t.original.createBy)&&(null===Y||void 0===Y?void 0:Y.view)&&"contact"]}):"",null!==t&&void 0!==t&&t.original.createByLead&&null!==J&&void 0!==J&&J.view?(0,B.jsx)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>W("/leadView/".concat(null===t||void 0===t?void 0:t.original.createByLead)),icon:(null===t||void 0===t?void 0:t.original.createByLead)&&(null===J||void 0===J?void 0:J.view)&&(0,B.jsx)(T.ju$,{style:{marginBottom:"4px"},fontSize:15}),children:(null===t||void 0===t?void 0:t.original.createByLead)&&(null===J||void 0===J?void 0:J.view)&&"lead"}):""]})]})})}},U=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"recipient",accessor:"createByName",cell:e=>{var a;return(0,B.jsx)(n.N_,{to:"/Email/".concat(null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.values._id),children:(0,B.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||"-"})})}},{Header:"sender Name",accessor:"senderName"},{Header:"Realeted To",accessor:"realeted",cell:e=>{let{row:a}=e;return(0,B.jsxs)(s.Text,{children:[null!==a&&void 0!==a&&a.original.createBy&&null!==Y&&void 0!==Y&&Y.view?(0,B.jsx)(n.N_,{to:"/contactView/".concat(null===a||void 0===a?void 0:a.original.createBy),children:(0,B.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createBy)&&"Contact"})}):(0,B.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createBy)&&"Contact"}),null!==J&&void 0!==J&&J.view&&null!==a&&void 0!==a&&a.original.createByLead?(0,B.jsx)(n.N_,{to:"/leadView/".concat(null===a||void 0===a?void 0:a.original.createByLead),children:(0,B.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createByLead)&&"Lead"})}):(0,B.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createByLead)&&"Lead"})]})}},{Header:"timestamp",accessor:"timestamp"},{Header:"Created",accessor:"created",cell:e=>{let{row:a}=e;return(0,B.jsx)(s.Text,{fontSize:"sm",fontWeight:"700",children:A()(null===a||void 0===a?void 0:a.values.timestamp).format("(DD/MM) h:mma")})}},...null!==M&&void 0!==M&&M.update||null!==M&&void 0!==M&&M.view||null!==M&&void 0!==M&&M.delete?[X]:[]],[$,Q]=(0,l.useState)([...U]),[Z,q]=(0,l.useState)([...U]),K=null===U||void 0===U?void 0:U.filter((e=>null===Z||void 0===Z?void 0:Z.find((a=>(null===a||void 0===a?void 0:a.Header)===e.Header))));return(0,l.useEffect)((()=>{(async()=>{k(!0);let e=(await(0,u.x4)("superAdmin"===P.role?"api/email/":"api/email/?sender=".concat(P._id))).data;e.forEach((e=>{e.createByLead&&(e.realeted="Lead"),e.createBy&&(e.realeted="Contact")})),V(e),k(!1)})()}),[a]),(0,B.jsxs)("div",{children:[(0,B.jsx)(x.A,{title:"Email",isLoding:I,columnData:$,dataColumn:K,allData:O,tableData:O,searchDisplay:E,setSearchDisplay:G,searchedDataOut:_,setSearchedDataOut:R,tableCustomFields:[],access:M,action:a,setAction:t,selectedColumns:Z,setSelectedColumns:q,isOpen:v,onClose:onclose,onOpen:p,selectedValues:f,setSelectedValues:y,setDelete:S,deleteMany:"true",AdvanceSearch:(0,B.jsx)(c.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,B.jsx)(i.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>C(!0),children:"Advance Search"}),getTagValuesOutSide:z,searchboxOutside:D,setGetTagValuesOutside:L,setSearchboxOutside:H}),(0,B.jsx)(N,{advanceSearch:b,setAdvanceSearch:C,setSearchedData:R,setDisplaySearchData:G,allData:O,setAction:t,setGetTagValues:L,setSearchbox:H}),(0,B.jsx)(F,{isOpen:v,size:"sm",onClose:g,setAction:t})]})}},3186:(e,a,t)=>{t.d(a,{T:()=>d});var l=t(8510),o=t(9522),n=t(835),i=t(5043);function r(){return r=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},r.apply(this,arguments)}var s=["className","rows"],d=(0,o.Rf)((function(e,a){var t=(0,o.Vl)("Textarea",e),d=(0,o.MN)(e),c=d.className,u=d.rows,m=function(e,a){if(null==e)return{};var t,l,o={},n=Object.keys(e);for(l=0;l<n.length;l++)t=n[l],a.indexOf(t)>=0||(o[t]=e[t]);return o}(d,s),x=(0,l.useFormControl)(m),h=u?(0,n.cJ)(t,["h","minH","height","minHeight"]):t;return i.createElement(o.Bv.textarea,r({ref:a,rows:u},x,{className:(0,n.cx)("chakra-textarea",c),__css:h}))}));n.gt&&(d.displayName="Textarea")}}]);
//# sourceMappingURL=471.34aee75a.chunk.js.map