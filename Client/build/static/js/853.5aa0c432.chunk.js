"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[853],{3972:(e,a,t)=>{t.d(a,{A:()=>h});var l=t(4450),s=t(4626),i=t(5104),d=t(216),n=t(6178),o=t.n(n),r=t(5043),c=t(2019),u=t(1899),v=t.n(u),m=(t(5015),t(6305)),x=t(579);const h=e=>{const{dashboard:a}=e,[t,n]=(0,r.useState)({}),[u,h]=(0,r.useState)(new Date(new Date-12096e5)),[p,f]=(0,r.useState)(new Date),[b,j]=(0,r.useState)("all"),[S,y]=(0,r.useState)("day"),C=JSON.parse(localStorage.getItem("user")),g=Object.keys(t).map((e=>{const a=t[e][0];let l=[];var s,i,d;null!==a&&void 0!==a&&a.Emails&&(l=l.concat(null===a||void 0===a||null===(s=a.Emails)||void 0===s?void 0:s.map((e=>({x:null===e||void 0===e?void 0:e.date,y:null===e||void 0===e?void 0:e.Emailcount})))));null!==a&&void 0!==a&&a.Calls&&(l=l.concat(null===a||void 0===a||null===(i=a.Calls)||void 0===i?void 0:i.map((e=>({x:null===e||void 0===e?void 0:e.date,y:null===e||void 0===e?void 0:e.Callcount})))));null!==a&&void 0!==a&&a.TextMsges&&(l=l.concat(null===a||void 0===a||null===(d=a.TextMsges)||void 0===d?void 0:d.map((e=>({x:null===e||void 0===e?void 0:e.date,y:null===e||void 0===e?void 0:e.TextSentCount})))));return{name:e,data:l}}));(0,r.useEffect)((()=>{(async()=>{const e={startDate:o()(u).format("YYYY-MM-DD"),endDate:o()(p).format("YYYY-MM-DD"),filter:S};let a=await(0,m.d_)("superAdmin"===C.role?"api/reporting/index":"api/reporting/index?sender=".concat(C._id),e);a&&200===a.status&&n(null===a||void 0===a?void 0:a.data)})()}),[u,p,S]);const w="all"===b?g:null===g||void 0===g?void 0:g.filter((e=>(null===e||void 0===e?void 0:e.name)===b));return(0,x.jsxs)(d.A,{children:[!a&&(0,x.jsxs)(l.Box,{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",mb:4,children:[(0,x.jsxs)(s.l6,{value:b,onChange:e=>j(e.target.value),size:"sm",width:{base:"100%",md:"15%"},mb:{base:3,md:"auto"},children:[(0,x.jsx)("option",{value:"all",children:"All"}),(0,x.jsx)("option",{value:"EmailDetails",children:"Email"}),(0,x.jsx)("option",{value:"outboundcall",children:"Call"})]}),(0,x.jsxs)(l.Box,{width:{base:"100%",md:"auto"},flexWrap:"wrap",justifyContent:"left",mb:{base:3,md:"auto"},display:"flex",children:[(0,x.jsx)(v(),{selected:u,onChange:e=>h(e),className:"datePickerBorder"}),(0,x.jsx)(v(),{selected:p,onChange:e=>f(e),className:"datePickerBorder"})]}),(0,x.jsx)(l.Box,{width:{base:"100%",md:"auto"},display:"flex",justifyContent:"right",mb:{base:3,md:"auto"},children:(0,x.jsx)(i.z6,{onChange:e=>y(e),value:S,children:(0,x.jsxs)(l.Stack,{direction:"row",children:[(0,x.jsx)(i.sx,{value:"day",children:"Daily"}),(0,x.jsx)(i.sx,{value:"week",children:"Weekly"})]})})})]}),(0,x.jsx)("div",{id:"chart",children:(0,x.jsx)("div",{id:"chart-timeline",children:w&&(0,x.jsx)(c.A,{options:{chart:{id:"line-chart"},xaxis:{type:"datetime"},yaxis:{title:{text:"Count"}},dataLabels:{enabled:!0}},series:w,type:"area",height:300})})})]})}},6853:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var l=t(216),s=t(5043),i=(t(5015),t(6305)),d=t(3972),n=t(55),o=t(579);const r=()=>{const[e,a]=(0,s.useState)([]),[t,r]=(0,s.useState)(!1),[c,u]=(0,s.useState)([]),v=JSON.parse(localStorage.getItem("user")),m=[{Header:"Email Sent",accessor:"emailsent"},{Header:"Outbound Calls",accessor:"outboundcall"}];"superAdmin"===v.role&&m.unshift({Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Name",accessor:"firstName"});const[x,h]=(0,s.useState)([...m]),[p,f]=(0,s.useState)([...m]),b=null===m||void 0===m?void 0:m.filter((e=>null===p||void 0===p?void 0:p.find((a=>(null===a||void 0===a?void 0:a.Header)===e.Header))));return(0,s.useEffect)((()=>{(async()=>{r(!0);let e=await(0,i.x4)("superAdmin"===v.role?"api/reporting":"api/reporting?_id=".concat(v._id));e&&200===e.status&&a(null===e||void 0===e?void 0:e.data),r(!1)})(),(async()=>{f(JSON.parse(JSON.stringify([{Header:"#",accessor:"_id"},{Header:"Name",accessor:"firstName"},{Header:"Email Sent",accessor:"emailsent"},{Header:"Outbound Calls",accessor:"outboundcall"}])))})()}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(d.A,{}),(0,o.jsx)(l.A,{mt:4,children:(0,o.jsx)(n.A,{title:"Reports",isLoding:t,columnData:m,dataColumn:b,allData:e,tableData:e,AdvanceSearch:!1,tableCustomFields:[],deleteMany:!0,selectedValues:c,setSelectedValues:u,selectedColumns:p,setSelectedColumns:f})})]})}}}]);
//# sourceMappingURL=853.5aa0c432.chunk.js.map