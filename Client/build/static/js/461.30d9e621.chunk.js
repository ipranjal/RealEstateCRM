"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[461],{1046:(e,a,t)=>{t.d(a,{A:()=>v});var l=t(9379),o=t(1206),n=t(4450),r=t(1778),i=t(5066),s=t(5043),d=t(1094),c=t(216),u=t(6914),x=t(8152),m=t(5369),h=t(579);function v(e){const{columnsData:a,tableData:t,title:v,type:p,selectedValues:g,setSelectedValues:j}=e,S=(0,s.useMemo)((()=>a),[a]),f=(0,s.useMemo)((()=>t),[t]),[y,b]=(JSON.parse(localStorage.getItem("user")),(0,s.useState)()),C=(0,d.useTable)({columns:S,data:f,initialState:{pageIndex:0}},d.useGlobalFilter,d.useSortBy,d.usePagination),{getTableProps:N,getTableBodyProps:B,headerGroups:z,prepareRow:A,page:T,canPreviousPage:w,canNextPage:D,pageOptions:L,pageCount:H,gotoPage:P,nextPage:W,previousPage:I,setPageSize:F,state:{pageIndex:k,pageSize:O}}=C;L.length<y&&b(L.length);const V=(0,o.dU)("gray.500","white"),G=(0,o.dU)("gray.200","whiteAlpha.100"),_=(e,a)=>{"multi"===p?e.target.checked?j((e=>[...e,a])):j((e=>e.filter((e=>e!==a)))):e.target.checked?j(a):j(null)};return(0,h.jsxs)(c.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,h.jsx)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,h.jsxs)(n.Text,{color:V,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[v,"  (",(0,h.jsx)(u.A,{targetNumber:null===f||void 0===f?void 0:f.length},null===f||void 0===f?void 0:f.length),")"]})}),(0,h.jsx)(n.Box,{overflowY:"auto",className:"table-container-property",children:(0,h.jsxs)(r.XI,(0,l.A)((0,l.A)({},N()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,h.jsx)(r.d8,{zIndex:1,children:null===z||void 0===z?void 0:z.map(((e,a)=>(0,s.createElement)(r.Tr,(0,l.A)((0,l.A)({},e.getHeaderGroupProps()),{},{key:a}),e.headers.map(((e,a)=>(0,s.createElement)(r.Th,(0,l.A)((0,l.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:a,borderColor:G}),(0,h.jsxs)(n.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,h.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:e.render("Header")}),!1!==e.isSortable&&(0,h.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,h.jsx)(m.GOR,{}):(0,h.jsx)(m.XhJ,{}):(0,h.jsx)(m.MjW,{})})]})))))))}),(0,h.jsxs)(r.NN,(0,l.A)((0,l.A)({},B()),{},{children:[0===(null===f||void 0===f?void 0:f.length)&&(0,h.jsx)(r.Tr,{children:(0,h.jsx)(r.Td,{colSpan:S.length,children:(0,h.jsx)(n.Text,{textAlign:"center",width:"100%",color:V,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===T||void 0===T?void 0:T.map(((e,a)=>{var t;return A(e),(0,s.createElement)(r.Tr,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:a}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,a)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsxs)(n.Flex,{align:"center",children:["multi"===p?(0,h.jsx)(i.Sc,{colorScheme:"brandScheme",value:g,isChecked:g.includes(null===e||void 0===e?void 0:e.value),onChange:a=>_(a,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,h.jsx)(i.Sc,{colorScheme:"brandScheme",value:g,isChecked:g===(null===e||void 0===e?void 0:e.value),onChange:a=>_(a,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]}):"title"===(null===e||void 0===e?void 0:e.column.Header)||"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsx)(n.Text,{me:"10px",color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"phone Number"===(null===e||void 0===e?void 0:e.column.Header)||"Email Address"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsx)(n.Text,{fontSize:"sm",fontWeight:"700",color:V,children:null===e||void 0===e?void 0:e.value}):("physical Address"===(null===e||void 0===e?void 0:e.column.Header)||"mailing Address"===(null===e||void 0===e?void 0:e.column.Header)||"Contact Method"===(null===e||void 0===e?void 0:e.column.Header))&&(t=(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(r.Td,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:a,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),t)})))}))]}))]}))}),(null===f||void 0===f?void 0:f.length)>5&&(0,h.jsx)(x.A,{gotoPage:P,gopageValue:y,setGopageValue:b,pageCount:H,canPreviousPage:w,previousPage:I,canNextPage:D,pageOptions:L,setPageSize:F,nextPage:W,pageSize:O,pageIndex:k})]})}},9565:(e,a,t)=>{t.d(a,{A:()=>u});var l=t(9942),o=t(4450),n=t(2554),r=t(5043),i=t(1046),s=t(9488),d=t(8860),c=t(579);const u=e=>{const{onClose:a,isOpen:t,fieldName:u,setFieldValue:x,data:m}=e,[h,v]=(0,r.useState)(),[p,g]=(0,r.useState)(!1);JSON.parse(localStorage.getItem("user"));return(0,c.jsxs)(l.aF,{onClose:a,size:"full",isOpen:t,children:[(0,c.jsx)(l.mH,{}),(0,c.jsxs)(l.$m,{children:[(0,c.jsx)(l.rQ,{children:"Select Contact"}),(0,c.jsx)(l.s_,{}),(0,c.jsx)(l.cw,{children:p?(0,c.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,c.jsx)(s.A,{})}):(0,c.jsx)(i.A,{tableData:m,selectedValues:h,setSelectedValues:v,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,c.jsxs)(l.jl,{children:[(0,c.jsxs)(n.Button,{variant:"brand",size:"sm",me:2,onClick:async()=>{try{g(!0),x(u,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!p,leftIcon:(0,c.jsx)(d.NLY,{}),children:[" ",p?(0,c.jsx)(s.A,{}):"Select"]}),(0,c.jsx)(n.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>a(),children:"Close"})]})]})]})}},7214:(e,a,t)=>{t.d(a,{A:()=>v});var l=t(9379),o=t(1206),n=t(4450),r=t(1778),i=t(5066),s=t(5043),d=t(1094),c=t(216),u=t(6914),x=t(8152),m=t(5369),h=t(579);function v(e){const{columnsData:a,tableData:t,title:v,type:p,selectedValues:g,setSelectedValues:j}=e,S=(0,s.useMemo)((()=>a),[a]),f=(0,s.useMemo)((()=>t),[t]),[y,b]=(JSON.parse(localStorage.getItem("user")),(0,s.useState)()),C=(0,d.useTable)({columns:S,data:f,initialState:{pageIndex:0}},d.useGlobalFilter,d.useSortBy,d.usePagination),{getTableProps:N,getTableBodyProps:B,headerGroups:z,prepareRow:A,page:T,canPreviousPage:w,canNextPage:D,pageOptions:L,pageCount:H,gotoPage:P,nextPage:W,previousPage:I,setPageSize:F,state:{pageIndex:k,pageSize:O}}=C;L.length<y&&b(L.length);const V=(0,o.dU)("gray.500","white"),G=(0,o.dU)("gray.200","whiteAlpha.100"),_=(e,a)=>{"multi"===p?e.target.checked?j((e=>[...e,a])):j((e=>e.filter((e=>e!==a)))):e.target.checked?j(a):j(null)};return(0,h.jsxs)(c.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,h.jsx)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,h.jsxs)(n.Text,{color:V,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[v,"  (",(0,h.jsx)(u.A,{targetNumber:null===f||void 0===f?void 0:f.length},null===f||void 0===f?void 0:f.length),")"]})}),(0,h.jsx)(n.Box,{overflowY:"auto",className:"table-container-property",children:(0,h.jsxs)(r.XI,(0,l.A)((0,l.A)({},N()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,h.jsx)(r.d8,{zIndex:1,children:null===z||void 0===z?void 0:z.map(((e,a)=>(0,s.createElement)(r.Tr,(0,l.A)((0,l.A)({},e.getHeaderGroupProps()),{},{key:a}),e.headers.map(((e,a)=>(0,s.createElement)(r.Th,(0,l.A)((0,l.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:a,borderColor:G}),(0,h.jsxs)(n.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,h.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:e.render("Header")}),!1!==e.isSortable&&(0,h.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,h.jsx)(m.GOR,{}):(0,h.jsx)(m.XhJ,{}):(0,h.jsx)(m.MjW,{})})]})))))))}),(0,h.jsxs)(r.NN,(0,l.A)((0,l.A)({},B()),{},{children:[0===(null===f||void 0===f?void 0:f.length)&&(0,h.jsx)(r.Tr,{children:(0,h.jsx)(r.Td,{colSpan:S.length,children:(0,h.jsx)(n.Text,{textAlign:"center",width:"100%",color:V,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===T||void 0===T?void 0:T.map(((e,a)=>{var t;return A(e),(0,s.createElement)(r.Tr,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:a}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,a)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsxs)(n.Flex,{align:"center",children:["multi"===p?(0,h.jsx)(i.Sc,{colorScheme:"brandScheme",value:g,isChecked:g.includes(null===e||void 0===e?void 0:e.value),onChange:a=>_(a,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,h.jsx)(i.Sc,{colorScheme:"brandScheme",value:g,isChecked:g===(null===e||void 0===e?void 0:e.value),onChange:a=>_(a,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]}):"Lead Name"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Email"===(null===e||void 0===e?void 0:e.column.Header)||"Lead PhoneNumber"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,h.jsx)(n.Text,{me:"10px",color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("Lead Address"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Status"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Owner"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Score"===(null===e||void 0===e?void 0:e.column.Header))&&(t=(0,h.jsx)(n.Text,{color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(r.Td,(0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:a,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),t)})))}))]}))]}))}),(null===f||void 0===f?void 0:f.length)>5&&(0,h.jsx)(x.A,{gotoPage:P,gopageValue:y,setGopageValue:b,pageCount:H,canPreviousPage:w,previousPage:I,canNextPage:D,pageOptions:L,setPageSize:F,nextPage:W,pageSize:O,pageIndex:k})]})}},1125:(e,a,t)=>{t.d(a,{A:()=>u});var l=t(9942),o=t(4450),n=t(2554),r=t(5043),i=t(7214),s=t(9488),d=t(8860),c=t(579);const u=e=>{const{onClose:a,isOpen:t,fieldName:u,setFieldValue:x,data:m}=e,[h,v]=(0,r.useState)(),[p,g]=(0,r.useState)(!1);JSON.parse(localStorage.getItem("user"));return(0,c.jsxs)(l.aF,{onClose:a,size:"full",isOpen:t,children:[(0,c.jsx)(l.mH,{}),(0,c.jsxs)(l.$m,{children:[(0,c.jsx)(l.rQ,{children:"Select Lead"}),(0,c.jsx)(l.s_,{}),(0,c.jsx)(l.cw,{children:p?(0,c.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,c.jsx)(s.A,{})}):(0,c.jsx)(i.A,{tableData:m,selectedValues:h,setSelectedValues:v,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,c.jsxs)(l.jl,{children:[(0,c.jsxs)(n.Button,{variant:"brand",size:"sm",me:2,onClick:async()=>{try{g(!0),x(u,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!p,leftIcon:(0,c.jsx)(d.NLY,{}),children:[" ",p?(0,c.jsx)(s.A,{}):"Select"]}),(0,c.jsx)(n.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>a(),children:"Close"})]})]})]})}},4461:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var l=t(5043),o=t(3216),n=t(5475),r=t(4034),i=t(9754),s=t(4450),d=t(5376),c=t(2554),u=t(6305),x=t(5574),m=t(55),h=t(7368),v=t(6178),p=t.n(v),g=t(9942),j=t(8510),S=t(5104),f=t(4626),y=t(7682),b=t(3186),C=t(9565),N=t(1125),B=t(9488),z=t(3516),A=t(3388),T=t(9849),w=t(579);const D=e=>{const{onClose:a,isOpen:t,setAction:o}=e,[n,r]=(0,l.useState)(!1),[i,d]=(0,l.useState)([]),[x,m]=(0,l.useState)(!1),[h,v]=(0,l.useState)(!1),p=JSON.parse(localStorage.getItem("user")),D={sender:null===p||void 0===p?void 0:p._id,recipient:"",callDuration:"",callNotes:"",createByContact:"",createByLead:"",startDate:new Date,endDate:"",category:"contact",assignmentTo:"",assignmentToLead:"",createBy:null===p||void 0===p?void 0:p._id},L=(0,z.Wx)({initialValues:D,validationSchema:T.Ar,onSubmit:(e,a)=>{let{resetForm:t}=a;V(),t()}}),{errors:H,touched:P,values:W,handleBlur:I,handleChange:F,handleSubmit:k,setFieldValue:O}=L,V=async()=>{try{r(!0),200===(await(0,u.d_)("api/phoneCall/add",W)).status&&(e.onClose(),o((e=>!e)))}catch(a){console.log(a)}finally{r(!1)}};(0,l.useEffect)((async()=>{W.start=null===e||void 0===e?void 0:e.date;try{var a;let e;"Contact"===W.category?e=await(0,u.x4)("superAdmin"===p.role?"api/contact/":"api/contact/?createBy=".concat(p._id)):"Lead"===W.category&&(e=await(0,u.x4)("superAdmin"===p.role?"api/lead/":"api/lead/?createBy=".concat(p._id))),d(null===(a=e)||void 0===a?void 0:a.data)}catch(t){console.log(t)}}),[null===e||void 0===e?void 0:e.date,W.category]);return(0,l.useEffect)((()=>{(async()=>{if(W.createByContact){let o=await(0,u.x4)("api/contact/view/",W.createByContact);var e,a,t,l;200===(null===o||void 0===o?void 0:o.status)&&(O("recipient",null===o||void 0===o||null===(e=o.data)||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.phoneNumber),W.recipient=null===o||void 0===o||null===(t=o.data)||void 0===t||null===(l=t.contact)||void 0===l?void 0:l.phoneNumber)}else if(W.createByLead){let e=await(0,u.x4)("api/lead/view/",W.createByLead);var o,n,r,i;200===(null===e||void 0===e?void 0:e.status)&&(O("recipient",null===e||void 0===e||null===(o=e.data)||void 0===o||null===(n=o.lead)||void 0===n?void 0:n.leadPhoneNumber),W.recipient=null===e||void 0===e||null===(r=e.data)||void 0===r||null===(i=r.lead)||void 0===i?void 0:i.leadPhoneNumber)}else O("recipient","")})()}),[W.createBy,W.createByLead]),(0,w.jsxs)(g.aF,{onClose:a,isOpen:t,isCentered:!0,children:[(0,w.jsx)(g.mH,{}),(0,w.jsxs)(g.$m,{children:[(0,w.jsx)(g.rQ,{children:"Add Call "}),(0,w.jsx)(g.s_,{}),(0,w.jsxs)(g.cw,{children:[(0,w.jsx)(C.A,{isOpen:x,data:i,onClose:m,fieldName:"createByContact",setFieldValue:O}),(0,w.jsx)(N.A,{isOpen:h,data:i,onClose:v,fieldName:"createByLead",setFieldValue:O}),(0,w.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Related"}),(0,w.jsx)(S.z6,{onChange:e=>{O("category",e),O("createByContact",""),O("createByLead","")},value:W.category,children:(0,w.jsxs)(s.Stack,{direction:"row",children:[(0,w.jsx)(S.sx,{value:"Contact",children:"Contact"}),(0,w.jsx)(S.sx,{value:"Lead",children:"Lead"})]})}),(0,w.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",H.category&&P.category&&H.category]})]}),(0,w.jsx)(s.GridItem,{colSpan:{base:12},children:"Contact"===W.category?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient  (Contact)"}),(0,w.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,w.jsx)(f.l6,{value:W.createByContact,name:"createByContact",onChange:F,mb:H.createByContact&&P.createByContact?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:H.createByContact&&P.createByContact?"red.300":null,children:null===i||void 0===i?void 0:i.map((e=>(0,w.jsx)("option",{value:e._id,children:"Contact"===W.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,w.jsx)(c.IconButton,{onClick:()=>m(!0),ml:2,fontSize:"25px",icon:(0,w.jsx)(A.G2h,{})})]}),(0,w.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",H.createByContact&&P.createByContact&&H.createByContact]})]})}):"Lead"===W.category?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Lead)"}),(0,w.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,w.jsx)(f.l6,{value:W.createByLead,name:"createByLead",onChange:F,mb:H.createByLead&&P.createByLead?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:H.createByLead&&P.createByLead?"red.300":null,children:null===i||void 0===i?void 0:i.map((e=>(0,w.jsx)("option",{value:e._id,children:"Contact"===W.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,w.jsx)(c.IconButton,{onClick:()=>v(!0),ml:2,fontSize:"25px",icon:(0,w.jsx)(A.G2h,{})})]}),(0,w.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",H.createByLead&&P.createByLead&&H.createByLead]})]})}):""}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsxs)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,w.jsx)(s.Text,{color:"red",children:"*"})]}),(0,w.jsx)(y.Input,{fontSize:"sm",disabled:!0,value:W.recipient?W.recipient:"",name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:H.recipient&&P.recipient?"red.300":null})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,w.jsx)(y.Input,{type:"datetime-local",fontSize:"sm",onChange:F,onBlur:I,value:W.startDate,name:"startDate",fontWeight:"500",borderColor:null!==H&&void 0!==H&&H.startDate&&null!==P&&void 0!==P&&P.startDate?"red.300":null}),(0,w.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",H.startDate&&P.startDate&&H.startDate]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,w.jsx)(y.Input,{type:"datetime-local",fontSize:"sm",min:W.startDate,onChange:F,onBlur:I,value:W.endDate,name:"endDate",fontWeight:"500",borderColor:null!==H&&void 0!==H&&H.endDate&&null!==P&&void 0!==P&&P.endDate?"red.300":null}),(0,w.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",H.endDate&&P.endDate&&H.endDate]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsxs)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,w.jsx)(s.Text,{color:"red",children:"*"})]}),(0,w.jsx)(y.Input,{fontSize:"sm",onChange:F,onBlur:I,value:W.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:H.callDuration&&P.callDuration?"red.300":null}),(0,w.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",H.callDuration&&P.callDuration&&H.callDuration]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,w.jsx)(b.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:F,onBlur:I,value:W.callNotes,name:"callNotes",fontWeight:"500",borderColor:H.callNotes&&P.callNotes?"red.300":null}),(0,w.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",H.callNotes&&P.callNotes&&H.callNotes]})]})]})]}),(0,w.jsxs)(g.jl,{children:[(0,w.jsx)(c.Button,{variant:"brand",size:"sm",disabled:!!n,onClick:k,children:n?(0,w.jsx)(B.A,{}):"Save"}),(0,w.jsx)(c.Button,{size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{L.resetForm(),a()},children:"Close"})]})]})]})};var L=t(7149),H=t(4960),P=t(899),W=t(577),I=t(7508);const F=e=>{const{state:a,allData:t,advanceSearch:l,setAdvanceSearch:o,isLoding:n,setSearchedData:r,setDisplaySearchData:i,setSearchClear:d,setSearchbox:u}=e,x=(0,I.wA)(),m=P.Ik({senderName:P.Yj(),realetedTo:P.Yj(),createByName:P.Yj()}),h=(0,z.Wx)({initialValues:{senderName:"",realetedTo:"",createByName:""},validationSchema:m,onSubmit:(e,a)=>{let{resetForm:l}=a;x((0,W.gB)(e)),x((0,W.DW)({values:e,allData:t,type:"Calls"}));const n=[{name:["senderName"],value:e.senderName},{name:["realetedTo"],value:e.realetedTo},{name:["createByName"],value:e.createByName}];x((0,W.Tr)(n.filter((e=>e.value)))),i(!0),o(!1),l(),u("")}}),{errors:v,touched:p,values:S,handleBlur:b,handleChange:C,handleSubmit:N,setFieldValue:A,resetForm:T,dirty:D}=h;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.aF,{onClose:()=>{o(!1),T()},isOpen:l,isCentered:!0,children:[(0,w.jsx)(g.mH,{}),(0,w.jsxs)(g.$m,{children:[(0,w.jsx)(g.rQ,{children:"Advance Search"}),(0,w.jsx)(g.s_,{onClick:()=>{o(!1),T()}}),(0,w.jsx)(g.cw,{children:(0,w.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Sender Name"}),(0,w.jsx)(y.Input,{fontSize:"sm",onChange:C,onBlur:b,value:null===S||void 0===S?void 0:S.senderName,name:"senderName",placeholder:"Enter senderName",fontWeight:"500"}),(0,w.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",v.senderName&&p.senderName&&v.senderName]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Realeted To"}),(0,w.jsxs)(f.l6,{value:null===S||void 0===S?void 0:S.realetedTo,fontSize:"sm",name:"realetedTo",onChange:C,fontWeight:"500",placeholder:"Select Realeted To",children:[(0,w.jsx)("option",{value:"contact",children:"Contact"}),(0,w.jsx)("option",{value:"lead",children:"Lead"})]}),(0,w.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",v.realetedTo&&p.realetedTo&&v.realetedTo]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Recipient"}),(0,w.jsx)(y.Input,{fontSize:"sm",onChange:C,onBlur:b,value:null===S||void 0===S?void 0:S.createByName,name:"createByName",placeholder:"Enter Recipient",fontWeight:"500"}),(0,w.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",v.createByName&&p.createByName&&v.createByName]})]})]})}),(0,w.jsxs)(g.jl,{children:[(0,w.jsx)(c.Button,{size:"sm",variant:"brand",mr:2,onClick:N,disabled:!(!n&&D),children:n?(0,w.jsx)(B.A,{}):"Search"}),(0,w.jsx)(c.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>T(),children:"Clear"})]})]})]})})},k=e=>{const[a,t]=(0,l.useState)(!1),{isOpen:v,onOpen:g,onClose:j}=(0,i.j1)(),[S,f]=(0,l.useState)(!1),[y,b]=(0,l.useState)([]),[C,N]=(0,l.useState)(!1),[B,z]=(0,l.useState)([]),[A,T]=(0,l.useState)(""),P=JSON.parse(localStorage.getItem("user")),W=(0,o.Zp)(),[I,k]=(0,l.useState)(!1),[O,V]=(0,l.useState)([]),[G,_]=(0,l.useState)(!1),[E,R]=(0,l.useState)([]),[M,J,Y]=(0,x.h)(["Calls","Leads","Contacts"]),X={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var a;let{row:t}=e;return(0,w.jsx)(s.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,w.jsxs)(d.W1,{isLazy:!0,children:[(0,w.jsx)(d.IU,{children:(0,w.jsx)(h.txp,{})}),(0,w.jsxs)(d.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===M||void 0===M?void 0:M.view)&&(0,w.jsx)(d.Dr,{py:2.5,color:"green",onClick:()=>W("/phone-call/".concat(null===t||void 0===t?void 0:t.values._id)),icon:(0,w.jsx)(r.ViewIcon,{mb:"2px",fontSize:15}),children:"View"}),null!==t&&void 0!==t&&null!==(a=t.original)&&void 0!==a&&a.createBy&&null!==Y&&void 0!==Y&&Y.view?(0,w.jsxs)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>{var e;return W((null===t||void 0===t||null===(e=t.original)||void 0===e?void 0:e.createBy)&&"/contactView/".concat(null===t||void 0===t?void 0:t.original.createBy))},icon:(null===t||void 0===t?void 0:t.original.createBy)&&(0,w.jsx)(H.oau,{fontSize:15}),children:["  ",(null===t||void 0===t?void 0:t.original.createBy)&&(null===Y||void 0===Y?void 0:Y.view)&&"contact"]}):"",null!==t&&void 0!==t&&t.original.createByLead&&null!==J&&void 0!==J&&J.view?(0,w.jsx)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>W("/leadView/".concat(null===t||void 0===t?void 0:t.original.createByLead)),icon:(null===t||void 0===t?void 0:t.original.createByLead)&&(null===J||void 0===J?void 0:J.view)&&(0,w.jsx)(L.ju$,{style:{marginBottom:"4px"},fontSize:15}),children:(null===t||void 0===t?void 0:t.original.createByLead)&&(null===J||void 0===J?void 0:J.view)&&"lead"}):""]})]})})}},U=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Recipient",accessor:"createByName",cell:e=>{var a;return(0,w.jsx)(n.N_,{to:"/phone-call/".concat(null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.values._id),children:(0,w.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||" - "})})}},{Header:"Sender Name",accessor:"senderName"},{Header:"Realeted To",accessor:"realeted",cell:e=>{let{row:a}=e;return(0,w.jsxs)(s.Text,{children:[null!==a&&void 0!==a&&a.original.createBy&&null!==Y&&void 0!==Y&&Y.view?(0,w.jsx)(n.N_,{to:"/contactView/".concat(null===a||void 0===a?void 0:a.original.createBy),children:(0,w.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createBy)&&"Contact"})}):(0,w.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createBy)&&"Contact"}),null!==J&&void 0!==J&&J.view&&null!==a&&void 0!==a&&a.original.createByLead?(0,w.jsx)(n.N_,{to:"/leadView/".concat(null===a||void 0===a?void 0:a.original.createByLead),children:(0,w.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createByLead)&&"Lead"})}):(0,w.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===a||void 0===a?void 0:a.original.createByLead)&&"Lead"})]})}},{Header:"Timestamp",accessor:"timestamp"},{Header:"Created",accessor:"created",cell:e=>{let{row:a}=e;return(0,w.jsx)(s.Text,{fontSize:"sm",fontWeight:"700",children:p()(null===a||void 0===a?void 0:a.values.timestamp).format("(DD/MM) h:mma")})}},...null!==M&&void 0!==M&&M.update||null!==M&&void 0!==M&&M.view||null!==M&&void 0!==M&&M.delete?[X]:[]],[$,Q]=(0,l.useState)([...U]),[Z,q]=(0,l.useState)([...U]),K=null===U||void 0===U?void 0:U.filter((e=>null===Z||void 0===Z?void 0:Z.find((a=>(null===a||void 0===a?void 0:a.Header)===e.Header))));return(0,l.useEffect)((()=>{(async()=>{k(!0);let e=await(0,u.x4)("superAdmin"===P.role?"api/phoneCall":"api/phoneCall?sender=".concat(P._id));V(e.data),k(!1)})()}),[a]),(0,w.jsxs)("div",{children:[(0,w.jsx)(m.A,{title:"Calls",isLoding:I,columnData:$,dataColumn:K,allData:O,tableData:O,searchDisplay:G,setSearchDisplay:_,searchedDataOut:E,setSearchedDataOut:R,tableCustomFields:[],access:M,action:a,setAction:t,selectedColumns:Z,setSelectedColumns:q,isOpen:v,onClose:onclose,onOpen:g,selectedValues:y,setSelectedValues:b,setDelete:f,deleteMany:"true",AdvanceSearch:(0,w.jsx)(c.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,w.jsx)(r.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>N(!0),children:"Advance Search"}),getTagValuesOutSide:B,searchboxOutside:A,setGetTagValuesOutside:z,setSearchboxOutside:T}),(0,w.jsx)(F,{advanceSearch:C,setAdvanceSearch:N,setSearchedData:R,setDisplaySearchData:_,allData:O,setAction:t,setGetTagValues:z,setSearchbox:T}),(0,w.jsx)(D,{isOpen:v,size:"sm",onClose:j,setAction:t})]})}},3186:(e,a,t)=>{t.d(a,{T:()=>d});var l=t(8510),o=t(9522),n=t(835),r=t(5043);function i(){return i=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},i.apply(this,arguments)}var s=["className","rows"],d=(0,o.Rf)((function(e,a){var t=(0,o.Vl)("Textarea",e),d=(0,o.MN)(e),c=d.className,u=d.rows,x=function(e,a){if(null==e)return{};var t,l,o={},n=Object.keys(e);for(l=0;l<n.length;l++)t=n[l],a.indexOf(t)>=0||(o[t]=e[t]);return o}(d,s),m=(0,l.useFormControl)(x),h=u?(0,n.cJ)(t,["h","minH","height","minHeight"]):t;return r.createElement(o.Bv.textarea,i({ref:a,rows:u},m,{className:(0,n.cx)("chakra-textarea",c),__css:h}))}));n.gt&&(d.displayName="Textarea")}}]);
//# sourceMappingURL=461.30d9e621.chunk.js.map