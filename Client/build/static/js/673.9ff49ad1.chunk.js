"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[673],{9201:(e,s,a)=>{a.d(s,{A:()=>v});var n=a(4034),r=a(9942),t=a(2554),l=a(4450),o=a(8510),i=a(7682),d=a(3458),m=a(9488),c=a(3516),u=a(5043),x=a(7149),h=a(2285),p=a(2145),f=a(9849),j=a(6305),b=a(579);const v=e=>{const{onClose:s,isOpen:a,setAction:v}=e,[S,N]=(0,u.useState)(!1),[g,C]=u.useState(!1),I=(0,c.Wx)({initialValues:{firstName:"",lastName:"",username:"",phoneNumber:"",password:""},validationSchema:f.vJ,onSubmit:e=>{T()}}),{errors:y,touched:z,values:w,handleBlur:W,handleChange:A,handleSubmit:B,setFieldValue:D,resetForm:F}=I,T=async()=>{try{N(!0);let a=await(0,j.d_)("api/user/register",w);var s;if(a&&200===a.status)e.onClose(),F(),v((e=>!e));else p.oR.error(null===(s=a.response.data)||void 0===s?void 0:s.message)}catch(a){console.log(a)}finally{N(!1)}};return(0,b.jsxs)(r.aF,{isOpen:a,isCentered:!0,children:[(0,b.jsx)(r.mH,{}),(0,b.jsxs)(r.$m,{children:[(0,b.jsxs)(r.rQ,{justifyContent:"space-between",display:"flex",children:["Add User",(0,b.jsx)(t.IconButton,{onClick:s,icon:(0,b.jsx)(n.CloseIcon,{})})]}),(0,b.jsx)(r.cw,{children:(0,b.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["First Name",(0,b.jsx)(l.Text,{color:"red",children:"*"})]}),(0,b.jsx)(i.Input,{fontSize:"sm",onChange:A,onBlur:W,value:w.firstName,name:"firstName",placeholder:"firstName",fontWeight:"500",borderColor:y.firstName&&z.firstName?"red.300":null}),(0,b.jsxs)(l.Text,{mb:"10px",color:"red",children:[" ",y.firstName&&z.firstName&&y.firstName]})]}),(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Last Name"}),(0,b.jsx)(i.Input,{fontSize:"sm",onChange:A,onBlur:W,value:w.lastName,name:"lastName",placeholder:"Last Name",fontWeight:"500",borderColor:y.lastName&&z.lastName?"red.300":null}),(0,b.jsxs)(l.Text,{mb:"10px",color:"red",children:[" ",y.lastName&&z.lastName&&y.lastName]})]}),(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Email",(0,b.jsx)(l.Text,{color:"red",children:"*"})]}),(0,b.jsx)(i.Input,{fontSize:"sm",type:"email",onChange:A,onBlur:W,value:w.username,name:"username",placeholder:"Email Address",fontWeight:"500",borderColor:y.username&&z.username?"red.300":null}),(0,b.jsxs)(l.Text,{mb:"10px",color:"red",children:[" ",y.username&&z.username&&y.username]})]}),(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Phone Number",(0,b.jsx)(l.Text,{color:"red",children:"*"})]}),(0,b.jsxs)(i.InputGroup,{children:[(0,b.jsx)(i.InputLeftElement,{pointerEvents:"none",children:(0,b.jsx)(n.PhoneIcon,{color:"gray.300",borderRadius:"16px"})}),(0,b.jsx)(i.Input,{type:"tel",fontSize:"sm",onChange:A,onBlur:W,value:w.phoneNumber,name:"phoneNumber",fontWeight:"500",borderColor:y.phoneNumber&&z.phoneNumber?"red.300":null,placeholder:"Phone number",borderRadius:"16px"})]}),(0,b.jsx)(l.Text,{mb:"10px",color:"red",children:y.phoneNumber&&z.phoneNumber&&y.phoneNumber})]}),(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Password"}),(0,b.jsxs)(i.InputGroup,{size:"md",children:[(0,b.jsx)(i.Input,{isRequired:!0,fontSize:"sm",placeholder:"Enter Your Password",name:"password",size:"lg",variant:"auth",type:g?"text":"password",value:w.password,onChange:A,onBlur:W,borderColor:y.password&&z.password?"red.300":null,className:y.password&&z.password?"isInvalid":null}),(0,b.jsx)(i.InputRightElement,{display:"flex",alignItems:"center",mt:"4px",children:(0,b.jsx)(d.In,{color:"gray.400",_hover:{cursor:"pointer"},as:g?h.B6J:x.kIi,onClick:()=>C(!g)})})]}),(0,b.jsxs)(l.Text,{mb:"10px",color:"red",children:[" ",y.password&&z.password&&y.password]})]})]})}),(0,b.jsxs)(r.jl,{children:[(0,b.jsx)(t.Button,{variant:"brand",size:"sm",disabled:!!S,onClick:B,children:S?(0,b.jsx)(m.A,{}):"Save"}),(0,b.jsx)(t.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{I.resetForm(),s()},children:"Close"})]})]})]})}},2876:(e,s,a)=>{a.d(s,{A:()=>S});var n=a(9379),r=a(4034),t=a(9942),l=a(2554),o=a(4450),i=a(8510),d=a(7682),m=a(9488),c=a(3516),u=a(5043),x=a(2145),h=a(6739),p=a(9849),f=a(6305),j=a(7508),b=a(7610),v=a(579);const S=e=>{const{isOpen:s,fetchData:a,data:S,userData:N,setEdit:g}=e,C={firstName:S?null===S||void 0===S?void 0:S.firstName:"",lastName:S?null===S||void 0===S?void 0:S.lastName:"",username:S?null===S||void 0===S?void 0:S.username:"",phoneNumber:S?null===S||void 0===S?void 0:S.phoneNumber:""},I=JSON.parse(window.localStorage.getItem("user")),y=(0,c.Wx)({initialValues:C,validationSchema:p.vJ,enableReinitialize:!0,onSubmit:(e,s)=>{let{resetForm:a}=s;O(),a()}}),z=(0,j.wA)(),w=()=>{g(!1),L()},{errors:W,touched:A,values:B,handleBlur:D,handleChange:F,handleSubmit:T,resetForm:L}=y,[k,E]=(0,u.useState)(!1),O=async()=>{try{E(!0);let r=await(0,f.yP)("api/user/edit/".concat(e.selectedId),B);if(r&&200===r.status){g(!1);let s=N;if((null===I||void 0===I?void 0:I._id)===e.selectedId){s&&"object"===typeof s&&(s=(0,n.A)((0,n.A)({},s),{},{firstName:null===B||void 0===B?void 0:B.firstName,lastName:null===B||void 0===B?void 0:B.lastName}));const e=JSON.stringify(s);localStorage.setItem("user",e),z((0,b.gV)(e))}z((0,h.k)(null===I||void 0===I?void 0:I._id)),w(),a(),e.setAction((e=>!e))}else{var s;x.oR.error(null===(s=r.response.data)||void 0===s?void 0:s.message)}}catch(r){console.log(r)}finally{E(!1)}};return(0,v.jsxs)(t.aF,{isOpen:s,isCentered:!0,children:[(0,v.jsx)(t.mH,{}),(0,v.jsxs)(t.$m,{children:[(0,v.jsxs)(t.rQ,{justifyContent:"space-between",display:"flex",children:["Edit User",(0,v.jsx)(l.IconButton,{onClick:()=>g(!1),icon:(0,v.jsx)(r.CloseIcon,{})})]}),(0,v.jsx)(t.cw,{children:(0,v.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,v.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,v.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["First Name",(0,v.jsx)(o.Text,{color:"red",children:"*"})]}),(0,v.jsx)(d.Input,{fontSize:"sm",onChange:F,onBlur:D,value:B.firstName,name:"firstName",placeholder:"firstName",fontWeight:"500",borderColor:W.firstName&&A.firstName?"red.300":null}),(0,v.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",W.firstName&&A.firstName&&W.firstName]})]}),(0,v.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,v.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Last Name"}),(0,v.jsx)(d.Input,{fontSize:"sm",onChange:F,onBlur:D,value:B.lastName,name:"lastName",placeholder:"Last Name",fontWeight:"500",borderColor:W.lastName&&A.lastName?"red.300":null}),(0,v.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",W.lastName&&A.lastName&&W.lastName]})]}),(0,v.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,v.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Email",(0,v.jsx)(o.Text,{color:"red",children:"*"})]}),(0,v.jsx)(d.Input,{fontSize:"sm",type:"email",onChange:F,onBlur:D,value:B.username,name:"username",placeholder:"Email Address",fontWeight:"500",borderColor:W.username&&A.username?"red.300":null}),(0,v.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",W.username&&A.username&&W.username]})]}),(0,v.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,v.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Phone Number",(0,v.jsx)(o.Text,{color:"red",children:"*"})]}),(0,v.jsxs)(d.InputGroup,{children:[(0,v.jsx)(d.InputLeftElement,{pointerEvents:"none",children:(0,v.jsx)(r.PhoneIcon,{color:"gray.300",borderRadius:"16px"})}),(0,v.jsx)(d.Input,{type:"tel",fontSize:"sm",onChange:F,onBlur:D,value:B.phoneNumber,name:"phoneNumber",fontWeight:"500",borderColor:W.phoneNumber&&A.phoneNumber?"red.300":null,placeholder:"Phone number",borderRadius:"16px"})]}),(0,v.jsx)(o.Text,{mb:"10px",color:"red",children:W.phoneNumber&&A.phoneNumber&&W.phoneNumber})]})]})}),(0,v.jsxs)(t.jl,{children:[(0,v.jsx)(l.Button,{size:"sm",variant:"brand",disabled:!!k,onClick:T,children:k?(0,v.jsx)(m.A,{}):"Update"}),(0,v.jsx)(l.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:()=>w(),children:"close"})]})]})]})}},2673:(e,s,a)=>{a.r(s),a.d(s,{default:()=>W});var n=a(5043),r=a(3216),t=a(5475),l=a(4034),o=a(9754),i=a(4450),d=a(5376),m=a(2554),c=a(6305),u=a(55),x=a(7368),h=a(4960),p=a(9201),f=a(2876),j=a(3516),b=a(899),v=a(9942),S=a(8510),N=a(7682),g=a(9488),C=a(577),I=a(7508),y=a(579);const z=e=>{const{allData:s,advanceSearch:a,setAdvanceSearch:n,isLoding:r,setDisplaySearchData:t,setSearchbox:l}=e,o=(0,I.wA)(),d=b.Ik({firstName:b.Yj(),username:b.Yj().email("User Email is invalid"),lastName:b.Yj()}),c=(0,j.Wx)({initialValues:{firstName:"",username:"",lastName:""},validationSchema:d,onSubmit:(e,a)=>{let{resetForm:r}=a;o((0,C.gB)(e)),o((0,C.DW)({values:e,allData:s,type:"Users"})),r();const i=[{name:["firstName"],value:e.firstName},{name:["lastName"],value:e.lastName},{name:["username"],value:e.username}];o((0,C.Tr)(i.filter((e=>e.value)))),t(!0),n(!1),l("")}}),{errors:u,touched:x,values:h,handleBlur:p,handleChange:f,handleSubmit:z,resetForm:w,dirty:W}=c;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(v.aF,{onClose:()=>{n(!1),w()},isOpen:a,isCentered:!0,children:[(0,y.jsx)(v.mH,{}),(0,y.jsxs)(v.$m,{children:[(0,y.jsx)(v.rQ,{children:"Advance Search"}),(0,y.jsx)(v.s_,{onClick:()=>{n(!1),w()}}),(0,y.jsx)(v.cw,{children:(0,y.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,y.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,y.jsx)(S.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"First Name"}),(0,y.jsx)(N.Input,{fontSize:"sm",onChange:f,onBlur:p,value:null===h||void 0===h?void 0:h.firstName,name:"firstName",placeholder:"Enter First Name",fontWeight:"500"}),(0,y.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.firstName&&x.firstName&&u.firstName]})]}),(0,y.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,y.jsx)(S.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Last Name"}),(0,y.jsx)(N.Input,{fontSize:"sm",onChange:f,onBlur:p,value:null===h||void 0===h?void 0:h.lastName,name:"lastName",placeholder:"Enter Last Name",fontWeight:"500"}),(0,y.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.lastName&&x.lastName&&u.lastName]})]}),(0,y.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,y.jsx)(S.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Email Id"}),(0,y.jsx)(N.Input,{fontSize:"sm",onChange:f,onBlur:p,value:null===h||void 0===h?void 0:h.username,name:"username",placeholder:"Enter User Name",fontWeight:"500"}),(0,y.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.username&&x.username&&u.username]})]})]})}),(0,y.jsxs)(v.jl,{children:[(0,y.jsx)(m.Button,{size:"sm",variant:"brand",mr:2,onClick:z,disabled:!(!r&&W),children:r?(0,y.jsx)(g.A,{}):"Search"}),(0,y.jsx)(m.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>w(),children:"Clear"})]})]})]})})};var w=a(8177);const W=()=>{const[e,s]=(0,n.useState)(!1),[a,j]=(0,n.useState)(!1),[b,v]=(0,n.useState)({}),{isOpen:S,onOpen:N,onClose:g}=(0,o.j1)(),[C,I]=(0,n.useState)(),[W,A]=(0,n.useState)(!1),[B,D]=(0,n.useState)([]),[F,T]=(0,n.useState)(!1),[L,k]=(0,n.useState)([]),[E,O]=(0,n.useState)(""),G=(0,r.Zp)(),[V,_]=(0,n.useState)(!1),[H,P]=(0,n.useState)([]),[R,U]=(0,n.useState)(!1),[J,Y]=(0,n.useState)([]),Q=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username",cell:e=>{var s;return(0,y.jsx)(t.N_,{to:"/userView/".concat(null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.values._id),children:(0,y.jsx)(i.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})}},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"role",accessor:"role"},{Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var s;let{row:a}=e;return(0,y.jsx)(i.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,y.jsxs)(d.W1,{isLazy:!0,children:[(0,y.jsx)(d.IU,{children:(0,y.jsx)(x.txp,{})}),(0,y.jsxs)(d.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(0,y.jsx)(d.Dr,{py:2.5,onClick:()=>{j(!0),I(null===a||void 0===a?void 0:a.original._id),v(null===a||void 0===a?void 0:a.original)},icon:(0,y.jsx)(l.EditIcon,{mb:1,fontSize:15}),children:"Edit"}),(0,y.jsx)(d.Dr,{py:2.5,color:"green",onClick:()=>G("/userView/".concat(null===a||void 0===a?void 0:a.values._id)),icon:(0,y.jsx)(l.ViewIcon,{mb:1,fontSize:15}),children:"View"}),"superAdmin"===(null===a||void 0===a||null===(s=a.original)||void 0===s?void 0:s.role)?"":(0,y.jsx)(d.Dr,{py:2.5,color:"red",onClick:()=>{D([null===a||void 0===a?void 0:a.original._id]),A(!0)},icon:(0,y.jsx)(l.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})})}}],[$,q]=(0,n.useState)([...Q]),[M,Z]=(0,n.useState)([...Q]),K=null===Q||void 0===Q?void 0:Q.filter((e=>null===M||void 0===M?void 0:M.find((s=>(null===s||void 0===s?void 0:s.Header)===e.Header)))),X=async()=>{var e;_(!0);let s=await(0,c.x4)("api/user/");P(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.user),_(!1)};return(0,n.useEffect)((()=>{X()}),[e]),(0,y.jsxs)("div",{children:[(0,y.jsx)(u.A,{title:"Users",isLoding:V,columnData:$,dataColumn:K,allData:H,tableData:R?J:H,searchDisplay:R,setSearchDisplay:U,searchedDataOut:J,setSearchedDataOut:Y,tableCustomFields:[],action:e,setAction:s,selectedColumns:M,setSelectedColumns:Z,isOpen:S,onClose:onclose,access:!0,onOpen:N,selectedValues:B,setSelectedValues:D,setDelete:A,BackButton:(0,y.jsx)(m.Button,{onClick:()=>G("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,y.jsx)(h.m6W,{}),ml:2,children:"Back"}),AdvanceSearch:(0,y.jsx)(m.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,y.jsx)(l.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>T(!0),children:"Advance Search"}),getTagValuesOutSide:L,searchboxOutside:E,setGetTagValuesOutside:k,setSearchboxOutside:O}),(0,y.jsx)(p.A,{isOpen:S,size:"sm",setAction:s,onClose:g}),(0,y.jsx)(f.A,{isOpen:a,size:"sm",setAction:s,onClose:g,fetchData:X,data:b,setEdit:j,selectedId:C}),(0,y.jsx)(w.A,{isOpen:W,onClose:()=>A(!1),type:"User",handleDeleteData:async()=>{try{_(!0),200===(await(0,c.Vn)("api/user/deleteMany",B)).status&&(D([]),A(!1),s((e=>!e)))}catch(e){console.log(e)}finally{_(!1)}},ids:"",selectedValues:B}),(0,y.jsx)(z,{advanceSearch:F,setAdvanceSearch:T,setSearchedData:Y,setDisplaySearchData:U,allData:H,setAction:s,setGetTagValues:k,setSearchbox:O})]})}}}]);
//# sourceMappingURL=673.9ff49ad1.chunk.js.map