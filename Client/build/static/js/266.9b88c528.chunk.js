"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[266],{6266:(e,l,s)=>{s.r(l),s.d(l,{default:()=>G});var t=s(4034),n=s(1206),i=s(4450),o=s(2554),a=s(5066),d=s(9292),r=s(216),c=s(5043),m=s(6305),u=s(9942),x=s(2892),h=s(8510),j=s(7682),v=s(9488),p=s(3516),f=s(3994),g=s(899);const S=g.Ik({moduleName:g.Yj().min(2).required("Name is required")});var C=s(1997),b=s(2145),N=s(3276),w=s(7508),y=s(579);const z=e=>{const{onClose:l,isOpen:s,fetchData:t,selectedId:n,editdata:a,setAction:d}=e,[r,g]=(0,c.useState)(!1),z=(0,w.wA)(),I={moduleName:null!==a&&void 0!==a&&a.moduleName?null===a||void 0===a?void 0:a.moduleName:"",icon:""},A=(0,p.Wx)({initialValues:I,validationSchema:S,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:s}=l;F(),s()}}),F=async()=>{let e=await(0,m.yP)("api/custom-field/change-module-name/".concat(n),D);var s,i,o;200===e.status?(await z((0,N.K)()),l(),t(),d((e=>!e)),b.oR.success(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)):b.oR.error(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)},{errors:B,touched:k,values:D,handleBlur:T,handleChange:W,handleSubmit:G,setFieldValue:O}=A;return(0,y.jsx)("div",{children:(0,y.jsxs)(u.aF,{onClose:l,isOpen:s,isCentered:!0,size:"2xl",children:[(0,y.jsx)(u.mH,{}),(0,y.jsxs)(u.$m,{children:[(0,y.jsx)(u.rQ,{children:"Edit Module Name "}),(0,y.jsx)(u.s_,{}),(0,y.jsx)(f.E,{}),(0,y.jsx)(u.cw,{children:(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,y.jsx)(i.GridItem,{colSpan:{base:12},children:(0,y.jsxs)("div",{className:"imageCard",style:{margin:"10px"},children:[(0,y.jsx)(x._V,{src:null===a||void 0===a?void 0:a.icon,height:"20%",width:"20%"}),(0,y.jsx)("div",{className:"imageContent",children:(0,y.jsx)(C.A,{borderRadius:"0",isMultipleAllow:!1,onFileSelect:e=>(async e=>{try{g(!0);const i=new FormData;i.append("icon",null===e||void 0===e?void 0:e[0]);const o=await(0,m.yP)("api/custom-field/change-icon/".concat(null===a||void 0===a?void 0:a._id),i);var s,t,n;200===o.status?(await z((0,N.K)()),l(),d((e=>!e)),b.oR.success(null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.message)):b.oR.error(null===o||void 0===o||null===(t=o.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}catch(i){console.log(i)}finally{g(!1)}})(e),content:(0,y.jsx)(o.Button,{size:"sm",variant:"brand",children:"Change"})})})]})}),(0,y.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,y.jsx)(h.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"2px",children:"Name"}),(0,y.jsx)(j.Input,{fontSize:"sm",onChange:W,onBlur:T,value:D.moduleName,name:"moduleName",placeholder:"Enter Name",fontWeight:"500",borderColor:B.moduleName&&k.moduleName?"red.300":null}),(0,y.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",B.moduleName&&k.moduleName&&B.moduleName]})]})]})})}),(0,y.jsxs)(u.jl,{children:[(0,y.jsx)(o.Button,{colorScheme:"brand",size:"sm",mr:2,disabled:!!r,onClick:G,children:r?(0,y.jsx)(v.A,{}):"Update"}),(0,y.jsx)(o.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:l,children:"Close"})]})]})]})})},I=e=>{var l,s;const{onClose:n,isOpen:a,selectedId:d,fetchData:r,setAction:m}=e,[x,h]=(0,c.useState)(!1),[j,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1);return(0,y.jsxs)("div",{children:[(0,y.jsxs)(u.aF,{onClose:n,isOpen:a,isCentered:!0,size:"lg",children:[(0,y.jsx)(u.mH,{}),(0,y.jsxs)(u.$m,{children:[(0,y.jsxs)(u.rQ,{textTransform:"capitalize",children:[null===j||void 0===j?void 0:j.name," "]}),(0,y.jsx)(u.s_,{}),(0,y.jsx)(u.cw,{children:(0,y.jsx)(i.Box,{children:(0,y.jsx)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,y.jsx)(i.GridItem,{colSpan:{base:12},children:(0,y.jsxs)(i.Flex,{children:[(0,y.jsx)(i.Text,{fontWeight:"bold",pr:2,textTransform:"capitalize",children:"require :"}),(0,y.jsx)(i.Text,{children:null!==j&&void 0!==j&&j.validations&&(null===j||void 0===j||null===(l=j.validations)||void 0===l?void 0:l.length)>0&&!0===(null===j||void 0===j||null===(s=j.validations[0])||void 0===s?void 0:s.require)?"True":"False"})]})})})})}),(0,y.jsxs)(u.jl,{children:[(0,y.jsx)(o.Button,{variant:"outline",colorScheme:"green",size:"sm",me:2,onClick:()=>{n(),g(!0)},leftIcon:(0,y.jsx)(t.EditIcon,{}),children:"Edit"}),(0,y.jsx)(o.Button,{colorScheme:"red",size:"sm",mr:2,disabled:!!x,leftIcon:(0,y.jsx)(t.DeleteIcon,{}),children:x?(0,y.jsx)(v.A,{}):"Delete"})]})]})]}),(0,y.jsx)(z,{isOpen:f,onClose:()=>{g(!1)},selectedId:e.selectedId,editdata:j,setAction:m,fetchData:r})]})};var A=s(3216),F=s(3458),B=s(7149);const k=e=>{const{onClose:l,isOpen:s,fetchData:t,setAction:a}=e,[d,r]=(0,c.useState)(!1),x=(0,n.dU)("brand.500","white"),f=(0,w.wA)(),g=(0,p.Wx)({initialValues:{moduleName:"",icon:""},validationSchema:S,onSubmit:(e,l)=>{let{resetForm:s}=l;O()}}),{errors:z,touched:I,values:A,handleBlur:k,handleChange:D,handleSubmit:T,setFieldValue:W,resetForm:G}=g,O=async()=>{try{var e;r(!0);const s=new FormData;s.append("moduleName",null===A||void 0===A?void 0:A.moduleName),s.append("icon",null===A||void 0===A||null===(e=A.icon)||void 0===e?void 0:e[0]);let n=await(0,m.d_)("api/custom-field/add-module",s);200===n.status?(t(),await f((0,N.K)()),l(),G(),a((e=>!e))):b.oR.error(n.response.data.message)}catch(s){b.oR.error(s.response.data.message)}finally{r(!1)}};return(0,y.jsx)("div",{children:(0,y.jsxs)(u.aF,{onClose:l,isOpen:s,isCentered:!0,size:"2xl",children:[(0,y.jsx)(u.mH,{}),(0,y.jsxs)(u.$m,{children:[(0,y.jsx)(u.rQ,{children:"Add Module"}),(0,y.jsx)(u.s_,{}),(0,y.jsx)(u.cw,{children:(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,y.jsx)(i.GridItem,{colSpan:{base:12},children:(0,y.jsx)(C.A,{w:{base:"100%"},me:"36px",minH:100,img:"Property Photos"===e.text?"img":"",isMultipleAllow:!1,height:"100%",onFileSelect:e=>W("icon",e),content:(0,y.jsxs)(i.Box,{children:[(0,y.jsx)(F.In,{as:B.vpy,w:"50px",h:"50px",color:x}),(0,y.jsx)(i.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,y.jsx)(i.Text,{fontSize:"sm",fontWeight:"700",color:x,children:"Upload File"})}),(null===A||void 0===A?void 0:A.icon.length)>0&&(0,y.jsxs)(i.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",null===A||void 0===A?void 0:A.icon.length]})]})})}),(0,y.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,y.jsxs)(h.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"2px",children:["Name",(0,y.jsx)(i.Text,{color:"red",children:"*"})]}),(0,y.jsx)(j.Input,{fontSize:"sm",onChange:D,onBlur:k,value:A.moduleName,name:"moduleName",placeholder:"Enter Name",fontWeight:"500",borderColor:z.moduleName&&I.moduleName?"red.300":null}),(0,y.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",z.moduleName&&I.moduleName&&z.moduleName]})]})]})})}),(0,y.jsxs)(u.jl,{children:[(0,y.jsx)(o.Button,{colorScheme:"brand",size:"sm",mr:2,disabled:!!d,onClick:T,children:d?(0,y.jsx)(v.A,{}):"Save"}),(0,y.jsx)(o.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{l(),G()},children:"Close"})]})]})]})})};var D=s(4960),T=s(2853),W=s(8177);const G=()=>{const e=(0,A.Zp)(),[l,s]=(0,c.useState)(!1),[u,x]=(0,c.useState)(!1),[h,j]=(0,c.useState)(!1),[p,f]=(0,c.useState)(!1),[g,S]=(0,c.useState)(!1),[C,b]=(0,c.useState)(),[F,B]=(0,c.useState)([]),[G,O]=(0,c.useState)([]),[_,E]=(0,c.useState)([]),[R,M]=(0,c.useState)(!1),P=(0,n.dU)("gray.500","white"),[V,H]=(0,c.useState)(""),K=(0,w.wA)(),L=async()=>{M(!0);try{let e=await(0,m.x4)("api/custom-field");O(null===e||void 0===e?void 0:e.data),M(!1)}catch(e){}};(0,c.useEffect)((()=>{L()}),[g]);const q=(e,l)=>{H(l),b(null===e||void 0===e?void 0:e._id),f(!p)};return(0,y.jsxs)("div",{children:[(0,y.jsxs)(i.Flex,{justifyContent:"end",mb:3,children:[_.length>0&&(0,y.jsx)(o.Button,{variant:"outline",colorScheme:"brand",color:"red",mr:2,leftIcon:(0,y.jsx)(t.DeleteIcon,{}),onClick:()=>{q("","many")},size:"sm",children:"Delete"}),(0,y.jsx)(o.Button,{size:"sm",variant:"brand",me:1,onClick:()=>{j(!u)},leftIcon:(0,y.jsx)(t.AddIcon,{}),children:"Add New"}),(0,y.jsx)(o.Button,{size:"sm",variant:"brand",onClick:()=>e(-1),leftIcon:(0,y.jsx)(D.m6W,{}),children:" Back"})]}),R?(0,y.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:P,fontSize:"sm",fontWeight:"700",children:(0,y.jsx)(v.A,{})}):G.length>0?(0,y.jsx)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:null===G||void 0===G?void 0:G.map(((e,n)=>(0,y.jsx)(i.GridItem,{rowSpan:2,colSpan:{base:12,md:6,lg:3},children:(0,y.jsx)(r.A,{children:(0,y.jsxs)(i.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,y.jsxs)(i.Flex,{children:[(0,y.jsx)(a.Sc,{disabled:"Properties"===e.moduleName||"Contacts"===e.moduleName||"Leads"===e.moduleName,colorScheme:"brandScheme",value:_,isChecked:_.includes(null===e||void 0===e?void 0:e._id),onChange:l=>((e,l)=>{e.target.checked?E((e=>[...e,l])):E((e=>e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e._id),me:"10px"}),(0,y.jsx)(d.m,{hasArrow:!0,label:null===e||void 0===e?void 0:e.moduleName,bg:"gray.200",color:"gray",textTransform:"capitalize",fontSize:"sm",children:(0,y.jsx)(i.Heading,{size:"md",fontWeight:"500",sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"6rem",overflow:"hidden"},children:null===e||void 0===e?void 0:e.moduleName})})]}),(0,y.jsxs)(i.Flex,{children:[(0,y.jsx)(o.Button,{size:"sm",disabled:"Properties"===e.moduleName||"Contacts"===e.moduleName||"Leads"===e.moduleName,variant:"outline",me:2,color:"green",onClick:()=>(e=>{b(null===e||void 0===e?void 0:e._id),B(e),s(!l)})(e),children:(0,y.jsx)(t.EditIcon,{})}),(0,y.jsx)(o.Button,{size:"sm",disabled:"Properties"===e.moduleName||"Contacts"===e.moduleName||"Leads"===e.moduleName,variant:"outline",me:2,color:"red",onClick:()=>q(e,"one"),children:(0,y.jsx)(t.DeleteIcon,{})})]})]})})},n)))}):(0,y.jsx)(r.A,{mt:"5",children:(0,y.jsx)(i.Text,{textAlign:"center",width:"100%",color:"gray.500",fontSize:"sm",fontWeight:"700",children:(0,y.jsx)(T.A,{})})}),(0,y.jsx)(k,{isOpen:h,onClose:()=>{j(!1)},fetchData:L,setAction:S}),(0,y.jsx)(z,{isOpen:l,onClose:()=>{s(!1)},selectedId:C,editdata:F,setAction:S,fetchData:L}),(0,y.jsx)(W.A,{isOpen:p,onClose:()=>f(!1),type:"Module",handleDeleteData:async(e,l)=>{if("one"===V)try{if(e){M(!0);200===(await(0,m.Gx)("api/custom-field/module/",e)).status&&(await K((0,N.K)()),f(!1),L())}}catch(s){console.log(s)}finally{M(!1)}else if("many"===V)try{M(!0),200===(await(0,m.Vn)("api/custom-field/deleteMany-Module",l)).status&&(await K((0,N.K)()),E([]),f(!1),L())}catch(s){console.log(s)}finally{M(!1)}},ids:C,selectedValues:_}),(0,y.jsx)(I,{isOpen:u,onClose:()=>{x(!1)},selectedId:C,setAction:S,fetchData:L})]})}}}]);
//# sourceMappingURL=266.9b88c528.chunk.js.map