"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[83],{7083:(e,t,l)=>{l.r(t),l.d(t,{default:()=>O});var o=l(9754),s=l(4450),n=l(2554),i=l(5043),a=l(6305),r=l(55),d=l(4960),c=l(3216),u=l(9379),x=l(1206),h=l(9942),p=l(1778),v=l(9488),m=l(1094),g=l(5066),j=l(3516),f=l(2853),S=l(579);const y=function(e){const{columnsData:t,name:l,tableData:o,fetchData:r,setAccess:d,_id:c,setAccessRole:y,setRoleModal:T,editModal:A,setEditModal:C}=e,b=(0,x.dU)("secondaryGray.900","white"),z=(0,x.dU)("gray.200","whiteAlpha.100"),w=(0,i.useMemo)((()=>t),[t]),[P,H]=(0,i.useState)(!1),[k,D]=(0,i.useState)(),W=(0,i.useMemo)((()=>o),[o]),N=(JSON.parse(localStorage.getItem("user")),(0,m.useTable)({columns:w,data:W,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination)),{getTableBodyProps:O,headerGroups:R,prepareRow:F,page:I,pageOptions:B,state:{pageIndex:G,pageSize:M}}=N;B.length<k&&D(B.length);const E={roleName:l,access:o},_=(0,j.Wx)({initialValues:E,enableReinitialize:!0,onSubmit:(e,t)=>{let{resetForm:l}=t;Q()}}),{values:U,handleSubmit:V,setFieldValue:L}=_,X=(e,t)=>l=>{const{checked:o}=l.target,s=U.access.map(((l,s)=>s===e?(0,u.A)((0,u.A)({},l),{},{[t]:o}):l));L("access",s),d(s)},Q=async()=>{try{H(!0),200===(await(0,a.yP)("api/role-access/edit/".concat(c),U)).status&&(C(!1),r(),y(o),T(!0))}catch(e){console.log(e)}finally{H(!1)}};return(0,i.useEffect)((()=>{r()}),[A]),(0,S.jsxs)(h.aF,{onClose:()=>C(!1),isOpen:A,isCentered:!0,size:"xl",children:[(0,S.jsx)(h.mH,{}),(0,S.jsxs)(h.$m,{height:"580px",maxWidth:"2xl",children:[(0,S.jsxs)(h.rQ,{textTransform:"capitalize",children:[l," Access"]}),(0,S.jsx)(h.s_,{}),(0,S.jsx)(h.cw,{overflow:"auto",height:"400px",children:(0,S.jsxs)(p.XI,{children:[(0,S.jsx)(p.d8,{children:null===R||void 0===R?void 0:R.map(((e,t)=>{var l;return(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:t}),null===(l=e.headers)||void 0===l?void 0:l.map(((e,t)=>(0,S.jsx)(p.Th,{sx:{width:"10px"},pe:"10px",borderColor:z,display:!1===e.display&&"none",children:(0,S.jsx)(s.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:!1!==e.display&&e.render("Header")})},t))))}))}),(0,S.jsx)(p.NN,(0,u.A)((0,u.A)({},O()),{},{children:P?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,S.jsx)(s.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(v.A,{})})})}):0===(null===W||void 0===W?void 0:W.length)?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:w.length,children:(0,S.jsx)(s.Text,{textAlign:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===I||void 0===I?void 0:I.map(((e,t)=>{var l;return F(e),(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:t}),null===e||void 0===e||null===(l=e.cells)||void 0===l?void 0:l.map(((e,l)=>{let o="";if("title"===(null===e||void 0===e?void 0:e.column.Header))o=(0,S.jsx)(s.Text,{me:"10px",color:b,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("create"===(null===e||void 0===e?void 0:e.column.Header)){var n;o=(0,S.jsx)(s.Text,{color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{value:e.value?e.value:null===U||void 0===U||null===(n=U.access[t])||void 0===n?void 0:n.create,defaultChecked:e.value,onChange:X(t,"create")})})}else if("view"===(null===e||void 0===e?void 0:e.column.Header)){var a;o=(0,S.jsx)(s.Text,{color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{checked:null===U||void 0===U||null===(a=U.access[t])||void 0===a?void 0:a.view,defaultChecked:e.value,onChange:X(t,"view")})})}else if("update"===(null===e||void 0===e?void 0:e.column.Header)){var r;o=(0,S.jsx)(s.Text,{color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{checked:null===U||void 0===U||null===(r=U.access[t])||void 0===r?void 0:r.update,defaultChecked:e.value,onChange:X(t,"update")})})}else if("delete"===(null===e||void 0===e?void 0:e.column.Header)){var d;o=(0,S.jsx)(s.Text,{color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{checked:null===U||void 0===U||null===(d=U.access[t])||void 0===d?void 0:d.delete,defaultChecked:e.value,onChange:X(t,"delete")})})}return(0,i.createElement)(p.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e?void 0:e.column.Header)&&"none"}}),o)})))}))}))]})}),(0,S.jsxs)(h.jl,{children:[(0,S.jsx)(n.Button,{size:"sm",variant:"brand",onClick:V,children:"Save"}),(0,S.jsx)(n.Button,{size:"sm",onClick:()=>{C(!1),T(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};var T=l(5369),A=l(8152),C=l(4448);const b=e=>{const{setUserModal:t,userModal:l,tableData:o,columnsData:r,setOpenUser:d,_id:c,userRole:v,fetchData:j}=e,y=(0,x.dU)("secondaryGray.900","white"),b=(0,x.dU)("gray.200","whiteAlpha.100"),z=(0,i.useMemo)((()=>r),[r]),[w,P]=(0,i.useState)(!1),[H,k]=(0,i.useState)([]),D=(0,i.useMemo)((()=>o),[o]),[W,N]=(0,i.useState)(),O=(0,m.useTable)({columns:z,data:D,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableProps:R,getTableBodyProps:F,headerGroups:I,prepareRow:B,page:G,canPreviousPage:M,canNextPage:E,pageOptions:_,pageCount:U,gotoPage:V,nextPage:L,previousPage:X,setPageSize:Q,state:{pageIndex:$,pageSize:q}}=O;_.length<W&&N(_.length);const J=[...new Set(H)];(0,i.useEffect)((()=>{const e=null===v||void 0===v?void 0:v.map((e=>e._id));k(e)}),[l]);return(0,S.jsxs)(h.aF,{onClose:()=>t(!1),isOpen:l,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,S.jsx)(h.mH,{}),(0,S.jsxs)(h.$m,{children:[(0,S.jsx)(h.rQ,{children:(0,S.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,S.jsx)(s.Text,{children:"Users"}),(0,S.jsx)(h.s_,{mt:"2"})]})}),(0,S.jsxs)(h.cw,{overflowY:"auto",height:"400px",children:[(0,S.jsxs)(p.XI,(0,u.A)((0,u.A)({},R()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,S.jsx)(p.d8,{children:null===I||void 0===I?void 0:I.map(((e,t)=>{var l;return(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:t}),null===(l=e.headers)||void 0===l?void 0:l.map(((e,t)=>(0,i.createElement)(p.Th,(0,u.A)((0,u.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:t,borderColor:b}),(0,S.jsxs)(s.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,S.jsx)("span",{style:{textTransform:"capitalize"},children:e.render("Header")}),!1!==e.isSortable&&(0,S.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,S.jsx)(T.GOR,{}):(0,S.jsx)(T.XhJ,{}):(0,S.jsx)(T.MjW,{})})]})))))}))}),(0,S.jsx)(p.NN,(0,u.A)((0,u.A)({},F()),{},{children:w?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:null===z||void 0===z?void 0:z.length,children:(0,S.jsx)(s.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:y,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(C.y,{})})})}):0===(null===D||void 0===D?void 0:D.length)?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:z.length,children:(0,S.jsx)(s.Text,{textAlign:"center",width:"100%",color:y,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===G||void 0===G?void 0:G.map(((e,t)=>{var l;return B(e),(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:t}),null===e||void 0===e||null===(l=e.cells)||void 0===l?void 0:l.map(((e,t)=>{let l="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,S.jsxs)(s.Flex,{align:"center",children:[(0,S.jsx)(g.Sc,{colorScheme:"brandScheme",value:H,isChecked:H.includes(null===e||void 0===e?void 0:e.value),onChange:t=>((e,t)=>{e.target.checked?k((e=>[...e,t])):k((e=>e.filter((e=>e!==t))))})(t,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,S.jsx)(s.Text,{color:y,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]}):"email Id"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,S.jsx)(s.Text,{me:"10px",color:y,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,S.jsx)(s.Text,{me:"10px",color:y,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e?void 0:e.column.Header)&&(l=(0,S.jsx)(s.Text,{color:y,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,i.createElement)(p.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:t,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),l)})))}))}))]})),(null===D||void 0===D?void 0:D.length)>5&&(0,S.jsx)(A.A,{gotoPage:V,gopageValue:W,setGopageValue:N,pageCount:U,canPreviousPage:M,previousPage:X,canNextPage:E,pageOptions:_,setPageSize:Q,nextPage:L,pageSize:q,pageIndex:$})]}),(0,S.jsxs)(h.jl,{children:[(0,S.jsx)(n.Button,{variant:"brand",size:"sm",onClick:()=>{(async()=>{200===(await(0,a.yP)("api/role-access/assignedUsers/".concat(c),J)).status&&(t(!1),j())})(),d(!0)},children:"Save"}),(0,S.jsx)(n.Button,{size:"sm",onClick:()=>{t(!1),k([]),d(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};const z=function(e){const{tableData:t,columnsData:l,isOpen:o,_id:r,setRoleModal:d,setOpenUser:c,fetchData:g}=e,j=(0,x.dU)("secondaryGray.900","white"),y=(0,x.dU)("gray.200","whiteAlpha.100"),C=(0,i.useMemo)((()=>l),[l]),[z,w]=(0,i.useState)([]),[P,H]=(0,i.useState)(!1),k=(0,i.useMemo)((()=>t),[t]),[D,W]=(0,i.useState)(!1),[N,O]=(0,i.useState)([]),[R,F]=(0,i.useState)(),I=(0,m.useTable)({columns:C,data:k,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableProps:B,getTableBodyProps:G,headerGroups:M,prepareRow:E,page:_,canPreviousPage:U,canNextPage:V,pageOptions:L,pageCount:X,gotoPage:Q,nextPage:$,previousPage:q,setPageSize:J,state:{pageIndex:Y,pageSize:Z}}=I;L.length<R&&F(L.length);const K=async()=>{var e;let t=await(0,a.x4)("api/user/?role=user");O(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.user)};return(0,i.useEffect)((()=>{K()}),[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(h.aF,{onClose:()=>c(!1),isOpen:o,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,S.jsx)(h.mH,{}),(0,S.jsxs)(h.$m,{children:[(0,S.jsx)(h.rQ,{height:"580px",children:(0,S.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,S.jsx)(s.Text,{children:"Users"}),(0,S.jsx)(n.Button,{variant:"brand",size:"sm",me:"2rem",onClick:()=>{c(!1),W(!0)},children:"Manage Users"}),(0,S.jsx)(h.s_,{mt:"2"})]})}),(0,S.jsxs)(h.cw,{overflow:"auto",height:"400px",children:[(0,S.jsxs)(p.XI,(0,u.A)((0,u.A)({},B()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,S.jsx)(p.d8,{children:null===M||void 0===M?void 0:M.map(((e,t)=>{var l;return(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:t}),null===(l=e.headers)||void 0===l?void 0:l.map(((e,t)=>(0,i.createElement)(p.Th,(0,u.A)((0,u.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:t,borderColor:y}),(0,S.jsxs)(s.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,S.jsx)("span",{style:{textTransform:"capitalize"},children:e.render("Header")}),!1!==e.isSortable&&(0,S.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,S.jsx)(T.GOR,{}):(0,S.jsx)(T.XhJ,{}):(0,S.jsx)(T.MjW,{})})]})))))}))}),(0,S.jsx)(p.NN,(0,u.A)((0,u.A)({},G()),{},{children:P?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:null===C||void 0===C?void 0:C.length,children:(0,S.jsx)(s.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:j,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(v.A,{})})})}):0===(null===k||void 0===k?void 0:k.length)?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:C.length,children:(0,S.jsx)(s.Text,{textAlign:"center",width:"100%",color:j,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===_||void 0===_?void 0:_.map(((e,t)=>{var l;return E(e),(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:t}),null===e||void 0===e||null===(l=e.cells)||void 0===l?void 0:l.map(((e,t)=>{let l="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,S.jsx)(s.Flex,{align:"center",children:(0,S.jsx)(s.Text,{color:j,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})}):"email Id"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,S.jsx)(s.Text,{me:"10px",color:j,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,S.jsx)(s.Text,{me:"10px",color:j,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e?void 0:e.column.Header)&&(l=(0,S.jsx)(s.Text,{color:j,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,i.createElement)(p.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:t,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),l)})))}))}))]})),(null===k||void 0===k?void 0:k.length)>5&&(0,S.jsx)(A.A,{gotoPage:Q,gopageValue:R,setGopageValue:F,pageCount:X,canPreviousPage:U,previousPage:q,canNextPage:V,pageOptions:L,setPageSize:J,nextPage:$,pageSize:Z,pageIndex:Y})]}),(0,S.jsx)(h.jl,{children:(0,S.jsx)(n.Button,{size:"sm",onClick:()=>{c(!1),d(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})})]})]}),(0,S.jsx)(b,{fetchData:g,userModal:D,setOpenUser:c,_id:r,setUserModal:W,userFetchData:K,userRole:t,tableData:N,columnsData:l})]})};const w=function(e){const{name:t,tableData:l,fetchData:o,columnsData:r,isOpen:d,accessRole:c,setAction:g,setAccess:j,_id:T,setAccessRole:A,onOpen:C,setRoleModal:b}=e,w=(0,x.dU)("secondaryGray.900","white"),P=(0,x.dU)("gray.200","whiteAlpha.100"),H=(0,i.useMemo)((()=>r),[r]),[k,D]=(0,i.useState)(!1),[W,N]=(0,i.useState)(!1),[O,R]=(0,i.useState)(),[F,I]=(0,i.useState)(),B=(0,i.useMemo)((()=>c),[c]),[G,M]=(JSON.parse(localStorage.getItem("user")),(0,i.useState)([])),E=(0,m.useTable)({columns:H,data:B,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableBodyProps:_,headerGroups:U,prepareRow:V,page:L,pageOptions:X,state:{pageIndex:Q,pageSize:$}}=E;X.length<F&&I(X.length);const q=async()=>{if(T){let e=await(0,a.x4)("api/role-access/assignedUsers/",T);M(null===e||void 0===e?void 0:e.data)}};return(0,i.useEffect)((()=>{q()}),[T]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(h.aF,{onClose:()=>b(!1),isOpen:d,isCentered:!0,size:"xl",children:[(0,S.jsx)(h.mH,{}),(0,S.jsxs)(h.$m,{height:"580px",maxWidth:"2xl",children:[(0,S.jsx)(h.rQ,{children:(0,S.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,S.jsxs)(s.Text,{textTransform:"capitalize",children:[t," Access"]}),(0,S.jsxs)(s.Text,{style:{marginRight:"25px",fontSize:"15px",fontWeight:"700",marginTop:"5px",color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:()=>{R(!0),b(!1)},children:["View user's in ",t," role"]}),(0,S.jsx)(h.s_,{mt:"2"})]})}),(0,S.jsx)(h.cw,{overflow:"auto",height:"400px",children:(0,S.jsxs)(p.XI,{children:[(0,S.jsx)(p.d8,{children:null===U||void 0===U?void 0:U.map(((e,t)=>{var l;return(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:t}),null===(l=e.headers)||void 0===l?void 0:l.map(((e,t)=>(0,S.jsx)(p.Th,{sx:{width:"10px"},borderColor:P,display:!1===e.display&&"none",children:!1!==e.display&&e.render("Header")},t))))}))}),(0,S.jsx)(p.NN,(0,u.A)((0,u.A)({},_()),{},{children:k?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:null===H||void 0===H?void 0:H.length,children:(0,S.jsx)(s.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:w,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(v.A,{})})})}):0===(null===B||void 0===B?void 0:B.length)?(0,S.jsx)(p.Tr,{children:(0,S.jsx)(p.Td,{colSpan:H.length,children:(0,S.jsx)(s.Text,{textAlign:"center",width:"100%",color:w,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===L||void 0===L?void 0:L.map(((e,t)=>{var l;return V(e),(0,i.createElement)(p.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:t}),null===e||void 0===e||null===(l=e.cells)||void 0===l?void 0:l.map(((e,t)=>{let l="";return"title"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,S.jsx)(s.Text,{me:"10px",color:w,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("create"===(null===e||void 0===e?void 0:e.column.Header)||"view"===(null===e||void 0===e?void 0:e.column.Header)||"update"===(null===e||void 0===e?void 0:e.column.Header)||"delete"===(null===e||void 0===e?void 0:e.column.Header))&&(l=(0,S.jsx)(s.Text,{color:w,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?"Yes":"No"})),(0,i.createElement)(p.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:t,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e?void 0:e.column.Header)&&"none"}}),l)})))}))}))]})}),(0,S.jsxs)(h.jl,{children:[(0,S.jsx)(n.Button,{variant:"brand",size:"sm",onClick:()=>{N(!0),b(!1)},children:"Change Access"}),(0,S.jsx)(n.Button,{size:"sm",onClick:()=>b(!1),variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]}),(0,S.jsx)(y,{tableData:l,accessRole:c,setAccessRole:A,setAccess:j,setRoleModal:b,columnsData:r,_id:T,fetchData:o,name:t,setEditModal:N,setAction:g,editModal:W}),(0,S.jsx)(z,{isOpen:O,setRoleModal:b,setOpenUser:R,onOpen:C,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"role",accessor:"role"}],tableData:G,setAction:g,_id:T,fetchData:q,userdata:G})]})};var P=l(4034),H=l(8510),k=l(7682),D=l(2145),W=l(899);const N=e=>{const{onClose:t,isOpen:l,setAction:o}=e,[r,d]=(0,i.useState)(!1),c=W.Ik({roleName:W.Yj().required("Role Name is required"),description:W.Yj().required("Description is required")}),u=(0,j.Wx)({initialValues:{roleName:"",description:""},validationSchema:c,onSubmit:(e,t)=>{let{resetForm:l}=t;C(),l()}}),{errors:x,touched:p,values:m,handleBlur:g,handleChange:f,handleSubmit:y,setFieldValue:T,resetForm:A}=u,C=async()=>{try{d(!0);let l=await(0,a.d_)("api/role-access/add",m);var e;if(l&&200===l.status)t(!1),o((e=>!e));else D.oR.error(null===(e=l.response.data)||void 0===e?void 0:e.message)}catch(l){console.log(l)}finally{d(!1)}};return(0,S.jsxs)(h.aF,{isOpen:l,isCentered:!0,children:[(0,S.jsx)(h.mH,{}),(0,S.jsxs)(h.$m,{children:[(0,S.jsxs)(h.rQ,{justifyContent:"space-between",display:"flex",children:["Add Role",(0,S.jsx)(n.IconButton,{onClick:()=>t(!1),icon:(0,S.jsx)(P.CloseIcon,{})})]}),(0,S.jsx)(h.cw,{children:(0,S.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,S.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Role Name",(0,S.jsx)(s.Text,{color:"red",children:"*"})]}),(0,S.jsx)(k.Input,{fontSize:"sm",onChange:f,onBlur:g,value:m.roleName,name:"roleName",placeholder:"Enter Role Name",fontWeight:"500",borderColor:x.roleName&&p.roleName?"red.300":null}),(0,S.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",x.roleName&&p.roleName&&x.roleName]})]}),(0,S.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Description",(0,S.jsx)(s.Text,{color:"red",children:"*"})]}),(0,S.jsx)(k.Input,{fontSize:"sm",onChange:f,onBlur:g,value:m.description,name:"description",placeholder:"Enter Description",fontWeight:"500",borderColor:x.description&&p.description?"red.300":null}),(0,S.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",x.description&&p.description&&x.description]})]})]})}),(0,S.jsxs)(h.jl,{children:[(0,S.jsx)(n.Button,{size:"sm",variant:"brand",mr:1,disabled:!!r,onClick:y,children:r?(0,S.jsx)(v.A,{}):"Save"}),(0,S.jsx)(n.Button,{size:"sm",variant:"outline",color:"red",colorScheme:"red",onClick:()=>{u.resetForm(),t(!1)},children:"Close"})]})]})]})},O=()=>{const{isOpen:e,onOpen:t,onClose:l}=(0,o.j1)(),[u,x]=(0,i.useState)(!1),[h,p]=(0,i.useState)([]),[v,m]=(0,i.useState)(""),[g,j]=(0,i.useState)(""),[f,y]=(0,i.useState)([]),[T,A]=(0,i.useState)(!1),[C,b]=(0,i.useState)([]),[z,P]=(0,i.useState)(""),[H,k]=(0,i.useState)([]),D=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"Role Name",accessor:"roleName",cell:e=>(0,S.jsx)(s.Text,{me:"10px",onClick:()=>{var t,l,o,s,n,i;x(!0),P(null===e||void 0===e?void 0:e.value),m(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(l=t.original)||void 0===l?void 0:l._id),p(null===e||void 0===e||null===(o=e.row)||void 0===o||null===(s=o.original)||void 0===s?void 0:s.access),b(null===e||void 0===e||null===(n=e.row)||void 0===n||null===(i=n.original)||void 0===i?void 0:i.access)},color:"brand.600",sx:{"&:hover":{color:"blue.500",textDecoration:"underline",cursor:"pointer"}},fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})},{Header:"Description",accessor:"description"}],[W,O]=(0,i.useState)(!1),[R,F]=(0,i.useState)(!1),[I,B]=(0,i.useState)([]),G=(0,c.Zp)(),M=async()=>{F(!0);let e=await(0,a.x4)("api/role-access");B(e.data),F(!1)};return(0,i.useEffect)((()=>{M()}),[W]),(0,S.jsxs)("div",{children:[(0,S.jsx)(r.A,{title:"Roles",isLoding:R,columnData:D,dataColumn:D,allData:I,tableData:I,AdvanceSearch:()=>"",tableCustomFields:[],searchedDataOut:H,searchDisplay:T,setSearchDisplay:A,setSearchedDataOut:k,searchboxOutside:g,setSearchboxOutside:j,BackButton:(0,S.jsx)(n.Button,{onClick:()=>G("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,S.jsx)(d.m6W,{}),ml:2,children:"Back"}),deleteMany:!0,access:!0,checkBox:!1,getTagValuesOutSide:f,setGetTagValuesOutside:y,ManageGrid:!1,onOpen:t}),(0,S.jsx)(N,{isOpen:e,size:"sm",setAction:O,onClose:l}),h&&(0,S.jsx)(w,{isOpen:u,setRoleModal:x,onOpen:t,isLoding:R,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"title",accessor:"title"},{Header:"create",accessor:"create",width:"20px"},{Header:"view",accessor:"view",width:"20px"},{Header:"update",accessor:"update",width:"20px"},{Header:"delete",accessor:"delete",width:"20px"}],name:z,_id:v,tableData:h,accessRole:C,setAccessRole:b,setAccess:p,fetchData:M,setAction:O})]})}}}]);
//# sourceMappingURL=83.61e62faa.chunk.js.map