"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[404],{3848:(e,l,t)=>{t.d(l,{A:()=>r});var i=t(1206),a=t(4450),n=t(3458),s=t(1997),o=t(7149),d=t(579);function r(e){const{count:l,text:t,onFileSelect:r}=e,c=(0,i.dU)("secondaryGray.900","white"),u=(0,i.dU)("brand.500","white");return(0,d.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,d.jsx)(a.GridItem,{colSpan:{base:12},children:(0,d.jsx)(s.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===t?"img":"",csv:"csv",height:"100%",onFileSelect:r,isMultipleAllow:!1,content:(0,d.jsxs)(a.Box,{children:[(0,d.jsx)(n.In,{as:o.vpy,w:"80px",h:"80px",color:u}),(0,d.jsx)(a.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,d.jsx)(a.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),l>0&&(0,d.jsxs)(a.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",l]})]})})}),(0,d.jsx)(a.GridItem,{colSpan:{base:12},children:(0,d.jsxs)(a.Flex,{direction:"column",children:[(0,d.jsxs)(a.Text,{color:c,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",t]}),(0,d.jsx)(a.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}},6:(e,l,t)=>{t.d(l,{A:()=>h});var i=t(9942),a=t(4450),n=t(8510),s=t(7682),o=t(3186),d=t(2554),r=t(9488),c=t(3516),u=t(5043),m=t(9849),v=t(6305),x=t(579);const h=e=>{const{onClose:l,isOpen:t,fetchData:h,setAction:p}=e,j=JSON.parse(localStorage.getItem("user")),[f,S]=(0,u.useState)(!1),b={sender:null===j||void 0===j?void 0:j._id,recipient:"true"!==e.lead?null===e||void 0===e?void 0:e.contactEmail:null===e||void 0===e?void 0:e.leadEmail,subject:"",message:"",createByContact:"",createByLead:"",startDate:"",endDate:"",createBy:null===j||void 0===j?void 0:j._id},g=(0,c.Wx)({initialValues:b,validationSchema:m.y4,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:t}=l;B(),t()}}),{errors:C,touched:y,values:D,handleBlur:z,handleChange:I,handleSubmit:A,setFieldValue:w}=g,B=async()=>{try{S(!0),200===(await(0,v.d_)("api/email/add",D)).status&&(e.onClose(),h(),p((e=>!e)))}catch(l){console.log(l)}finally{S(!1)}};return(0,u.useEffect)((()=>{e.id&&"true"!==e.lead?w("createByContact",e.id):e.id&&"true"===e.lead&&w("createByLead",e.id)}),[e.id,e.lead]),(0,x.jsxs)(i.aF,{onClose:l,isOpen:t,isCentered:!0,children:[(0,x.jsx)(i.mH,{}),(0,x.jsxs)(i.$m,{children:[(0,x.jsx)(i.rQ,{children:"Send Email "}),(0,x.jsx)(i.s_,{}),(0,x.jsx)(i.cw,{children:(0,x.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,x.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,x.jsxs)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,x.jsx)(a.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{fontSize:"sm",onChange:I,onBlur:z,value:D.recipient,name:"recipient",disabled:!0,placeholder:"Recipient",fontWeight:"500",borderColor:C.recipient&&y.recipient?"red.300":null}),(0,x.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",C.recipient&&y.recipient&&C.recipient]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,x.jsx)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Subject"}),(0,x.jsx)(s.Input,{fontSize:"sm",placeholder:"Enter subject",onChange:I,onBlur:z,value:D.subject,name:"subject",fontWeight:"500",borderColor:C.subject&&y.subject?"red.300":null}),(0,x.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",C.subject&&y.subject&&C.subject]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,x.jsxs)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,x.jsx)(a.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",onChange:I,onBlur:z,value:D.startDate,name:"startDate",fontWeight:"500",borderColor:null!==C&&void 0!==C&&C.startDate&&null!==y&&void 0!==y&&y.startDate?"red.300":null}),(0,x.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",C.startDate&&y.startDate&&C.startDate]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,x.jsx)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,x.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",min:D.startDate,onChange:I,onBlur:z,value:D.endDate,name:"endDate",fontWeight:"500",borderColor:null!==C&&void 0!==C&&C.endDate&&null!==y&&void 0!==y&&y.endDate?"red.300":null}),(0,x.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",C.endDate&&y.endDate&&C.endDate]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,x.jsx)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,x.jsx)(o.T,{fontSize:"sm",placeholder:"Here Type message",resize:"none",onChange:I,onBlur:z,value:D.message,name:"message",fontWeight:"500",borderColor:C.message&&y.message?"red.300":null}),(0,x.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",C.message&&y.message&&C.message]})]})]})}),(0,x.jsxs)(i.jl,{children:[(0,x.jsx)(d.Button,{size:"sm",variant:"brand",onClick:A,disabled:!!f,children:f?(0,x.jsx)(r.A,{}):"Save"}),(0,x.jsx)(d.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{g.resetForm(),l()},children:"Close"})]})]})]})}},4799:(e,l,t)=>{t.d(l,{A:()=>h});var i=t(9379),a=t(4034),n=t(9942),s=t(2554),o=t(9488),d=t(3516),r=t(5043),c=t(6305),u=t(2030),m=t(8908),v=t(899),x=t(579);const h=e=>{var l,t;const[h,p]=(0,r.useState)(!1),j=Object.fromEntries(((null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),f=(0,i.A)((0,i.A)({},j),{},{createBy:JSON.parse(localStorage.getItem("user"))._id}),S=(0,d.Wx)({initialValues:f,validationSchema:v.Ik().shape((0,u.g)(null===e||void 0===e||null===(t=e.leadData)||void 0===t?void 0:t.fields)),onSubmit:(e,l)=>{let{resetForm:t}=l;A()}}),{errors:b,touched:g,values:C,handleBlur:y,handleChange:D,handleSubmit:z,setFieldValue:I}=S,A=async()=>{try{var l;p(!0),200===(await(0,c.d_)("api/form/add",(0,i.A)((0,i.A)({},C),{},{moduleId:null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l._id}))).status&&(e.onClose(),S.resetForm(),e.setAction((e=>!e)))}catch(t){console.log(t)}finally{p(!1)}};return(0,x.jsx)("div",{children:(0,x.jsxs)(n._s,{isOpen:e.isOpen,size:e.size,children:[(0,x.jsx)(n.QP,{}),(0,x.jsxs)(n.zj,{children:[(0,x.jsxs)(n.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Add Lead",(0,x.jsx)(s.IconButton,{onClick:e.onClose,icon:(0,x.jsx)(a.CloseIcon,{})})]}),(0,x.jsx)(n.ys,{children:(0,x.jsx)(m.A,{moduleData:e.leadData,values:C,setFieldValue:I,handleChange:D,handleBlur:y,errors:b,touched:g})}),(0,x.jsxs)(n.tb,{children:[(0,x.jsx)(s.Button,{sx:{textTransform:"capitalize"},size:"sm",disabled:!!h,variant:"brand",type:"submit",onClick:z,children:h?(0,x.jsx)(o.A,{}):"Save"}),(0,x.jsx)(s.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:()=>{S.resetForm(),e.onClose()},children:"Close"})]})]})]})})}},8878:(e,l,t)=>{t.d(l,{A:()=>j});var i=t(9379),a=t(4034),n=t(9942),s=t(2554),o=t(4450),d=t(9488),r=t(3516),c=t(5043),u=t(3216),m=t(6305),v=t(2030),x=t(8908),h=t(899),p=t(579);const j=e=>{var l,t;const[j,f]=(0,c.useState)(!1),S=Object.fromEntries(((null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),[b,g]=(0,c.useState)((0,i.A)((0,i.A)({},S),{},{createBy:JSON.parse(localStorage.getItem("user"))._id})),C=(0,u.g)(),y=(0,r.Wx)({initialValues:b,enableReinitialize:!0,validationSchema:h.Ik().shape((0,v.g)(null===e||void 0===e||null===(t=e.leadData)||void 0===t?void 0:t.fields)),onSubmit:(e,l)=>{let{resetForm:t}=l;O()}}),{errors:D,touched:z,values:I,handleBlur:A,handleChange:w,handleSubmit:B,setFieldValue:F}=y,O=async()=>{try{f(!0),200===(await(0,m.yP)("api/form/edit/".concat((null===e||void 0===e?void 0:e.selectedId)||C.id),(0,i.A)((0,i.A)({},I),{},{moduleId:e.moduleId}))).status&&(e.onClose(),e.setAction((e=>!e)))}catch(l){console.log(l)}finally{f(!1)}},T=()=>{e.onClose(!1),e.setSelectedId&&(null===e||void 0===e||e.setSelectedId()),y.resetForm()};let N;return(0,c.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.selectedId||C.id)try{var l,t;f(!0),N=await(0,m.x4)("api/lead/view/",null!==e&&void 0!==e&&e.selectedId?null===e||void 0===e?void 0:e.selectedId:C.id);let a=null===(l=N)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.lead;g((e=>(0,i.A)((0,i.A)({},e),a)))}catch(a){console.error(a)}finally{f(!1)}})()}),[null===e||void 0===e?void 0:e.selectedId]),(0,p.jsx)("div",{children:(0,p.jsxs)(n._s,{isOpen:e.isOpen,size:e.size,children:[(0,p.jsx)(n.QP,{}),(0,p.jsxs)(n.zj,{children:[(0,p.jsxs)(n.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Edit Lead",(0,p.jsx)(s.IconButton,{onClick:T,icon:(0,p.jsx)(a.CloseIcon,{})})]}),(0,p.jsx)(n.ys,{children:j?(0,p.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,p.jsx)(d.A,{})}):(0,p.jsx)(x.A,{moduleData:e.leadData,values:I,setFieldValue:F,handleChange:w,handleBlur:A,errors:D,touched:z})}),(0,p.jsxs)(n.tb,{children:[(0,p.jsx)(s.Button,{sx:{textTransform:"capitalize"},variant:"brand",size:"sm",type:"submit",disabled:!!j,onClick:B,children:j?(0,p.jsx)(d.A,{}):"Update"}),(0,p.jsx)(s.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:T,children:"Close"})]})]})]})})}},5259:(e,l,t)=>{t.d(l,{A:()=>m});var i=t(9942),a=t(4450),n=t(2554),s=t(9488),o=t(3516),d=t(5043),r=t(3216),c=t(3848),u=t(579);const m=e=>{const{onClose:l,isOpen:t,text:m,customFields:v}=e,[x,h]=(0,d.useState)(!1),p=(0,r.Zp)(),j=(0,o.Wx)({initialValues:{lead:""},onSubmit:(e,l)=>{let{resetForm:t}=l;I(),t()}}),{errors:f,touched:S,values:b,handleBlur:g,handleChange:C,handleSubmit:y,setFieldValue:D,resetForm:z}=j,I=async()=>{try{h(!0),z(),b.lead&&(l(),p("/leadImport",{state:{fileData:b.lead,customFields:v}}))}catch(e){console.log(e)}finally{h(!1)}};return(0,u.jsxs)(i.aF,{onClose:l,isOpen:t,isCentered:!0,children:[(0,u.jsx)(i.mH,{}),(0,u.jsxs)(i.$m,{children:[(0,u.jsx)(i.rQ,{children:"Import Leads"}),(0,u.jsx)(i.s_,{}),(0,u.jsx)(i.cw,{children:(0,u.jsx)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,u.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,u.jsx)(c.A,{count:b.lead.length,onFileSelect:e=>D("lead",e),text:m}),(0,u.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",f.lead&&S.lead&&(0,u.jsxs)(u.Fragment,{children:["Please Select ",m]})]})]})})}),(0,u.jsxs)(i.jl,{children:[(0,u.jsx)(n.Button,{variant:"brand",size:"sm",onClick:y,disabled:!!x,children:x?(0,u.jsx)(s.A,{}):"Save"}),(0,u.jsx)(n.Button,{variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},size:"sm",onClick:()=>{l(),j.resetForm()},children:"Close"})]})]})]})}},404:(e,l,t)=>{t.r(l),t.d(l,{default:()=>y});var i=t(5043),a=t(3216),n=t(5574),s=t(9754),o=t(4450),d=t(5376),r=t(4626),c=t(4034),u=t(7368),m=t(6305),v=t(55),x=t(4799),h=t(8878),p=t(6),j=t(9250),f=t(5259),S=t(8177),b=t(577),g=t(7508),C=t(579);const y=()=>{var e,l,t,y;const D=JSON.parse(localStorage.getItem("user")),z=(0,a.Zp)(),I=(0,a.zy)(),A=(0,g.wA)(),[w,B,F]=(0,n.h)(["Leads","Emails","Calls"]),[O,T]=(0,i.useState)(!1),[N,W]=(0,i.useState)(!1),[L,_]=(0,i.useState)([]),[E,k]=(0,i.useState)([]),[G,V]=(0,i.useState)([]),[P,H]=(0,i.useState)([]),[J,R]=(0,i.useState)([]),[U,M]=(0,i.useState)(!1),{isOpen:Q,onOpen:$,onClose:Z}=(0,s.j1)(),[q,K]=(0,i.useState)([]),[X,Y]=(0,i.useState)(!1),[ee,le]=(0,i.useState)(!1),[te,ie]=(0,i.useState)(!1),[ae,ne]=(0,i.useState)(),[se,oe]=(0,i.useState)(!1),[de,re]=(0,i.useState)(),[ce,ue]=(0,i.useState)([]),[me,ve]=(0,i.useState)(!1),[xe,he]=(0,i.useState)(""),pe=(0,g.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.advanceSearchData)||void 0===l?void 0:l.searchResult})),je={leadStatus:null===I||void 0===I?void 0:I.state},fe=async()=>{T(!0);let e=await(0,m.x4)("superAdmin"===D.role?"api/lead/":"api/lead/?createBy=".concat(D._id));_(null===e||void 0===e?void 0:e.data),T(!1)},Se=e=>{switch(e.original.leadStatus){case"pending":return"pending";case"active":default:return"completed";case"sold":return"onHold"}},be=async()=>{var e,l,t,i;T(!0);const a=await(0,m.x4)("api/custom-field/?moduleName=Leads");K(null===a||void 0===a?void 0:a.data);const n={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:l,i:t}=e;return(0,C.jsx)(o.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,C.jsxs)(d.W1,{isLazy:!0,children:[(0,C.jsx)(d.IU,{children:(0,C.jsx)(u.txp,{})}),(0,C.jsxs)(d.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===w||void 0===w?void 0:w.update)&&(0,C.jsx)(d.Dr,{py:2.5,icon:(0,C.jsx)(c.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;Y(!0),re(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===F||void 0===F?void 0:F.create)&&(0,C.jsx)(d.Dr,{py:2.5,width:"165px",onClick:()=>{var e;ie(!0),ne(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id)},icon:(0,C.jsx)(c.PhoneIcon,{fontSize:15,mb:1}),children:"Create Call"}),(null===B||void 0===B?void 0:B.create)&&(0,C.jsx)(d.Dr,{py:2.5,width:"165px",onClick:()=>{var e,t,i,a;i=null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id,a=null===l||void 0===l?void 0:l.original,i&&(he(null===a||void 0===a?void 0:a.leadEmail),oe(!0)),re(null===l||void 0===l||null===(t=l.values)||void 0===t?void 0:t._id)},icon:(0,C.jsx)(c.EmailIcon,{fontSize:15,mb:1}),children:"EmailSend "}),(null===w||void 0===w?void 0:w.view)&&(0,C.jsx)(d.Dr,{py:2.5,color:"green",icon:(0,C.jsx)(c.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;z("/leadView/".concat(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id))},children:"View"}),(null===w||void 0===w?void 0:w.delete)&&(0,C.jsx)(d.Dr,{py:2.5,color:"red",icon:(0,C.jsx)(c.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e;le(!0),ue([null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id])},children:"Delete"})]})]})})}},s=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Status",accessor:"leadStatus",isSortable:!0,center:!0,cell:e=>{let{row:l}=e;return(0,C.jsx)("div",{className:"selectOpt",children:(0,C.jsxs)(r.l6,{defaultValue:"active",className:Se(l),onChange:e=>(async(e,l)=>{try{T(!0),200===(await(0,m.yP)("api/lead/changeStatus/".concat(e.original._id),{leadStatus:l.target.value})).status&&M((e=>!e))}catch(l){console.log(l)}finally{T(!1)}})(l,e),height:7,width:130,value:l.original.leadStatus,style:{fontSize:"14px"},children:[(0,C.jsx)("option",{value:"active",children:"Active"}),(0,C.jsx)("option",{value:"sold",children:"Sold"}),(0,C.jsx)("option",{value:"pending",children:"Pending"})]})})}},...(null===a||void 0===a||null===(e=a.data)||void 0===e||null===(l=e[0])||void 0===l||null===(t=l.fields)||void 0===t||null===(i=t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||void 0===i?void 0:i.map((e=>"leadStatus"!==(null===e||void 0===e?void 0:e.name)&&{Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name})))||[],...null!==w&&void 0!==w&&w.update||null!==w&&void 0!==w&&w.view||null!==w&&void 0!==w&&w.delete?[n]:[]];R(JSON.parse(JSON.stringify(s))),V(s),k(JSON.parse(JSON.stringify(s))),T(!1)};return(0,i.useEffect)((()=>{fe(),be()}),[U]),(0,i.useEffect)((()=>{H(null===E||void 0===E?void 0:E.filter((e=>null===J||void 0===J?void 0:J.find((l=>(null===l||void 0===l?void 0:l.Header)===e.Header)))))}),[E,J]),(0,i.useEffect)((()=>{if(null!==I&&void 0!==I&&I.state){W(!0),A((0,b.DW)({values:je,allData:L,type:"Leads"}));const e=[{name:["leadStatus"],value:null===I||void 0===I?void 0:I.state}];A((0,b.Tr)(e.filter((e=>e.value))))}}),[L,null===I||void 0===I?void 0:I.state]),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:4,children:!O&&(0,C.jsx)(o.GridItem,{colSpan:6,children:(0,C.jsx)(v.A,{title:"Leads",isLoding:O,searchDisplay:N,setSearchDisplay:W,columnData:G,dataColumn:P,allData:L,tableData:N?pe:L,tableCustomFields:(null===q||void 0===q||null===(e=q[0])||void 0===e||null===(l=e.fields)||void 0===l?void 0:l.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],access:w,action:U,setAction:M,selectedColumns:J,setSelectedColumns:R,isOpen:Q,onClose:onclose,onOpen:$,selectedValues:ce,setSelectedValues:ue,setDelete:le,setIsImport:ve})})}),Q&&(0,C.jsx)(x.A,{isOpen:Q,size:"lg",leadData:q[0],onClose:Z,setAction:M,action:U}),X&&(0,C.jsx)(h.A,{isOpen:X,size:"lg",leadData:q[0],selectedId:de,setSelectedId:re,onClose:Y,setAction:M,moduleId:null===q||void 0===q||null===(t=q[0])||void 0===t?void 0:t._id}),ee&&(0,C.jsx)(S.A,{isOpen:ee,onClose:()=>le(!1),type:"Leads",handleDeleteData:async e=>{try{T(!0),200===(await(0,m.Vn)("api/lead/deleteMany",e)).status&&(ue([]),le(!1),M((e=>!e)))}catch(l){console.log(l)}finally{T(!1)}},ids:ce}),se&&(0,C.jsx)(p.A,{fetchData:fe,isOpen:se,onClose:oe,lead:"true",id:de,leadEmail:xe}),te&&(0,C.jsx)(j.A,{fetchData:fe,isOpen:te,onClose:ie,lead:"true",id:ae}),me&&(0,C.jsx)(f.A,{text:"Lead file",isOpen:me,onClose:ve,customFields:(null===q||void 0===q||null===(y=q[0])||void 0===y?void 0:y.fields)||[]})]})}},9250:(e,l,t)=>{t.d(l,{A:()=>h});var i=t(9942),a=t(4450),n=t(8510),s=t(7682),o=t(3186),d=t(2554),r=t(9488),c=t(3516),u=t(5043),m=t(9849),v=t(6305),x=t(579);const h=e=>{const{onClose:l,isOpen:t,fetchData:h,setAction:p}=e,[j,f]=(0,u.useState)(!1),S=JSON.parse(localStorage.getItem("user")),b={sender:null===S||void 0===S?void 0:S._id,recipient:"",callDuration:"",callNotes:"",createByContact:"",createByLead:"",startDate:"",endDate:"",createBy:null===S||void 0===S?void 0:S._id},g=(0,c.Wx)({initialValues:b,validationSchema:m.Ar,onSubmit:(e,l)=>{let{resetForm:t}=l;B(),t()}}),{errors:C,touched:y,values:D,handleBlur:z,handleChange:I,handleSubmit:A,setFieldValue:w}=g,B=async()=>{try{f(!0),200===(await(0,v.d_)("api/phoneCall/add",D)).status&&(e.onClose(),h(),p((e=>!e)))}catch(l){console.log(l)}finally{f(!1)}};return(0,u.useEffect)((()=>{(async()=>{var l,t,i,a,n,s;if(null!==e&&void 0!==e&&null!==(l=e.viewData)&&void 0!==l&&null!==(t=l.lead)&&void 0!==t&&t.leadPhoneNumber){if(e.id&&"true"!==e.lead)w("recipient",null===e||void 0===e||null===(i=e.viewData)||void 0===i||null===(a=i.contact)||void 0===a?void 0:a.phoneNumber),w("createByContact",null===e||void 0===e?void 0:e.id),D.recipient=null===e||void 0===e||null===(n=e.viewData)||void 0===n||null===(s=n.contact)||void 0===s?void 0:s.phoneNumber;else if(e.id&&"true"===e.lead){let l=await(0,v.x4)("api/lead/view/",e.id);var o,d,r,c;200===(null===l||void 0===l?void 0:l.status)&&(w("recipient",null===l||void 0===l||null===(o=l.data)||void 0===o||null===(d=o.lead)||void 0===d?void 0:d.leadPhoneNumber),w("createByLead",e.id),D.recipient=null===l||void 0===l||null===(r=l.data)||void 0===r||null===(c=r.lead)||void 0===c?void 0:c.leadPhoneNumber)}}else if(e.id&&"true"!==e.lead){let l=await(0,v.x4)("api/contact/view/",e.id);var u,m,x,h;200===(null===l||void 0===l?void 0:l.status)&&(w("recipient",null===l||void 0===l||null===(u=l.data)||void 0===u||null===(m=u.contact)||void 0===m?void 0:m.phoneNumber),w("createByContact",null===e||void 0===e?void 0:e.id),D.recipient=null===l||void 0===l||null===(x=l.data)||void 0===x||null===(h=x.contact)||void 0===h?void 0:h.phoneNumber)}else if(e.id&&"true"===e.lead){let l=await(0,v.x4)("api/lead/view/",e.id);var p,j,f,S;200===(null===l||void 0===l?void 0:l.status)&&(w("recipient",null===l||void 0===l||null===(p=l.data)||void 0===p||null===(j=p.lead)||void 0===j?void 0:j.leadPhoneNumber),w("createByLead",e.id),D.recipient=null===l||void 0===l||null===(f=l.data)||void 0===f||null===(S=f.lead)||void 0===S?void 0:S.leadPhoneNumber)}})()}),[e.id]),(0,x.jsxs)(i.aF,{onClose:l,isOpen:t,isCentered:!0,children:[(0,x.jsx)(i.mH,{}),(0,x.jsxs)(i.$m,{children:[(0,x.jsx)(i.rQ,{children:"Add Call "}),(0,x.jsx)(i.s_,{}),(0,x.jsx)(i.cw,{children:(0,x.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,x.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,x.jsxs)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,x.jsx)(a.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{fontSize:"sm",type:"number",disabled:!0,onChange:I,onBlur:z,value:D.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:C.recipient&&y.recipient?"red.300":null}),(0,x.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",C.recipient&&y.recipient&&C.recipient]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,x.jsxs)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,x.jsx)(a.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",onChange:I,onBlur:z,value:D.startDate,name:"startDate",fontWeight:"500",borderColor:null!==C&&void 0!==C&&C.startDate&&null!==y&&void 0!==y&&y.startDate?"red.300":null}),(0,x.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",C.startDate&&y.startDate&&C.startDate]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,x.jsx)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,x.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",min:D.startDate,onChange:I,onBlur:z,value:D.endDate,name:"endDate",fontWeight:"500",borderColor:null!==C&&void 0!==C&&C.endDate&&null!==y&&void 0!==y&&y.endDate?"red.300":null}),(0,x.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",C.endDate&&y.endDate&&C.endDate]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,x.jsxs)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,x.jsx)(a.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{fontSize:"sm",onChange:I,onBlur:z,value:D.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:C.callDuration&&y.callDuration?"red.300":null}),(0,x.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",C.callDuration&&y.callDuration&&C.callDuration]})]}),(0,x.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,x.jsx)(n.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,x.jsx)(o.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:I,onBlur:z,value:D.callNotes,name:"callNotes",fontWeight:"500",borderColor:C.callNotes&&y.callNotes?"red.300":null}),(0,x.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",C.callNotes&&y.callNotes&&C.callNotes]})]})]})}),(0,x.jsxs)(i.jl,{children:[(0,x.jsx)(d.Button,{size:"sm",variant:"brand",disabled:!!j,onClick:A,children:j?(0,x.jsx)(r.A,{}):"Save"}),(0,x.jsx)(d.Button,{size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{g.resetForm(),l()},children:"Close"})]})]})]})}},3186:(e,l,t)=>{t.d(l,{T:()=>r});var i=t(8510),a=t(9522),n=t(835),s=t(5043);function o(){return o=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var t=arguments[l];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},o.apply(this,arguments)}var d=["className","rows"],r=(0,a.Rf)((function(e,l){var t=(0,a.Vl)("Textarea",e),r=(0,a.MN)(e),c=r.className,u=r.rows,m=function(e,l){if(null==e)return{};var t,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)t=n[i],l.indexOf(t)>=0||(a[t]=e[t]);return a}(r,d),v=(0,i.useFormControl)(m),x=u?(0,n.cJ)(t,["h","minH","height","minHeight"]):t;return s.createElement(a.Bv.textarea,o({ref:l,rows:u},v,{className:(0,n.cx)("chakra-textarea",c),__css:x}))}));n.gt&&(r.displayName="Textarea")}}]);
//# sourceMappingURL=404.50ef0c7c.chunk.js.map