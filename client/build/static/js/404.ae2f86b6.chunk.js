"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[404],{404:(e,l,i)=>{i.r(l),i.d(l,{default:()=>A});var o=i(5043),d=i(3216),t=i(5574),a=i(9754),n=i(4450),s=i(5376),r=i(4626),v=i(4034),u=i(7368),c=i(9621),x=i(8031),p=i(4799),h=i(8878),m=i(6),S=i(9250),f=i(5259),j=i(8177),y=i(3017),g=i(7508),b=i(7801),w=i(7892),C=i(2145),D=(i(5563),i(579));const A=()=>{var e,l,i,A;const F=JSON.parse(localStorage.getItem("user")),z=(0,d.Zp)(),I=(0,d.zy)(),O=(0,g.wA)(),[T,_,k]=(0,t.h)(["Leads","Emails","Calls"]),[V,E]=(0,o.useState)(!1),[L,H]=(0,o.useState)(!1),[G,W]=(0,o.useState)([]),[B,P]=(0,o.useState)([]),[U,$]=(0,o.useState)([]),[N,M]=(0,o.useState)([]),[R,Z]=(0,o.useState)(!1),{isOpen:J,onOpen:Q,onClose:q}=(0,a.j1)(),[K,X]=(0,o.useState)([]),[Y,ee]=(0,o.useState)(!1),[le,ie]=(0,o.useState)(!1),[oe,de]=(0,o.useState)(!1),[te,ae]=(0,o.useState)(),[ne,se]=(0,o.useState)(!1),[re,ve]=(0,o.useState)(),[ue,ce]=(0,o.useState)([]),[xe,pe]=(0,o.useState)(!1),[he,me]=(0,o.useState)(""),[Se,fe]=(0,o.useState)({}),je=(0,g.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l.data})),ye=(0,g.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.advanceSearchData)||void 0===l?void 0:l.searchResult})),ge={leadStatus:null===I||void 0===I?void 0:I.state},be=async()=>{E(!0);await(0,c.x4)("superAdmin"===(null===F||void 0===F?void 0:F.role)?"api/lead/":`api/lead/?createBy=${null===F||void 0===F?void 0:F._id}`);E(!1)},we=e=>{var l;switch(null===e||void 0===e||null===(l=e.original)||void 0===l?void 0:l.leadStatus){case"pending":return"pending";case"active":default:return"completed";case"sold":return"onHold"}},Ce=async()=>{E(!0);try{var e,l,i,o,d,t,a,x,p,h,m,S,f,j,y;const b=await O((0,w.y)());var g;if(200===(null===b||void 0===b||null===(e=b.payload)||void 0===e?void 0:e.status))X(null===b||void 0===b||null===(g=b.payload)||void 0===g?void 0:g.data);else C.oR.error("Failed to fetch data","error");const A={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:l,i:i}=e;return(0,D.jsx)(n.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,D.jsxs)(s.W1,{isLazy:!0,children:[(0,D.jsx)(s.IU,{children:(0,D.jsx)(u.txp,{})}),(0,D.jsxs)(s.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===T||void 0===T?void 0:T.update)&&(0,D.jsx)(s.Dr,{py:2.5,icon:(0,D.jsx)(v.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;ee(!0),ve(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===k||void 0===k?void 0:k.create)&&(0,D.jsx)(s.Dr,{py:2.5,width:"165px",onClick:()=>{var e;fe(null===l||void 0===l?void 0:l.original),de(!0),ae(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id)},icon:(0,D.jsx)(v.PhoneIcon,{fontSize:15,mb:1}),children:"Create Call"}),(null===_||void 0===_?void 0:_.create)&&(0,D.jsxs)(s.Dr,{py:2.5,width:"165px",onClick:()=>{var e,i,o,d;o=null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id,d=null===l||void 0===l?void 0:l.original,o&&(me(null===d||void 0===d?void 0:d.leadEmail),se(!0)),ve(null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i._id)},icon:(0,D.jsx)(v.EmailIcon,{fontSize:15,mb:1}),children:["Email Send"," "]}),(null===T||void 0===T?void 0:T.view)&&(0,D.jsx)(s.Dr,{py:2.5,color:"green",icon:(0,D.jsx)(v.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;z(`/leadView/${null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id}`,{state:{leadList:je}})},children:"View"}),(null===T||void 0===T?void 0:T.delete)&&(0,D.jsx)(s.Dr,{py:2.5,color:"red",icon:(0,D.jsx)(v.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e;ie(!0),ce([null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id])},children:"Delete"})]})]})})}},F=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Status",accessor:"leadStatus",isSortable:!0,center:!0,cell:e=>{var l;let{row:i}=e;return(0,D.jsx)("div",{className:"selectOpt",children:(0,D.jsxs)(r.l6,{defaultValue:"active",className:we(i),onChange:e=>(async(e,l)=>{try{var i,o;E(!0);let d=await(0,c.yP)(`api/lead/changeStatus/${null===e||void 0===e||null===(i=e.original)||void 0===i?void 0:i._id}`,{leadStatus:null===l||void 0===l||null===(o=l.target)||void 0===o?void 0:o.value});200===(null===d||void 0===d?void 0:d.status)&&Z((e=>!e))}catch(l){console.log(l)}finally{E(!1)}})(i,e),height:7,width:130,value:null===i||void 0===i||null===(l=i.original)||void 0===l?void 0:l.leadStatus,style:{fontSize:"14px"},children:[(0,D.jsx)("option",{value:"active",children:"Active"}),(0,D.jsx)("option",{value:"sold",children:"Sold"}),(0,D.jsx)("option",{value:"pending",children:"Pending"})]})})}},...null!==b&&void 0!==b&&null!==(l=b.payload)&&void 0!==l&&l.data&&(null===b||void 0===b||null===(i=b.payload)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.length)>0&&(null===b||void 0===b||null===(d=b.payload)||void 0===d||null===(t=d.data[0])||void 0===t||null===(a=t.fields)||void 0===a||null===(x=a.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&(null===e||void 0===e?void 0:e.isView))))||void 0===x?void 0:x.map((e=>"leadStatus"!==(null===e||void 0===e?void 0:e.name)&&{Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name,cell:e=>(0,D.jsx)("div",{className:"selectOpt",children:(0,D.jsx)(n.Text,{onClick:()=>{var l,i;z(`/leadView/${null===e||void 0===e||null===(l=e.row)||void 0===l||null===(i=l.original)||void 0===i?void 0:i._id}`)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||"-"})})})))||[],...null!==b&&void 0!==b&&null!==(p=b.payload)&&void 0!==p&&p.data&&(null===b||void 0===b||null===(h=b.payload)||void 0===h||null===(m=h.data)||void 0===m?void 0:m.length)>0&&(null===b||void 0===b||null===(S=b.payload)||void 0===S||null===(f=S.data[0])||void 0===f||null===(j=f.fields)||void 0===j||null===(y=j.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&!(null!==e&&void 0!==e&&e.isView)&&"leadStatus"!==(null===e||void 0===e?void 0:e.name))))||void 0===y?void 0:y.map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name}))))||[],...null!==T&&void 0!==T&&T.update||null!==T&&void 0!==T&&T.view||null!==T&&void 0!==T&&T.delete?[A]:[]];P(F||[]),E(!1)}catch(A){var b;null===(b=console)||void 0===b||b.error("Error fetching custom data fields:",A),C.oR.error("Failed to fetch data ","error")}};return(0,o.useEffect)((()=>{var e,l;"/lead"===(null===(e=window)||void 0===e||null===(l=e.location)||void 0===l?void 0:l.pathname)&&O((0,b.T)()),Ce()}),[R]),(0,o.useEffect)((()=>{$(null===G||void 0===G?void 0:G.filter((e=>null===N||void 0===N?void 0:N.find((l=>(null===l||void 0===l?void 0:l.Header)===(null===e||void 0===e?void 0:e.Header))))))}),[G,N]),(0,o.useEffect)((()=>{if(null!==I&&void 0!==I&&I.state){H(!0),O((0,y.DW)({values:ge,allData:je,type:"Leads"}));const e=[{name:["leadStatus"],value:null===I||void 0===I?void 0:I.state}];O((0,y.Tr)(null===e||void 0===e?void 0:e.filter((e=>null===e||void 0===e?void 0:e.value))))}}),[je,null===I||void 0===I?void 0:I.state]),(0,D.jsxs)("div",{children:[(0,D.jsx)(n.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:4,children:!V&&(0,D.jsx)(n.GridItem,{colSpan:6,children:(0,D.jsx)(x.A,{title:"Leads",isLoding:V,searchDisplay:L,setSearchDisplay:H,columnData:null!==B&&void 0!==B?B:[],allData:null!==je&&void 0!==je?je:[],tableData:L?ye:je,tableCustomFields:(null===K||void 0===K||null===(e=K[0])||void 0===e||null===(l=e.fields)||void 0===l?void 0:l.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],access:T,action:R,setAction:Z,isOpen:J,onClose:onclose,onOpen:Q,selectedValues:ue,setSelectedValues:ce,setDelete:ie,setIsImport:pe})})}),J&&(0,D.jsx)(p.A,{isOpen:J,size:"lg",leadData:K[0],onClose:q,setAction:Z,action:R}),Y&&(0,D.jsx)(h.A,{isOpen:Y,size:"lg",leadData:K[0],selectedId:re,setSelectedId:ve,onClose:ee,setAction:Z,moduleId:null===K||void 0===K||null===(i=K[0])||void 0===i?void 0:i._id}),le&&(0,D.jsx)(j.A,{isOpen:le,onClose:()=>ie(!1),type:"Leads",handleDeleteData:async e=>{try{E(!0);let l=await(0,c.Vn)("api/lead/deleteMany",e);200===(null===l||void 0===l?void 0:l.status)&&(ce([]),ie(!1),Z((e=>!e)))}catch(l){console.log(l)}finally{E(!1)}},ids:ue}),ne&&(0,D.jsx)(m.A,{fetchData:be,isOpen:ne,onClose:se,lead:!0,id:re,leadEmail:he}),oe&&(0,D.jsx)(S.A,{fetchData:be,isOpen:oe,onClose:de,lead:!0,id:te,LData:Se}),xe&&(0,D.jsx)(f.A,{text:"Lead file",isOpen:xe,onClose:pe,customFields:(null===K||void 0===K||null===(A=K[0])||void 0===A?void 0:A.fields)||[]})]})}},3848:(e,l,i)=>{i.d(l,{A:()=>r});var o=i(1206),d=i(4450),t=i(3458),a=i(1997),n=i(7149),s=i(579);function r(e){const{count:l,text:i,onFileSelect:r}=e,v=(0,o.dU)("secondaryGray.900","white"),u=(0,o.dU)("brand.500","white");return(0,s.jsxs)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,s.jsx)(d.GridItem,{colSpan:{base:12},children:(0,s.jsx)(a.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===i?"img":"",csv:"csv",height:"100%",onFileSelect:r,isMultipleAllow:!1,content:(0,s.jsxs)(d.Box,{children:[(0,s.jsx)(t.In,{as:n.vpy,w:"80px",h:"80px",color:u}),(0,s.jsx)(d.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,s.jsx)(d.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),l>0&&(0,s.jsxs)(d.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",l]})]})})}),(0,s.jsx)(d.GridItem,{colSpan:{base:12},children:(0,s.jsxs)(d.Flex,{direction:"column",children:[(0,s.jsxs)(d.Text,{color:v,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",i]}),(0,s.jsx)(d.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}},5259:(e,l,i)=>{i.d(l,{A:()=>c});var o=i(9942),d=i(4450),t=i(2554),a=i(9488),n=i(3516),s=i(5043),r=i(3216),v=i(3848),u=i(579);const c=e=>{var l;const{onClose:i,isOpen:c,text:x,customFields:p}=e,[h,m]=(0,s.useState)(!1),S=(0,r.Zp)(),f=(0,n.Wx)({initialValues:{lead:""},onSubmit:(e,l)=>{let{resetForm:i}=l;F(),i()}}),{errors:j,touched:y,values:g,handleBlur:b,handleChange:w,handleSubmit:C,setFieldValue:D,resetForm:A}=f,F=async()=>{try{m(!0),A(),null!==g&&void 0!==g&&g.lead&&(i(),S("/leadImport",{state:{fileData:null===g||void 0===g?void 0:g.lead,customFields:p}}))}catch(e){console.log(e)}finally{m(!1)}};return(0,u.jsxs)(o.aF,{onClose:i,isOpen:c,isCentered:!0,children:[(0,u.jsx)(o.mH,{}),(0,u.jsxs)(o.$m,{children:[(0,u.jsx)(o.rQ,{children:"Import Leads"}),(0,u.jsx)(o.s_,{}),(0,u.jsx)(o.cw,{children:(0,u.jsx)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,u.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,u.jsx)(v.A,{count:null===g||void 0===g||null===(l=g.lead)||void 0===l?void 0:l.length,onFileSelect:e=>D("lead",e),text:x}),(0,u.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===j||void 0===j?void 0:j.lead)&&(null===y||void 0===y?void 0:y.lead)&&(0,u.jsxs)(u.Fragment,{children:["Please Select ",x]})]})]})})}),(0,u.jsxs)(o.jl,{children:[(0,u.jsx)(t.Button,{variant:"brand",size:"sm",onClick:C,disabled:!!h,children:h?(0,u.jsx)(a.A,{}):"Save"}),(0,u.jsx)(t.Button,{variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},size:"sm",onClick:()=>{i(),f.resetForm()},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=404.ae2f86b6.chunk.js.map