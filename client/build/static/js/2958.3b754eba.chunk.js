"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[2958],{2958:(e,l,i)=>{i.r(l),i.d(l,{default:()=>T});var t=i(4450),d=i(2554),n=i(216),o=i(3994),a=i(9488),s=i(6178),r=i.n(s),c=i(5043),v=i(4960),m=i(3216),u=i(5475),h=i(5574),x=i(9621),j=i(4034),p=i(8177),b=i(5369),f=i(74),g=i.n(f),S=i(579);const T=()=>{var e,l,i,s;const f=(0,m.g)(),[T,y]=(0,c.useState)(),[I,k]=(0,c.useState)(!1),D=JSON.parse(localStorage.getItem("user")),[A,w]=(0,c.useState)(!1),[C,G]=(0,c.useState)(!1),N=(0,m.Zp)(),z=(0,m.g)();(0,c.useEffect)((()=>{(async()=>{w(!0);let e=await(0,x.x4)("api/meeting/view/",null===f||void 0===f?void 0:f.id);y(null===e||void 0===e?void 0:e.data),w(!1)})()}),[]);const[Y,B,M]=(0,h.h)(["Meetings","Contacts","Leads"]);return(0,S.jsxs)(S.Fragment,{children:[A?(0,S.jsx)(t.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,S.jsx)(a.A,{})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(t.Grid,{templateColumns:"repeat(4, 1fr)",gap:3,id:"reports",children:[(0,S.jsx)(t.GridItem,{colSpan:{base:4},children:(0,S.jsx)(t.Heading,{size:"lg",m:3,children:(null===T||void 0===T?void 0:T.agenda)||""})}),(0,S.jsx)(t.GridItem,{colSpan:{base:4},children:(0,S.jsx)(n.A,{children:(0,S.jsxs)(t.Grid,{gap:4,children:[(0,S.jsx)(t.GridItem,{colSpan:2,children:(0,S.jsxs)(t.Box,{children:[(0,S.jsxs)(t.Flex,{justifyContent:"space-between",children:[(0,S.jsx)(t.Heading,{size:"md",mb:3,children:"Meeting Details"}),(0,S.jsxs)(t.Box,{id:"hide-btn",children:[(0,S.jsx)(d.Button,{leftIcon:(0,S.jsx)(b.kl1,{}),size:"sm",variant:"brand",onClick:()=>{G(!0);const e=document.getElementById("reports"),l=document.getElementById("hide-btn");e?(l.style.display="none",g()().from(e).set({margin:[0,0,0,0],filename:`Meeting_Details_${r()().format("DD-MM-YYYY")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).save().then((()=>{G(!1),l.style.display=""}))):(console.error("Element with ID 'reports' not found."),G(!1))},disabled:C,children:C?"Please Wait...":"Print as PDF"}),(0,S.jsx)(d.Button,{leftIcon:(0,S.jsx)(v.m6W,{}),size:"sm",variant:"brand",onClick:()=>N(-1),style:{marginLeft:10},children:"Back"})]})]}),(0,S.jsx)(o.E,{})]})}),(0,S.jsxs)(t.GridItem,{colSpan:{base:2,md:1},children:[(0,S.jsxs)(t.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Agenda"," "]}),(0,S.jsx)(t.Text,{children:null!==T&&void 0!==T&&T.agenda?null===T||void 0===T?void 0:T.agenda:" - "})]}),(0,S.jsxs)(t.GridItem,{colSpan:{base:2,md:1},children:[(0,S.jsxs)(t.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Created By"," "]}),(0,S.jsx)(t.Text,{children:null!==T&&void 0!==T&&T.createdByName?null===T||void 0===T?void 0:T.createdByName:" - "})]}),(0,S.jsxs)(t.GridItem,{colSpan:{base:2,md:1},children:[(0,S.jsxs)(t.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","DateTime"," "]}),(0,S.jsxs)(t.Text,{children:[" ",null!==T&&void 0!==T&&T.dateTime?r()(null===T||void 0===T?void 0:T.dateTime).format("DD-MM-YYYY  h:mma "):" - "," ","[",null!==T&&void 0!==T&&T.dateTime?r()(null===T||void 0===T?void 0:T.dateTime).toNow():" - ","]"]})]}),(0,S.jsxs)(t.GridItem,{colSpan:{base:2,md:1},children:[(0,S.jsxs)(t.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Timestamp"," "]}),(0,S.jsxs)(t.Text,{children:[" ",null!==T&&void 0!==T&&T.timestamp?r()(null===T||void 0===T?void 0:T.timestamp).format("DD-MM-YYYY  h:mma "):" - "," ","[",null!==T&&void 0!==T&&T.timestamp?r()(null===T||void 0===T?void 0:T.timestamp).toNow():" - ","]"]})]}),(0,S.jsxs)(t.GridItem,{colSpan:{base:2,md:1},children:[(0,S.jsxs)(t.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Location"," "]}),(0,S.jsx)(t.Text,{children:null!==T&&void 0!==T&&T.location?null===T||void 0===T?void 0:T.location:" - "})]}),(0,S.jsxs)(t.GridItem,{colSpan:{base:2,md:1},children:[(0,S.jsxs)(t.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Notes"," "]}),(0,S.jsx)(t.Text,{children:null!==T&&void 0!==T&&T.notes?null===T||void 0===T?void 0:T.notes:" - "})]}),(0,S.jsxs)(t.GridItem,{colSpan:{base:2,md:1},children:[(0,S.jsxs)(t.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Attendes"," "]}),"Contact"===(null===T||void 0===T?void 0:T.related)&&null!==B&&void 0!==B&&B.view?(null===T||void 0===T?void 0:T.attendes)&&(null===T||void 0===T||null===(e=T.attendes)||void 0===e?void 0:e.map((e=>(0,S.jsx)(u.N_,{to:`/contactView/${null===e||void 0===e?void 0:e._id}`,children:(0,S.jsx)(t.Text,{color:"brand.600",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},children:e.firstName+" "+e.lastName})})))):"Lead"===(null===T||void 0===T?void 0:T.related)&&null!==M&&void 0!==M&&M.view?(null===T||void 0===T?void 0:T.attendesLead)&&(null===T||void 0===T||null===(l=T.attendesLead)||void 0===l?void 0:l.map((e=>(0,S.jsx)(u.N_,{to:`/leadView/${null===e||void 0===e?void 0:e._id}`,children:(0,S.jsx)(t.Text,{color:"brand.600",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},children:e.leadName})})))):"contact"===(null===T||void 0===T?void 0:T.related)?(null===T||void 0===T?void 0:T.attendes)&&(null===T||void 0===T||null===(i=T.attendes)||void 0===i?void 0:i.map((e=>(0,S.jsx)(t.Text,{color:"blackAlpha.900",children:(null===e||void 0===e?void 0:e.firstName)+" "+(null===e||void 0===e?void 0:e.lastName)})))):"lead"===(null===T||void 0===T?void 0:T.related)?(null===T||void 0===T?void 0:T.attendesLead)&&(null===T||void 0===T||null===(s=T.attendesLead)||void 0===s?void 0:s.map((e=>(0,S.jsx)(t.Text,{color:"blackAlpha.900",children:null===e||void 0===e?void 0:e.leadName})))):"-"]})]})})})]}),("superAdmin"===(null===D||void 0===D?void 0:D.role)||(null===Y||void 0===Y?void 0:Y.update)||(null===Y||void 0===Y?void 0:Y.delete))&&(0,S.jsx)(n.A,{mt:3,children:(0,S.jsx)(t.Grid,{templateColumns:"repeat(6, 1fr)",gap:1,children:(0,S.jsx)(t.GridItem,{colStart:6,children:(0,S.jsx)(t.Flex,{justifyContent:"right",children:"superAdmin"===(null===D||void 0===D?void 0:D.role)||null!==Y&&void 0!==Y&&Y.delete?(0,S.jsx)(d.Button,{size:"sm",style:{background:"red.800"},onClick:()=>k(!0),leftIcon:(0,S.jsx)(j.DeleteIcon,{}),colorScheme:"red",children:"Delete"}):""})})})})]}),(0,S.jsx)(p.A,{isOpen:I,onClose:()=>k(!1),type:"Meetings",handleDeleteData:async e=>{try{w(!0);let e=await(0,x.Gx)("api/meeting/delete/",null===z||void 0===z?void 0:z.id);200===(null===e||void 0===e?void 0:e.status)&&(k(!1),N(-1))}catch(l){console.log(l)}finally{w(!1)}},ids:null===z||void 0===z?void 0:z.id})]})}}}]);
//# sourceMappingURL=2958.3b754eba.chunk.js.map