"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[3999],{3848:(e,i,o)=>{o.d(i,{A:()=>r});var t=o(1206),l=o(4450),a=o(3458),n=o(1997),s=o(7149),d=o(579);function r(e){const{count:i,text:o,onFileSelect:r}=e,c=(0,t.dU)("secondaryGray.900","white"),u=(0,t.dU)("brand.500","white");return(0,d.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,d.jsx)(l.GridItem,{colSpan:{base:12},children:(0,d.jsx)(n.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===o?"img":"",csv:"csv",height:"100%",onFileSelect:r,isMultipleAllow:!1,content:(0,d.jsxs)(l.Box,{children:[(0,d.jsx)(a.In,{as:s.vpy,w:"80px",h:"80px",color:u}),(0,d.jsx)(l.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,d.jsx)(l.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),i>0&&(0,d.jsxs)(l.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",i]})]})})}),(0,d.jsx)(l.GridItem,{colSpan:{base:12},children:(0,d.jsxs)(l.Flex,{direction:"column",children:[(0,d.jsxs)(l.Text,{color:c,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",o]}),(0,d.jsx)(l.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}},3999:(e,i,o)=>{o.r(i),o.d(i,{default:()=>I});var t=o(5043),l=o(3216),a=o(4034),n=o(9754),s=o(4450),d=o(5376),r=o(2554),c=o(9621),u=o(5574),p=o(8031),m=o(7368),v=o(6178),f=o.n(v),x=o(2412),h=o(7508),b=(o(7560),o(2145)),g=o(3516),y=o(899),S=o(9942),j=o(8510),C=o(7682),_=o(4626),D=o(9488),A=o(3017),N=o(579);const T=e=>{const{state:i,allData:o,advanceSearch:t,setAdvanceSearch:l,isLoding:a,setSearchedData:n,setDisplaySearchData:d,setSearchClear:c,setSearchbox:u}=e,p=(0,h.wA)(),m=y.object({opportunityName:y.string(),accountName2:y.string(),opportunityAmount:y.string(),expectedCloseDate:y.string(),salesStage:y.string()}),v=(0,g.Wx)({initialValues:{opportunityName:"",accountName2:"",opportunityAmount:"",expectedCloseDate:"",salesStage:""},validationSchema:m,onSubmit:(e,i)=>{let{resetForm:t}=i;p((0,A.gB)(e)),p((0,A.DW)({values:e,allData:o,type:"Opprtunity"}));const a=[{name:["opportunityName"],value:null===e||void 0===e?void 0:e.opportunityName},{name:["accountName2"],value:null===e||void 0===e?void 0:e.accountName2},{name:["opportunityAmount"],value:null===e||void 0===e?void 0:e.opportunityAmount},{name:["expectedCloseDate"],value:null===e||void 0===e?void 0:e.expectedCloseDate},{name:["salesStage"],value:null===e||void 0===e?void 0:e.salesStage}];p((0,A.Tr)(null===a||void 0===a?void 0:a.filter((e=>null===e||void 0===e?void 0:e.value)))),d(!0),l(!1),t(),u("")}}),{errors:f,touched:x,values:b,handleBlur:T,handleChange:w,handleSubmit:O,setFieldValue:F,resetForm:k,dirty:I}=v;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(S.aF,{onClose:()=>{l(!1),k()},isOpen:t,isCentered:!0,children:[(0,N.jsx)(S.mH,{}),(0,N.jsxs)(S.$m,{children:[(0,N.jsx)(S.rQ,{children:"Advance Search"}),(0,N.jsx)(S.s_,{onClick:()=>{l(!1),k()}}),(0,N.jsx)(S.cw,{children:(0,N.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Opportunity Name"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.opportunityName,name:"opportunityName",placeholder:"Enter Opportunity Name",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===f||void 0===f?void 0:f.opportunityName)&&(null===x||void 0===x?void 0:x.opportunityName)&&(null===f||void 0===f?void 0:f.opportunityName)]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Account Name"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.accountName2,name:"accountName2",placeholder:"Enter Account Name",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===f||void 0===f?void 0:f.accountName2)&&(null===x||void 0===x?void 0:x.accountName2)&&(null===f||void 0===f?void 0:f.accountName2)]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Opportunity Amount"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.opportunityAmount,name:"opportunityAmount",placeholder:"Enter Opportunity Amount",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===f||void 0===f?void 0:f.opportunityAmount)&&(null===x||void 0===x?void 0:x.opportunityAmount)&&(null===f||void 0===f?void 0:f.opportunityAmount)]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Expected Close Date"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.expectedCloseDate,name:"expectedCloseDate",type:"date",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===f||void 0===f?void 0:f.expectedCloseDate)&&(null===x||void 0===x?void 0:x.expectedCloseDate)&&(null===f||void 0===f?void 0:f.expectedCloseDate)]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Sales Stage"}),(0,N.jsxs)(_.l6,{value:null===b||void 0===b?void 0:b.salesStage,name:"salesStage",onChange:w,fontWeight:"500",placeholder:"Sales Stage",children:[(0,N.jsx)("option",{value:"Prospecting",children:"Prospecting"}),(0,N.jsx)("option",{value:"Qualification",children:"Qualification"}),(0,N.jsx)("option",{value:"Needs Analysis",children:"Needs Analysis"}),(0,N.jsx)("option",{value:"Value Propositon",children:"Value Propositon"}),(0,N.jsx)("option",{value:"Identifying Decision Makers",children:"Identifying Decision Makers"}),(0,N.jsx)("option",{value:"Perception Analysis",children:"Perception Analysis"}),(0,N.jsx)("option",{value:"Proposal/Price Quote",children:"Proposal/Price Quote"}),(0,N.jsx)("option",{value:"Negotiation/Review",children:"Negotiation/Review"}),(0,N.jsx)("option",{value:"Closed/Won",children:"Closed/Won"}),(0,N.jsx)("option",{value:"Closed/Lost",children:"Closed/Lost"})]}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===f||void 0===f?void 0:f.salesStage)&&(null===x||void 0===x?void 0:x.salesStage)&&(null===f||void 0===f?void 0:f.salesStage)]})]})]})}),(0,N.jsxs)(S.jl,{children:[(0,N.jsx)(r.Button,{size:"sm",variant:"brand",mr:2,onClick:O,disabled:!(!a&&I),children:a?(0,N.jsx)(D.A,{}):"Search"}),(0,N.jsx)(r.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>k(),children:"Clear"})]})]})]})})};var w=o(6524),O=o(8177),F=o(3848);const k=e=>{var i;const{onClose:o,isOpen:a,text:n,customFields:d}=e,[c,u]=(0,t.useState)(!1),p=(0,l.Zp)(),m=(0,g.Wx)({initialValues:{opprotunities:""},onSubmit:(e,i)=>{let{resetForm:o}=i;_(),o()}}),{errors:v,touched:f,values:x,handleBlur:h,handleChange:b,handleSubmit:y,setFieldValue:j,resetForm:C}=m,_=async()=>{try{u(!0),C(),null!==x&&void 0!==x&&x.opprotunities&&(o(),p("/opprotunitiesImport",{state:{fileData:null===x||void 0===x?void 0:x.opprotunities,customFields:d}}))}catch(e){console.log(e)}finally{u(!1)}};return(0,N.jsxs)(S.aF,{onClose:o,isOpen:a,isCentered:!0,children:[(0,N.jsx)(S.mH,{}),(0,N.jsxs)(S.$m,{children:[(0,N.jsx)(S.rQ,{children:"Import Opprotunities"}),(0,N.jsx)(S.s_,{}),(0,N.jsx)(S.cw,{children:(0,N.jsx)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,N.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,N.jsx)(F.A,{count:null===x||void 0===x||null===(i=x.opprotunities)||void 0===i?void 0:i.length,onFileSelect:e=>j("opprotunities",e),text:n}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===v||void 0===v?void 0:v.opprotunities)&&(null===f||void 0===f?void 0:f.opprotunities)&&(0,N.jsxs)(N.Fragment,{children:["Please Select ",n]})]})]})})}),(0,N.jsxs)(S.jl,{children:[(0,N.jsx)(r.Button,{size:"sm",variant:"brand",onClick:y,disabled:!!c,children:c?(0,N.jsx)(D.A,{}):"Save"}),(0,N.jsx)(r.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{o(),m.resetForm()},children:"Close"})]})]})]})},I=e=>{const[i,o]=(0,t.useState)(!1),{isOpen:v,onOpen:g,onClose:y}=(0,n.j1)(),[S,j]=(0,t.useState)([]),[C,_]=(0,t.useState)(!1),[D,A]=(0,t.useState)([]),[F,I]=(0,t.useState)(""),z=JSON.parse(localStorage.getItem("user")),W=(0,l.Zp)(),V=(0,h.wA)(),[P,G]=(0,t.useState)(!1),[M,B]=(0,t.useState)([]),[L,q]=(0,t.useState)(!1),[E,H]=(0,t.useState)([]),[Q,R]=(0,t.useState)(),[U,$]=(0,t.useState)(!1),[Y,Z]=(0,t.useState)(!1),[J,K]=(0,t.useState)(""),[X,ee]=(0,t.useState)(!1),[ie,oe]=(0,u.h)(["Opportunities","Account"]),te={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:i,i:o}=e;return(0,N.jsx)(s.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,N.jsxs)(d.W1,{isLazy:!0,children:[(0,N.jsx)(d.IU,{children:(0,N.jsx)(m.txp,{})}),(0,N.jsxs)(d.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===ie||void 0===ie?void 0:ie.update)&&(0,N.jsx)(d.Dr,{py:2.5,icon:(0,N.jsx)(a.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;K("edit"),g(),R(null===i||void 0===i||null===(e=i.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===ie||void 0===ie?void 0:ie.view)&&(0,N.jsx)(d.Dr,{py:2.5,color:"green",icon:(0,N.jsx)(a.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;W(`/opportunitiesView/${null===i||void 0===i||null===(e=i.values)||void 0===e?void 0:e._id}`)},children:"View"}),(null===ie||void 0===ie?void 0:ie.delete)&&(0,N.jsx)(d.Dr,{py:2.5,color:"red",icon:(0,N.jsx)(a.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e;$(!0),j([null===i||void 0===i||null===(e=i.values)||void 0===e?void 0:e._id])},children:"Delete"})]})]})})}},le=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Opportunity Name",accessor:"opportunityName",cell:e=>(0,N.jsx)("div",{className:"selectOpt",children:(0,N.jsx)(s.Text,{onClick:()=>{var i,o;return ae(null===e||void 0===e||null===(i=e.row)||void 0===i||null===(o=i.original)||void 0===o?void 0:o._id)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})},{Header:"Account Name",accessor:"accountName",cell:e=>{var i,o,t,l,a,n,d,r;return"superAdmin"===(null===z||void 0===z?void 0:z.role)||null!==oe&&void 0!==oe&&oe.view?(0,N.jsx)("div",{className:"selectOpt",children:(0,N.jsx)(s.Text,{onClick:()=>{var i,o;return W(null!==(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.accountName)&&`/accountView/${null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original.accountName}`)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&null!==(i=e.row)&&void 0!==i&&null!==(o=i.original)&&void 0!==o&&o.accountName2?null===e||void 0===e||null===(t=e.row)||void 0===t||null===(l=t.original)||void 0===l?void 0:l.accountName2:"-"})}):(0,N.jsx)(s.Text,{children:null!==e&&void 0!==e&&null!==(a=e.row)&&void 0!==a&&null!==(n=a.original)&&void 0!==n&&n.accountName2?null===e||void 0===e||null===(d=e.row)||void 0===d||null===(r=d.original)||void 0===r?void 0:r.accountName2:"-"})}},{Header:"Opportunity Amount",accessor:"opportunityAmount"},{Header:"Expected Close Date",accessor:"expectedCloseDate",cell:e=>(0,N.jsx)("div",{children:f()(null===e||void 0===e?void 0:e.value).format("YYYY-MM-DD")})},{Header:"Sales Stage",accessor:"salesStage"},...null!==ie&&void 0!==ie&&ie.update||null!==ie&&void 0!==ie&&ie.view||null!==ie&&void 0!==ie&&ie.delete?[te]:[]],ae=e=>{W(`/opportunitiesView/${e}`)};return(0,t.useEffect)((()=>{(async()=>{var e;G(!0);const i=await V((0,w.o)());var o;200===(null===i||void 0===i||null===(e=i.payload)||void 0===e?void 0:e.status)?B(null===i||void 0===i||null===(o=i.payload)||void 0===o?void 0:o.data):b.oR.error("Failed to fetch data","error"),G(!1)})()}),[i]),(0,N.jsxs)("div",{children:[(0,N.jsx)(p.A,{title:"Opprtunities",isLoding:P,columnData:null!==le&&void 0!==le?le:[],allData:null!==M&&void 0!==M?M:[],tableData:M,searchDisplay:L,setSearchDisplay:q,searchedDataOut:E,setSearchedDataOut:H,tableCustomFields:[],access:ie,setIsImport:ee,onOpen:()=>{g(),K("add")},selectedValues:S,setSelectedValues:j,setDelete:$,deleteMany:!1,AdvanceSearch:(0,N.jsx)(r.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,N.jsx)(a.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>_(!0),children:"Advance Search"}),getTagValuesOutSide:D,searchboxOutside:F,setGetTagValuesOutside:A,setSearchboxOutside:I,handleSearchType:"OpprtunitySearch"}),(0,N.jsx)(T,{advanceSearch:C,setAdvanceSearch:_,setSearchedData:H,setDisplaySearchData:q,allData:null!==M&&void 0!==M?M:[],setAction:o,setGetTagValues:A,setSearchbox:I}),(0,N.jsx)(x.A,{isOpen:v,size:"lg",onClose:y,setAction:o,type:J,selectedId:Q}),(0,N.jsx)(O.A,{isOpen:U,onClose:()=>$(!1),type:"Opportunities",handleDeleteData:async e=>{try{G(!0);let i=await(0,c.Vn)("api/opportunity/deleteMany",e);200===(null===i||void 0===i?void 0:i.status)&&(b.oR.success("Opprtunities Delete successfully"),j([]),$(!1),o((e=>!e)))}catch(i){console.log(i),b.oR.error("server error")}finally{G(!1)}},ids:S}),(0,N.jsx)(k,{text:"Opprotunities file",isOpen:X,onClose:ee,customFields:[{name:"opportunityName",label:"Opportunity Name",type:"text",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690be4a4e0f5916f4313f13"},{name:"",value:"",_id:"6690be4a4e0f5916f4313f14"}],validation:[{require:!0,message:"Opportunity Name is required ",_id:"6690be4a4e0f5916f4313f15"},{min:!1,value:"",message:"",_id:"6690be4a4e0f5916f4313f16"},{max:!1,value:"",message:"",_id:"6690be4a4e0f5916f4313f17"},{value:"",message:"",match:!1,_id:"6690be4a4e0f5916f4313f18"},{message:"",formikType:"",_id:"6690be4a4e0f5916f4313f19"}],_id:"6690be4a4e0f5916f4313f12"},{name:"accountName",label:"Account Name",type:"text",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690be854e0f5916f4314260"},{name:"",value:"",_id:"6690be854e0f5916f4314261"}],validation:[{require:!0,message:"Account Name is required ",_id:"6690be854e0f5916f4314262"},{min:!1,value:"",message:"",_id:"6690be854e0f5916f4314263"},{max:!1,value:"",message:"",_id:"6690be854e0f5916f4314264"},{value:"",message:"",match:!1,_id:"6690be854e0f5916f4314265"},{message:"",formikType:"",_id:"6690be854e0f5916f4314266"}],_id:"6690be854e0f5916f431425f"},{name:"opportunityAmount",label:"Opportunity Amount",type:"number",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690bea44e0f5916f43145c5"},{name:"",value:"",_id:"6690bea44e0f5916f43145c6"}],validation:[{require:!0,message:"Opportunity Amount is required ",_id:"6690bea44e0f5916f43145c7"},{min:!1,value:"",message:"",_id:"6690bea44e0f5916f43145c8"},{max:!1,value:"",message:"",_id:"6690bea44e0f5916f43145c9"},{value:"",message:"",match:!1,_id:"6690bea44e0f5916f43145ca"},{message:"",formikType:"",_id:"6690bea44e0f5916f43145cb"}],_id:"6690bea44e0f5916f43145c4"},{name:"expectedCloseDate",label:"Expected Close Date",type:"date",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690bec04e0f5916f4314942"},{name:"",value:"",_id:"6690bec04e0f5916f4314943"}],validation:[{require:!0,message:"Expected Close Date is required ",_id:"6690bec04e0f5916f4314944"},{min:!1,value:"",message:"",_id:"6690bec04e0f5916f4314945"},{max:!1,value:"",message:"",_id:"6690bec04e0f5916f4314946"},{value:"",message:"",match:!1,_id:"6690bec04e0f5916f4314947"},{message:"",formikType:"date",_id:"6690bec04e0f5916f4314948"}],_id:"6690bec04e0f5916f4314941"},{name:"salesStage",label:"Sales Stage",type:"select",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"Prospecting",value:"Prospecting",_id:"6690bf4a4e0f5916f4314cd7"},{name:"Qualification",value:"Qualification",_id:"6690bf4a4e0f5916f4314cd8"},{name:"Needs Analysis",value:"Needs Analysis",_id:"6690bf4a4e0f5916f4314cd9"},{name:"Value Propositon",value:"Value Propositon",_id:"6690bf4a4e0f5916f4314cda"},{name:"Identifying Decision Makers",value:"Identifying Decision Makers",_id:"6690bf4a4e0f5916f4314cdb"},{name:"Perception Analysis",value:"Perception Analysis",_id:"6690bf4a4e0f5916f4314cdc"},{name:"Proposal/Price Quote",value:"Proposal/Price Quote",_id:"6690bf4a4e0f5916f4314cdd"},{name:"Negotiation/Review",value:"Negotiation/Review",_id:"6690bf4a4e0f5916f4314cde"},{name:"Closed/Won",value:"Closed/Won",_id:"6690bf4a4e0f5916f4314cdf"},{name:"Closed/Lost",value:"Closed/Lost",_id:"6690bf4a4e0f5916f4314ce0"}],validation:[{require:!0,message:"Sales Stage is required",_id:"6690bf4a4e0f5916f4314ce1"},{min:!1,value:"",message:"",_id:"6690bf4a4e0f5916f4314ce2"},{max:!1,value:"",message:"",_id:"6690bf4a4e0f5916f4314ce3"},{value:"",message:"",match:!1,_id:"6690bf4a4e0f5916f4314ce4"},{message:"",formikType:"",_id:"6690bf4a4e0f5916f4314ce5"}],_id:"6690bf4a4e0f5916f4314cd6"}]})]})}}}]);
//# sourceMappingURL=3999.267d6f75.chunk.js.map