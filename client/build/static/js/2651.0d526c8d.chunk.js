"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[2651],{962:(l,e,i)=>{i.d(e,{A:()=>I});var n=i(4034),o=i(4450),d=i(5376),t=i(858),s=i(5043),a=i(243),c=i(1009),r=i(4960),u=i(7149),v=i(3216),x=i(9942),h=i(2554),m=i(9621),j=i(579);const p=l=>(0,j.jsx)("div",{children:(0,j.jsxs)(x.aF,{onClose:null===l||void 0===l?void 0:l.onClose,isOpen:null===l||void 0===l?void 0:l.isOpen,isCentered:!0,children:[(0,j.jsx)(x.mH,{}),(0,j.jsxs)(x.$m,{children:[(0,j.jsxs)(x.rQ,{children:["Delete Document","one"===(null===l||void 0===l?void 0:l.method)?"":"s"]}),(0,j.jsx)(x.s_,{}),(0,j.jsxs)(x.cw,{children:["Are You Sure To Delete selected Document","one"===(null===l||void 0===l?void 0:l.method)?"":"s"," ?"]}),(0,j.jsxs)(x.jl,{children:[(0,j.jsx)(h.Button,{size:"sm",colorScheme:"red",mr:2,onClick:async()=>{if("one"===(null===l||void 0===l?void 0:l.method))null===l||void 0===l||l.deleteFile(null===l||void 0===l?void 0:l.id),null===l||void 0===l||l.onClose(!1);else if("many"===(null===l||void 0===l?void 0:l.method))try{let e=await(0,m.Vn)(null===l||void 0===l?void 0:l.url,null===l||void 0===l?void 0:l.data);200===(null===e||void 0===e?void 0:e.status)&&(null===l||void 0===l||l.setSelectedValues([]),null===l||void 0===l||l.onClose(!1))}catch(e){console.log(e)}},children:"Yes"}),(0,j.jsx)(h.Button,{size:"sm",variant:"outline",onClick:()=>{null===l||void 0===l||l.onClose(!1)},children:"No"})]})]})]})});var k=i(8510),C=i(5104),f=i(4626),S=i(3516),b=i(2145),g=i(9565),y=i(1125),L=i(3388);const w=l=>{const{setLinkDocument:e}=l,[i,d]=(0,s.useState)(!1),[t,a]=(0,s.useState)([]),[c,r]=(0,s.useState)(!1),[u,v]=(0,s.useState)(!1),p=JSON.parse(localStorage.getItem("user")),w=(0,S.Wx)({initialValues:{linkWith:"",linkContact:"",linkLead:""},onSubmit:(l,e)=>{let{resetForm:i}=e;_(),i()}}),{errors:F,touched:I,values:z,handleBlur:W,handleChange:D,handleSubmit:A,setFieldValue:T,resetForm:B}=w,_=async()=>{try{d(!0);let o=null!==z&&void 0!==z&&z.linkContact?{linkContact:null===z||void 0===z?void 0:z.linkContact}:{linkLead:null===z||void 0===z?void 0:z.linkLead},t=await(0,m.d_)(`api/document/link-document/${null===l||void 0===l?void 0:l.id}`,o);var i,n;if(t&&200===(null===t||void 0===t?void 0:t.status))e((l=>!l)),null===l||void 0===l||l.onClose();else b.oR.error(null===t||void 0===t||null===(i=t.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}catch(o){console.log(o)}finally{d(!1)}};return(0,s.useEffect)((()=>{(async()=>{if("Contact"===(null===z||void 0===z?void 0:z.linkWith)){let l=await(0,m.x4)("superAdmin"===(null===p||void 0===p?void 0:p.role)?"api/contact/":`api/contact/?createBy=${p._id}`);z.createBy=null===l||void 0===l?void 0:l._id,a((e=>{var i;return[...(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.map((l=>({label:(null===l||void 0===l?void 0:l.firstName)+" "+(null===l||void 0===l?void 0:l.lastName),value:null===l||void 0===l?void 0:l._id}))))||[]]}))}else if("lead"===(null===z||void 0===z?void 0:z.linkWith)){let l=await(0,m.x4)("superAdmin"===p.role?"api/lead/":`api/lead/?createBy=${p._id}`);z.createBy=null===l||void 0===l?void 0:l._id,a((e=>{var i;return[...(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.map((l=>({label:null===l||void 0===l?void 0:l.leadName,value:null===l||void 0===l?void 0:l._id}))))||[]]}))}})()}),[null===z||void 0===z?void 0:z.linkWith]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(x.aF,{onClose:null===l||void 0===l?void 0:l.onClose,isOpen:null===l||void 0===l?void 0:l.isOpen,children:[(0,j.jsx)(x.mH,{}),(0,j.jsxs)(x.$m,{children:[(0,j.jsx)(x.rQ,{children:"Link With Document"}),(0,j.jsx)(x.s_,{}),(0,j.jsx)(x.cw,{children:(0,j.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link With"}),(0,j.jsx)(C.z6,{onChange:l=>{B(),T("linkWith",l)},value:null===z||void 0===z?void 0:z.linkWith,children:(0,j.jsxs)(o.Stack,{direction:"row",children:[(0,j.jsx)(C.sx,{value:"Contact",children:"Contact"}),(0,j.jsx)(C.sx,{value:"lead",children:"Lead"})]})}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",(null===F||void 0===F?void 0:F.linkWith)&&(null===I||void 0===I?void 0:I.linkWith)&&(null===F||void 0===F?void 0:F.linkWith)]})]}),"Contact"===(null===z||void 0===z?void 0:z.linkWith)?(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Contact"}),(0,j.jsxs)(o.Flex,{children:[(0,j.jsx)(f.l6,{value:null===z||void 0===z?void 0:z.linkContact,name:"linkContact",onChange:D,mb:null!==F&&void 0!==F&&F.linkContact&&null!==I&&void 0!==I&&I.linkContact?void 0:"10px",fontWeight:"500",placeholder:"Link Contact",borderColor:null!==F&&void 0!==F&&F.linkContact&&null!==I&&void 0!==I&&I.linkContact?"red.300":null,children:null===t||void 0===t?void 0:t.map((l=>(0,j.jsx)("option",{value:null===l||void 0===l?void 0:l.value,children:"Contact"===(null===z||void 0===z?void 0:z.linkWith)&&`${null===l||void 0===l?void 0:l.label}`},null===l||void 0===l?void 0:l.value)))}),(0,j.jsx)(h.IconButton,{onClick:()=>r(!0),ml:2,fontSize:"25px",icon:(0,j.jsx)(L.G2h,{})}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",(null===F||void 0===F?void 0:F.linkContact)&&(null===I||void 0===I?void 0:I.linkContact)&&(null===F||void 0===F?void 0:F.linkContact)]})]})]}):"lead"===(null===z||void 0===z?void 0:z.linkWith)&&(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Lead"}),(0,j.jsxs)(o.Flex,{children:[(0,j.jsx)(f.l6,{value:null===z||void 0===z?void 0:z.linkLead,name:"linkLead",onChange:D,mb:null!==F&&void 0!==F&&F.linkLead&&null!==I&&void 0!==I&&I.linkLead?void 0:"10px",fontWeight:"500",placeholder:"Link Lead",borderColor:null!==F&&void 0!==F&&F.linkLead&&null!==I&&void 0!==I&&I.linkLead?"red.300":null,children:null===t||void 0===t?void 0:t.map((l=>(0,j.jsx)("option",{value:null===l||void 0===l?void 0:l.value,children:"lead"===(null===z||void 0===z?void 0:z.linkWith)&&`${null===l||void 0===l?void 0:l.label}`},null===l||void 0===l?void 0:l.value)))}),(0,j.jsx)(h.IconButton,{onClick:()=>r(!0),ml:2,fontSize:"25px",icon:(0,j.jsx)(L.G2h,{})}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",(null===F||void 0===F?void 0:F.linkLead)&&(null===I||void 0===I?void 0:I.linkLead)&&(null===F||void 0===F?void 0:F.linkLead)]})]}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",(null===F||void 0===F?void 0:F.linkLead)&&(null===I||void 0===I?void 0:I.linkLead)&&(null===F||void 0===F?void 0:F.linkLead)]})]})]})}),(0,j.jsxs)(x.jl,{children:[(0,j.jsx)(h.Button,{size:"sm",colorScheme:"brand",rightIcon:(0,j.jsx)(n.LinkIcon,{}),mr:2,onClick:_,children:"Link"}),(0,j.jsx)(h.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>{null===l||void 0===l||l.onClose(!1),B()},children:"Cancel"})]})]})]}),(0,j.jsx)(g.A,{data:t,isOpen:c,onClose:r,fieldName:"linkContact",setFieldValue:T}),(0,j.jsx)(y.A,{data:t,isOpen:u,onClose:v,fieldName:"linkLead",setFieldValue:T})]})};var F=i(7368);const I=l=>{let{data:e,deleteFile:i,item:x,download:h,name:m,isFile:k,children:C,setLinkDocument:f,from:S}=l;const[b,g]=(0,s.useState)(!1),[y,L]=(0,s.useState)(!1),[I,z]=(0,s.useState)(!1),[W,D]=(0,s.useState)(!1),A=(0,v.Zp)(),T=!k&&!!C;JSON.parse(localStorage.getItem("user"));return(0,j.jsxs)(o.List,{width:"100%",children:[(0,j.jsx)(o.ListItem,{alignItems:"center",display:"flex",children:(0,j.jsxs)(o.Text,{alignItems:"center",justifyContent:"space-between",display:"flex",width:"100%",onClick:T?()=>{g(!b)}:void 0,_hover:{cursor:"pointer",textDecoration:"none"},children:[(0,j.jsxs)(o.Flex,{width:"70%",alignItems:"center",children:[(0,j.jsx)(o.ListIcon,{as:k?c.QuH:a.NVk}),T&&(b?(0,j.jsx)(c.fK4,{}):(0,j.jsx)(c.fOo,{})),m]}),null!==x&&void 0!==x&&x.createByName?(0,j.jsxs)(o.Text,{children:["(",null===x||void 0===x?void 0:x.createByName,") "]}):null,!T&&(0,j.jsx)(o.Flex,{justifyContent:"right",width:"100%",children:(0,j.jsxs)(d.W1,{isLazy:!0,children:[(0,j.jsx)(d.IU,{children:(0,j.jsx)(F.txp,{})}),(0,j.jsxs)(d.cO,{position:"absolute",right:-5,pl:"0.5em",minW:"fit-content",children:[!S&&null!==e&&void 0!==e&&e.linkContact?(0,j.jsx)(d.Dr,{pr:2,w:"180px",onClick:()=>A(`/contactView/${null===e||void 0===e?void 0:e.linkContact}`),icon:(0,j.jsx)(r.oau,{fontSize:15}),children:"Linked Contact"}):!S&&(null===e||void 0===e?void 0:e.linkLead)&&(0,j.jsx)(d.Dr,{pr:2,w:"180px",onClick:()=>A(`/leadView/${null===e||void 0===e?void 0:e.linkLead}`),icon:(0,j.jsx)(u.ju$,{fontSize:15}),children:"Linked Lead"}),!S&&(0,j.jsx)(d.Dr,{pr:10,alignItems:"start",color:"blue",onClick:()=>(l=>{z(!0),D(l)})(null===e||void 0===e?void 0:e._id),icon:(0,j.jsx)(n.LinkIcon,{fontSize:15}),children:"Link"}),function(l){var e;const i=[".jpg",".jpeg",".png",".gif",".bmp"],n=null===l||void 0===l||null===(e=l.substring(null===l||void 0===l?void 0:l.lastIndexOf(".")))||void 0===e?void 0:e.toLowerCase();return null===i||void 0===i?void 0:i.includes(n)}(null===e||void 0===e?void 0:e.img)&&(0,j.jsx)(d.Dr,{alignItems:"start",pr:10,color:"green",onClick:()=>window.open(null===e||void 0===e?void 0:e.img),icon:(0,j.jsx)(n.ViewIcon,{fontSize:15}),children:"View"}),(0,j.jsx)(d.Dr,{pr:10,alignItems:"start",onClick:()=>(l=>{h(l)})(null===e||void 0===e?void 0:e._id),icon:(0,j.jsx)(n.DownloadIcon,{fontSize:15}),children:"Download"}),!S&&(0,j.jsx)(d.Dr,{alignItems:"start",pr:10,color:"red",onClick:()=>(l=>{L(!0),D(l)})(null===e||void 0===e?void 0:e._id),icon:(0,j.jsx)(n.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})}),(0,j.jsx)(p,{isOpen:y,onClose:L,method:"one",deleteFile:i,id:W}),(0,j.jsx)(w,{isOpen:I,setLinkDocument:f,onClose:z,id:W})]})}),T&&(0,j.jsx)(t.SD,{in:b,animateOpacity:!0,children:(0,j.jsx)(o.List,{styleType:"disc",ml:4,children:C})})]})}},1125:(l,e,i)=>{i.d(e,{A:()=>h});var n=i(9942),o=i(4450),d=i(2554),t=i(5043),s=i(9488),a=i(8860),c=i(8031),r=i(7892),u=i(7508),v=i(7801),x=i(579);const h=l=>{var e,i;const{onClose:h,isOpen:m,fieldName:j,setFieldValue:p,data:k}=l,C=(0,u.wA)(),[f,S]=(0,t.useState)(!1),[b,g]=(0,t.useState)([]),[y,L]=(0,t.useState)([]),[w,F]=(0,t.useState)([]);return(0,t.useEffect)((()=>{C((0,v.T)()),(async()=>{var l,e,i,n,o,d;S(!0);const t=await C((0,r.y)());L(null===t||void 0===t||null===(l=t.payload)||void 0===l?void 0:l.data);const s=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Status",accessor:"leadStatus",isSortable:!0,center:!0,cell:l=>{let{row:e}=l;return e.original.leadStatus}},...(null===t||void 0===t||null===(e=t.payload)||void 0===e||null===(i=e.data)||void 0===i||null===(n=i[0])||void 0===n||null===(o=n.fields)||void 0===o||null===(d=o.filter((l=>!0===(null===l||void 0===l?void 0:l.isTableField)&&"leadStatus"!==(null===l||void 0===l?void 0:l.name))))||void 0===d?void 0:d.map((l=>({Header:null===l||void 0===l?void 0:l.label,accessor:null===l||void 0===l?void 0:l.name}))))||[]];g(s),S(!1)})()}),[]),(0,x.jsxs)(n.aF,{onClose:h,size:"full",isOpen:m,children:[(0,x.jsx)(n.mH,{}),(0,x.jsxs)(n.$m,{children:[(0,x.jsx)(n.rQ,{children:"Select Lead"}),(0,x.jsx)(n.s_,{}),(0,x.jsx)(n.cw,{children:f?(0,x.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,x.jsx)(s.A,{})}):(0,x.jsx)(c.A,{title:"Leads",isLoding:f,columnData:null!==b&&void 0!==b?b:[],allData:null!==k&&void 0!==k?k:[],tableData:k,tableCustomFields:(null===y||void 0===y||null===(e=y[0])||void 0===e||null===(i=e.fields)||void 0===i?void 0:i.filter((l=>!0===(null===l||void 0===l?void 0:l.isTableField))))||[],AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:w,setSelectedValues:F,selectType:"single",customSearch:!1})}),(0,x.jsxs)(n.jl,{children:[(0,x.jsxs)(d.Button,{variant:"brand",size:"sm",me:2,disabled:!!f,leftIcon:(0,x.jsx)(a.NLY,{}),onClick:async()=>{try{S(!0),p(j,w),h()}catch(l){console.log(l)}finally{S(!1)}},children:[" ",f?(0,x.jsx)(s.A,{}):"Select"]}),(0,x.jsx)(d.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>h(),children:"Close"})]})]})]})}},8966:(l,e,i)=>{i.d(e,{A:()=>c});var n=i(1206),o=i(4450),d=i(3458),t=i(1997),s=i(7149),a=i(579);function c(l){const{used:e,total:i,count:c,...r}=l,u=(0,n.dU)("secondaryGray.900","white"),v=(0,n.dU)("brand.500","white");return(0,a.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,a.jsx)(o.GridItem,{colSpan:{base:12,"2xl":5},children:(0,a.jsx)(t.A,{w:{base:"100%","2xl":"240px"},me:"36px",minH:200,height:"100%",onFileSelect:null===l||void 0===l?void 0:l.onFileSelect,content:(0,a.jsxs)(o.Box,{children:[(0,a.jsx)(d.In,{as:s.vpy,w:"70px",h:"70px",color:v}),(0,a.jsx)(o.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,a.jsx)(o.Text,{fontSize:"xl",fontWeight:"700",color:v,children:"Upload Files"})}),(0,a.jsx)(o.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:c>0&&(0,a.jsxs)(o.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",c]})})]})})}),(0,a.jsx)(o.GridItem,{colSpan:{base:12,"2xl":7},children:(0,a.jsxs)(o.Flex,{direction:"column",children:[(0,a.jsx)(o.Text,{color:u,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px","2xl":"50px"},children:"Upload Files"}),(0,a.jsx)(o.Text,{color:"gray.400",fontSize:"md",my:{base:"auto","2xl":"10px"},mx:"auto",textAlign:"start",children:"Accepted File Types (Images, PDFs, Word docs, Powerpoint, Excel, ZIP, and video files - 15MB max)"})]})})]})}},9565:(l,e,i)=>{i.d(e,{A:()=>h});var n=i(9942),o=i(4450),d=i(2554),t=i(5043),s=(i(1046),i(9488)),a=i(8860),c=i(8031),r=i(850),u=i(6547),v=i(7508),x=i(579);const h=l=>{var e,i;const{onClose:h,isOpen:m,fieldName:j,setFieldValue:p,data:k}=l,[C,f]=(0,t.useState)(),[S,b]=(0,t.useState)([]),[g,y]=(0,t.useState)(!1),[L,w]=(0,t.useState)([]),F=(0,v.wA)();return(0,t.useEffect)((async()=>{await F((0,u.h)()),(async()=>{var l,e,i,n;y(!0);const o=await F((0,r.I)());b(null===o||void 0===o||null===(l=o.payload)||void 0===l?void 0:l.data);const d=[{Header:"#",accessor:"_id",isSortable:!1,width:10},...((null===o||void 0===o||null===(e=o.payload)||void 0===e||null===(i=e.data)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.fields)||[]).filter((l=>!0===(null===l||void 0===l?void 0:l.isTableField))).map((l=>({Header:null===l||void 0===l?void 0:l.label,accessor:null===l||void 0===l?void 0:l.name})))];w(d),y(!1)})()}),[]),(0,x.jsxs)(n.aF,{onClose:h,size:"full",isOpen:m,children:[(0,x.jsx)(n.mH,{}),(0,x.jsxs)(n.$m,{children:[(0,x.jsx)(n.rQ,{children:"Select Contact"}),(0,x.jsx)(n.s_,{}),(0,x.jsx)(n.cw,{children:g?(0,x.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,x.jsx)(s.A,{})}):(0,x.jsx)(c.A,{title:"Contacts",isLoding:g,columnData:null!==L&&void 0!==L?L:[],allData:null!==k&&void 0!==k?k:[],tableData:k,tableCustomFields:(null===S||void 0===S||null===(e=S[0])||void 0===e||null===(i=e.fields)||void 0===i?void 0:i.filter((l=>!0===(null===l||void 0===l?void 0:l.isTableField))))||[],AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:C,setSelectedValues:f,selectType:"single",customSearch:!1})}),(0,x.jsxs)(n.jl,{children:[(0,x.jsxs)(d.Button,{variant:"brand",size:"sm",me:2,onClick:async()=>{try{y(!0),p(j,C),h()}catch(l){console.log(l)}finally{y(!1)}},disabled:!!g,leftIcon:(0,x.jsx)(a.NLY,{}),children:[" ",g?(0,x.jsx)(s.A,{}):"Select"]}),(0,x.jsx)(d.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>h(),children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=2651.0d526c8d.chunk.js.map