"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[6853],{3972:(e,l,i)=>{i.d(l,{A:()=>p});var a=i(4450),d=i(4626),t=i(5104),o=i(216),n=i(6178),s=i.n(n),u=i(5043),r=i(2019),v=i(1899),c=i.n(v),m=(i(5015),i(7508)),x=i(9621),h=i(579);const p=e=>{var l;const{dashboard:i}=e,[n,v]=(0,u.useState)({}),[p,j]=(0,u.useState)(new Date(new Date-12096e5)),[b,f]=(0,u.useState)(new Date),[C,y]=(0,u.useState)("all"),[g,A]=(0,u.useState)("day"),w=(0,m.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.modules)||void 0===l?void 0:l.data})),S=JSON.parse(localStorage.getItem("user")),D=null===w||void 0===w?void 0:w.find((e=>"Emails"===(null===e||void 0===e?void 0:e.moduleName))),E=null===w||void 0===w?void 0:w.find((e=>"Calls"===(null===e||void 0===e?void 0:e.moduleName))),k=null===Object||void 0===Object||null===(l=Object.keys(n))||void 0===l?void 0:l.map((e=>{const l=n[e][0];let i=[];var a,d,t,o;null!==l&&void 0!==l&&l.Emails&&null!==D&&void 0!==D&&D.isActive&&(i=null===(a=i)||void 0===a?void 0:a.concat(null===l||void 0===l||null===(d=l.Emails)||void 0===d?void 0:d.map((e=>({x:null===e||void 0===e?void 0:e.date,y:null===e||void 0===e?void 0:e.Emailcount})))));null!==l&&void 0!==l&&l.Calls&&null!==E&&void 0!==E&&E.isActive&&(i=null===(t=i)||void 0===t?void 0:t.concat(null===l||void 0===l||null===(o=l.Calls)||void 0===o?void 0:o.map((e=>({x:null===e||void 0===e?void 0:e.date,y:null===e||void 0===e?void 0:e.Callcount})))));return{name:"Email"===e&&null!==D&&void 0!==D&&D.isActive?"Emails":"Call"===e&&null!==E&&void 0!==E&&E.isActive?"Call":"Email"===e&&null!==D&&void 0!==D&&D.isActive&&"Call"===e&&null!==E&&void 0!==E&&E.isActive?e:"",data:i}}));(0,u.useEffect)((()=>{(async()=>{const e={startDate:s()(p).format("YYYY-MM-DD"),endDate:s()(b).format("YYYY-MM-DD"),filter:g};let l=await(0,x.d_)("superAdmin"===(null===S||void 0===S?void 0:S.role)?"api/reporting/index":`api/reporting/index?sender=${null===S||void 0===S?void 0:S._id}`,e);200===(null===l||void 0===l?void 0:l.status)&&v(null===l||void 0===l?void 0:l.data)})()}),[p,b,g]);const N="all"===C?null===k||void 0===k?void 0:k.filter((e=>""!==(null===e||void 0===e?void 0:e.name))):null===k||void 0===k?void 0:k.filter((e=>(null===e||void 0===e?void 0:e.name)===C));return(0,h.jsxs)(o.A,{children:[!i&&(0,h.jsxs)(a.Box,{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",mb:4,children:[(0,h.jsxs)(d.l6,{value:C,onChange:e=>{var l;return y(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)},size:"sm",width:{base:"100%",md:"15%"},mb:{base:3,md:"auto"},children:[(0,h.jsx)("option",{value:"all",children:"All"}),(0,h.jsx)("option",{value:"EmailDetails",children:"Email"}),(0,h.jsx)("option",{value:"outboundcall",children:"Call"})]}),(0,h.jsxs)(a.Box,{width:{base:"100%",md:"auto"},flexWrap:"wrap",justifyContent:"left",mb:{base:3,md:"auto"},display:"flex",children:[(0,h.jsx)(c(),{selected:p,onChange:e=>j(e),className:"datePickerBorder"}),(0,h.jsx)(c(),{selected:b,onChange:e=>f(e),className:"datePickerBorder"})]}),(0,h.jsx)(a.Box,{width:{base:"100%",md:"auto"},display:"flex",justifyContent:"right",mb:{base:3,md:"auto"},children:(0,h.jsx)(t.z6,{onChange:e=>A(e),value:g,children:(0,h.jsxs)(a.Stack,{direction:"row",children:[(0,h.jsx)(t.sx,{value:"day",children:"Daily"}),(0,h.jsx)(t.sx,{value:"week",children:"Weekly"})]})})})]}),(0,h.jsx)("div",{id:"chart",children:(0,h.jsx)("div",{id:"chart-timeline",children:N&&(0,h.jsx)(r.A,{options:{chart:{id:"line-chart"},xaxis:{type:"datetime"},yaxis:{title:{text:"Count"}},dataLabels:{enabled:!0}},series:N,type:"area",height:300})})})]})}},6853:(e,l,i)=>{i.r(l),i.d(l,{default:()=>u});var a=i(216),d=i(5043),t=(i(5015),i(9621)),o=i(3972),n=i(8031),s=i(579);const u=()=>{const[e,l]=(0,d.useState)([]),[i,u]=(0,d.useState)(!1),[r,v]=(0,d.useState)([]),c=JSON.parse(localStorage.getItem("user")),m=[{Header:"Email Sent",accessor:"emailsent"},{Header:"Outbound Calls",accessor:"outboundcall"}];"superAdmin"===(null===c||void 0===c?void 0:c.role)&&(null===m||void 0===m||m.unshift({Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Name",accessor:"firstName"}));return(0,d.useEffect)((()=>{(async()=>{u(!0);let e=await(0,t.x4)("superAdmin"===(null===c||void 0===c?void 0:c.role)?"api/reporting":`api/reporting?_id=${null===c||void 0===c?void 0:c._id}`);e&&200===(null===e||void 0===e?void 0:e.status)&&l(null===e||void 0===e?void 0:e.data),u(!1)})()}),[]),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.A,{}),(0,s.jsx)(a.A,{mt:4,children:(0,s.jsx)(n.A,{title:"Reports",isLoding:i,columnData:null!==m&&void 0!==m?m:[],allData:null!==e&&void 0!==e?e:[],tableData:e,AdvanceSearch:!1,checkBox:!1,tableCustomFields:[],deleteMany:!0})})]})}}}]);
//# sourceMappingURL=6853.b54f16a5.chunk.js.map