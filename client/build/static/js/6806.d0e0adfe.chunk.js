"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[6806],{6806:(l,e,o)=>{o.r(e),o.d(e,{default:()=>M});var i=o(9754),d=o(4450),n=o(5376),t=o(2554),s=o(7682),r=o(4034),a=o(5043),v=o(6178),u=o.n(v),c=o(3216),h=o(5475),x=o(7805),m=o(9621),p=o(216),j=o(4960),b=o(5574),g=o(3994),f=o(1887),D=o(8177),k=o(5369),T=o(74),Y=o.n(T),S=o(9849),I=o(3516),y=o(446),C=o.n(y),A=o(579);const M=l=>{var e,o,v,T,y,M,w,z,B,F,G,W,H,_,E,N,O,P,V,R,$,L,J,q,U,Z,K,Q,X,ll,el,ol,il,dl,nl,tl,sl,rl,al,vl,ul,cl,hl;const xl=(0,c.g)(),{id:ml}=xl,pl=JSON.parse(localStorage.getItem("user")),[jl,bl,gl]=(0,b.h)(["Tasks","Contacts","Leads"]),[fl,Dl]=(0,a.useState)(),{onOpen:kl,onClose:Tl}=(0,i.j1)(),[Yl,Sl]=(0,a.useState)(!1),[Il,yl]=(0,a.useState)(!1),[Cl,Al]=(0,a.useState)(!1),[Ml,wl]=(0,a.useState)(!1),zl=(0,c.Zp)(),[Bl,Fl]=(0,a.useState)(null),Gl=null===(e=new Date)||void 0===e||null===(o=e.toISOString())||void 0===o?void 0:o.split("T")[0],Wl=null===(v=new Date)||void 0===v||null===(T=v.toISOString())||void 0===T?void 0:T.split(".")[0],Hl=async()=>{if(ml){var l,e,o;let i=await(0,m.x4)("api/task/view/",null!==ml&&void 0!==ml&&ml.event?null===ml||void 0===ml||null===(l=ml.event)||void 0===l||null===(e=l._def)||void 0===e||null===(o=e.extendedProps)||void 0===o?void 0:o._id:ml);Dl(null===i||void 0===i?void 0:i.data)}},_l={title:null===fl||void 0===fl?void 0:fl.title,description:null===fl||void 0===fl?void 0:fl.description,notes:null===fl||void 0===fl?void 0:fl.notes,start:null===fl||void 0===fl?void 0:fl.start,end:null===fl||void 0===fl?void 0:fl.end},El=(0,I.Wx)({initialValues:_l,validationSchema:S.pj,enableReinitialize:!0,onSubmit:async(l,e)=>{let{resetForm:o}=e,i=await(0,m.yP)(`api/task/edit/${ml}`,l);200===(null===i||void 0===i?void 0:i.status)&&(Fl(null),Hl())}}),Nl=(l,e)=>{El.setFieldValue(l,e),Fl(l)},Ol=l=>{El.handleSubmit()};(0,a.useEffect)((()=>{Hl()}),[ml,Yl]);return(0,A.jsxs)("div",{children:[(0,A.jsxs)(d.Grid,{templateColumns:"repeat(4, 1fr)",gap:3,id:"reports",children:[(0,A.jsx)(d.GridItem,{colSpan:{base:4},children:(0,A.jsx)(d.Heading,{size:"lg",m:3,children:(null===fl||void 0===fl?void 0:fl.title)||""})}),(0,A.jsx)(d.GridItem,{colSpan:{base:4},children:(0,A.jsx)(p.A,{children:(0,A.jsxs)(d.Grid,{gap:4,children:[(0,A.jsx)(d.GridItem,{colSpan:2,children:(0,A.jsxs)(d.Box,{children:[(0,A.jsxs)(d.Box,{display:"flex",justifyContent:"space-between",children:[(0,A.jsx)(d.Heading,{size:"md",mb:3,children:"Task Details"}),(0,A.jsxs)(d.Flex,{id:"hide-btn",children:[(0,A.jsxs)(n.W1,{children:[("superAdmin"===(null===pl||void 0===pl?void 0:pl.role)||(null===jl||void 0===jl?void 0:jl.create)||(null===jl||void 0===jl?void 0:jl.update)||(null===jl||void 0===jl?void 0:jl.delete))&&(0,A.jsx)(n.IU,{variant:"outline",colorScheme:"blackAlpha",size:"sm",va:!0,mr:2.5,as:t.Button,rightIcon:(0,A.jsx)(r.ChevronDownIcon,{}),children:"Actions"}),(0,A.jsx)(n.Nj,{}),(0,A.jsxs)(n.cO,{minWidth:2,children:[("superAdmin"===(null===pl||void 0===pl?void 0:pl.role)||(null===jl||void 0===jl?void 0:jl.create))&&(0,A.jsx)(n.Dr,{onClick:()=>{kl()},alignItems:"start",color:"blue",icon:(0,A.jsx)(r.AddIcon,{}),children:"Add"}),("superAdmin"===(null===pl||void 0===pl?void 0:pl.role)||(null===jl||void 0===jl?void 0:jl.update))&&(0,A.jsx)(n.Dr,{onClick:()=>Sl(!0),alignItems:"start",icon:(0,A.jsx)(r.EditIcon,{}),children:"Edit"}),(0,A.jsx)(n.Dr,{onClick:()=>{wl(!0);const l=document.getElementById("reports"),e=document.getElementById("hide-btn");l?(e.style.display="none",Y()().from(l).set({margin:[0,0,0,0],filename:`Task_Details_${u()().format("DD-MM-YYYY")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).save().then((()=>{wl(!1),e.style.display=""}))):(console.error("Element with ID 'reports' not found."),wl(!1))},alignItems:"start",icon:(0,A.jsx)(k.kl1,{}),display:"flex",style:{alignItems:"center"},children:"Print as PDF"}),("superAdmin"===(null===pl||void 0===pl?void 0:pl.role)||(null===jl||void 0===jl?void 0:jl.delete))&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n.Nj,{}),(0,A.jsx)(n.Dr,{alignItems:"start",onClick:()=>Al(!0),color:"red",icon:(0,A.jsx)(r.DeleteIcon,{}),children:"Delete"})]})]})]}),(0,A.jsx)(t.Button,{leftIcon:(0,A.jsx)(j.m6W,{}),size:"sm",variant:"brand",onClick:()=>zl(-1),children:"Back"})]})]}),(0,A.jsx)(g.E,{})]})}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task Title"," "]}),"title"===Bl?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.Input,{id:"text",name:"title",type:"text",onChange:null===El||void 0===El?void 0:El.handleChange,onBlur:Ol,value:null===El||void 0===El||null===(y=El.values)||void 0===y?void 0:y.title,borderColor:null!==El&&void 0!==El&&null!==(M=El.errors)&&void 0!==M&&M.title&&null!==El&&void 0!==El&&null!==(w=El.touched)&&void 0!==w&&w.title?"red.300":null,autoFocus:!0}),(0,A.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===El||void 0===El?void 0:El.errors.title)&&(null===El||void 0===El?void 0:El.touched.title)&&(null===El||void 0===El?void 0:El.errors.title)]})]}):(0,A.jsx)(d.Text,{onDoubleClick:()=>Nl("title",null===fl||void 0===fl?void 0:fl.title),children:null!==fl&&void 0!==fl&&fl.title?null===fl||void 0===fl?void 0:fl.title:" - "})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task Related To"," "]}),(0,A.jsx)(d.Text,{children:null!==fl&&void 0!==fl&&fl.category?null===fl||void 0===fl?void 0:fl.category:" - "})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task start"," "]}),"start"===Bl?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.Input,{name:"start",type:null!==fl&&void 0!==fl&&fl.allDay?"date":"datetime-local",onChange:null===El||void 0===El?void 0:El.handleChange,onBlur:Ol,value:!0===(null===fl||void 0===fl?void 0:fl.allDay)?u()(null===El||void 0===El||null===(z=El.values)||void 0===z?void 0:z.start).format("YYYY-MM-DD"):u()(null===El||void 0===El||null===(B=El.values)||void 0===B?void 0:B.start).format("YYYY-MM-DD HH:mm A"),autoFocus:!0,borderColor:null!==El&&void 0!==El&&null!==(F=El.errors)&&void 0!==F&&F.start&&null!==El&&void 0!==El&&null!==(G=El.touched)&&void 0!==G&&G.start?"red.300":null,min:null!==fl&&void 0!==fl&&fl.allDay?null===(W=C()(Gl))||void 0===W?void 0:W.format("YYYY-MM-DD"):null===(H=C()(Wl))||void 0===H?void 0:H.format("YYYY-MM-DD HH:mm")}),(0,A.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===El||void 0===El||null===(_=El.errors)||void 0===_?void 0:_.start)&&(null===El||void 0===El||null===(E=El.touched)||void 0===E?void 0:E.start)&&(null===El||void 0===El||null===(N=El.errors)||void 0===N?void 0:N.start)]})]}):(0,A.jsx)(d.Text,{onDoubleClick:()=>Nl("start",null===fl||void 0===fl?void 0:fl.start),children:fl&&null!==fl&&void 0!==fl&&fl.start?!0===(null===fl||void 0===fl?void 0:fl.allDay)?null===(O=u()(null===fl||void 0===fl?void 0:fl.start))||void 0===O?void 0:O.format("DD-MM-YYYY"):null===(P=u()(null===fl||void 0===fl?void 0:fl.start))||void 0===P?void 0:P.format("DD-MM-YYYY HH:mm A"):"-"})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task end"," "]}),"end"===Bl?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.Input,{name:"end",type:null!==fl&&void 0!==fl&&fl.allDay?"date":"datetime-local",onChange:null===El||void 0===El?void 0:El.handleChange,onBlur:Ol,min:null===El||void 0===El||null===(V=El.values)||void 0===V?void 0:V.start,value:!0===(null===fl||void 0===fl?void 0:fl.allDay)?null===(R=u()(null===El||void 0===El||null===($=El.values)||void 0===$?void 0:$.end))||void 0===R?void 0:R.format("YYYY-MM-DD"):null===(L=u()(null===El||void 0===El||null===(J=El.values)||void 0===J?void 0:J.end))||void 0===L?void 0:L.format("YYYY-MM-DD HH:mm A"),autoFocus:!0,borderColor:null!==El&&void 0!==El&&null!==(q=El.errors)&&void 0!==q&&q.end&&null!==El&&void 0!==El&&null!==(U=El.touched)&&void 0!==U&&U.end?"red.300":null}),(0,A.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===El||void 0===El||null===(Z=El.errors)||void 0===Z?void 0:Z.end)&&(null===El||void 0===El||null===(K=El.touched)||void 0===K?void 0:K.end)&&(null===El||void 0===El||null===(Q=El.errors)||void 0===Q?void 0:Q.end)]})]}):(0,A.jsx)(d.Text,{onDoubleClick:()=>Nl("end",null===fl||void 0===fl?void 0:fl.end),children:!0===(null===fl||void 0===fl?void 0:fl.allDay)?u()(null===fl||void 0===fl?void 0:fl.end).format("DD-MM-YYYY"):u()(null===fl||void 0===fl?void 0:fl.end).format("DD-MM-YYYY HH:mm A")})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task Link"," "]}),null!==fl&&void 0!==fl&&fl.url?(0,A.jsx)("a",{target:"_blank",href:null===fl||void 0===fl?void 0:fl.url,children:(0,A.jsx)(t.IconButton,{borderRadius:"10px",size:"md",icon:(0,A.jsx)(x.o9J,{})})}):"-"]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task reminder"," "]}),(0,A.jsx)(d.Text,{children:null!==fl&&void 0!==fl&&fl.reminder?null===fl||void 0===fl?void 0:fl.reminder:" - "})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Assign To"," "]}),(0,A.jsx)(h.N_,{to:null!==fl&&void 0!==fl&&fl.assignTo?(null===bl||void 0===bl?void 0:bl.view)&&`/contactView/${null===fl||void 0===fl?void 0:fl.assignTo}`:(null===gl||void 0===gl?void 0:gl.view)&&`/leadView/${null===fl||void 0===fl?void 0:fl.assignToLead}`,children:(0,A.jsx)(d.Text,{color:"contact"===(null===fl||void 0===fl?void 0:fl.category)&&(null!==bl&&void 0!==bl&&bl.view||"superAdmin"===(null===pl||void 0===pl?void 0:pl.role))||null!==gl&&void 0!==gl&&gl.view||"superAdmin"===(null===pl||void 0===pl?void 0:pl.role)&&"lead"===(null===fl||void 0===fl?void 0:fl.category)?"brand.600":"blackAlpha.900",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},children:null!==fl&&void 0!==fl&&fl.assignToName?null===fl||void 0===fl?void 0:fl.assignToName:" - "})})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task createBy"," "]}),(0,A.jsx)(d.Text,{children:null!==fl&&void 0!==fl&&fl.createByName?null===fl||void 0===fl?void 0:fl.createByName:" - "})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task Description"]}),"description"===Bl?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.Input,{id:"text",name:"description",type:"text",onChange:null===El||void 0===El?void 0:El.handleChange,onBlur:Ol,value:null===El||void 0===El||null===(X=El.values)||void 0===X?void 0:X.description,autoFocus:!0,borderColor:null!==El&&void 0!==El&&null!==(ll=El.errors)&&void 0!==ll&&ll.description&&null!==El&&void 0!==El&&null!==(el=El.touched)&&void 0!==el&&el.description?"red.300":null}),(0,A.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===El||void 0===El||null===(ol=El.errors)||void 0===ol?void 0:ol.description)&&(null===El||void 0===El||null===(il=El.touched)||void 0===il?void 0:il.description)&&(null===El||void 0===El||null===(dl=El.errors)||void 0===dl?void 0:dl.description)]})]}):(0,A.jsx)(d.Text,{onDoubleClick:()=>Nl("description",null===fl||void 0===fl?void 0:fl.description),children:null!==fl&&void 0!==fl&&fl.description?null===fl||void 0===fl?void 0:fl.description:" - "})]}),(0,A.jsxs)(d.GridItem,{colSpan:{base:2},children:[(0,A.jsxs)(d.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Task notes"," "]}),"notes"===Bl?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.Input,{id:"text",name:"notes",type:"text",onChange:null===El||void 0===El?void 0:El.handleChange,onBlur:Ol,value:null===El||void 0===El||null===(nl=El.values)||void 0===nl?void 0:nl.notes,autoFocus:!0,borderColor:null!==El&&void 0!==El&&null!==(tl=El.errors)&&void 0!==tl&&tl.notes&&null!==El&&void 0!==El&&null!==(sl=El.touched)&&void 0!==sl&&sl.notes?"red.300":null}),(0,A.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===El||void 0===El||null===(rl=El.errors)||void 0===rl?void 0:rl.notes)&&(null===El||void 0===El||null===(al=El.touched)||void 0===al?void 0:al.notes)&&(null===El||void 0===El||null===(vl=El.errors)||void 0===vl?void 0:vl.notes)]})]}):(0,A.jsx)(d.Text,{onDoubleClick:()=>Nl("notes",null===fl||void 0===fl?void 0:fl.notes),children:null!==fl&&void 0!==fl&&fl.notes?null===fl||void 0===fl?void 0:fl.notes:" - "})]})]})})})]}),((null===jl||void 0===jl?void 0:jl.update)||(null===jl||void 0===jl?void 0:jl.delete)||"superAdmin"===(null===pl||void 0===pl?void 0:pl.role))&&(0,A.jsx)(p.A,{mt:3,children:(0,A.jsx)(d.Grid,{templateColumns:"repeat(6, 1fr)",gap:1,children:(0,A.jsx)(d.GridItem,{colStart:6,children:(0,A.jsxs)(d.Flex,{justifyContent:"right",children:[((null===jl||void 0===jl?void 0:jl.update)||"superAdmin"===(null===pl||void 0===pl?void 0:pl.role))&&(0,A.jsx)(t.Button,{size:"sm",onClick:()=>Sl(!0),leftIcon:(0,A.jsx)(r.EditIcon,{}),mr:2.5,variant:"outline",colorScheme:"green",children:"Edit"}),((null===jl||void 0===jl?void 0:jl.delete)||"superAdmin"===(null===pl||void 0===pl?void 0:pl.role))&&(0,A.jsx)(t.Button,{size:"sm",style:{background:"red.800"},onClick:()=>Al(!0),leftIcon:(0,A.jsx)(r.DeleteIcon,{}),colorScheme:"red",children:"Delete"})]})})})}),(0,A.jsx)(f.A,{isOpen:Yl,onClose:()=>Sl(!1),viewClose:Tl,id:null!==ml&&void 0!==ml&&ml.event?null===ml||void 0===ml||null===(ul=ml.event)||void 0===ul||null===(cl=ul._def)||void 0===cl||null===(hl=cl.extendedProps)||void 0===hl?void 0:hl._id:ml,userAction:"edit"}),(0,A.jsx)(D.A,{isOpen:Cl,onClose:()=>Al(!1),type:"Task",handleDeleteData:async l=>{try{let e=await(0,m.Vn)("api/task/deleteMany",l);200===(null===e||void 0===e?void 0:e.status)&&(zl("/task"),Al(!1))}catch(e){console.log(e)}},ids:[ml]})]})}}}]);
//# sourceMappingURL=6806.d0e0adfe.chunk.js.map