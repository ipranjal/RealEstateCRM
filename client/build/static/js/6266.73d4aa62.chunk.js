"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[6266],{6266:(e,l,i)=>{i.r(l),i.d(l,{default:()=>O});var o=i(4034),n=i(1206),d=i(4450),s=i(2554),t=i(5066),a=i(9292),r=i(216),c=i(5043),u=i(9621),m=i(9942),v=i(2892),x=i(8510),h=i(7682),j=i(9488),p=i(3516),f=i(3994),g=i(899);const S=g.object({moduleName:g.string().min(2).required("Name is required")});var C=i(1997),b=i(2145),w=i(1380),N=i(7508),y=i(579);const z=e=>{const{onClose:l,isOpen:i,fetchData:o,selectedId:n,editdata:t,setAction:a}=e,[r,g]=(0,c.useState)(!1),z=(0,N.wA)(),A={moduleName:null!==t&&void 0!==t&&t.moduleName?null===t||void 0===t?void 0:t.moduleName:"",icon:""},I=(0,p.Wx)({initialValues:A,validationSchema:S,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:i}=l;F(),i()}}),F=async()=>{let e=await(0,u.yP)(`api/custom-field/change-module-name/${n}`,D);var i,d,s;200===(null===e||void 0===e?void 0:e.status)?(await z((0,w.K)()),l(),o(),a((e=>!e)),b.oR.success(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)):b.oR.error(null===e||void 0===e||null===(d=e.response)||void 0===d||null===(s=d.data)||void 0===s?void 0:s.message)},{errors:B,touched:k,values:D,handleBlur:T,handleChange:W,handleSubmit:G,setFieldValue:O}=I;return(0,y.jsx)("div",{children:(0,y.jsxs)(m.aF,{onClose:l,isOpen:i,isCentered:!0,size:"2xl",children:[(0,y.jsx)(m.mH,{}),(0,y.jsxs)(m.$m,{children:[(0,y.jsx)(m.rQ,{children:"Edit Module Name "}),(0,y.jsx)(m.s_,{}),(0,y.jsx)(f.E,{}),(0,y.jsx)(m.cw,{children:(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,y.jsx)(d.GridItem,{colSpan:{base:12},children:(0,y.jsxs)("div",{className:"imageCard",style:{margin:"10px"},children:[(0,y.jsx)(v._V,{src:null===t||void 0===t?void 0:t.icon,height:"20%",width:"20%"}),(0,y.jsx)("div",{className:"imageContent",children:(0,y.jsx)(C.A,{borderRadius:"0",isMultipleAllow:!1,onFileSelect:e=>(async e=>{try{g(!0);const d=new FormData;d.append("icon",null===e||void 0===e?void 0:e[0]);const s=await(0,u.yP)(`api/custom-field/change-icon/${null===t||void 0===t?void 0:t._id}`,d);var i,o,n;200===(null===s||void 0===s?void 0:s.status)?(await z((0,w.K)()),l(),a((e=>!e)),b.oR.success(null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)):b.oR.error(null===s||void 0===s||null===(o=s.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)}catch(d){console.log(d)}finally{g(!1)}})(e),content:(0,y.jsx)(s.Button,{size:"sm",variant:"brand",children:"Change"})})})]})}),(0,y.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,y.jsx)(x.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"2px",children:"Name"}),(0,y.jsx)(h.Input,{fontSize:"sm",onChange:W,onBlur:T,value:null===D||void 0===D?void 0:D.moduleName,name:"moduleName",placeholder:"Enter Name",fontWeight:"500",borderColor:null!==B&&void 0!==B&&B.moduleName&&null!==k&&void 0!==k&&k.moduleName?"red.300":null}),(0,y.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===B||void 0===B?void 0:B.moduleName)&&(null===k||void 0===k?void 0:k.moduleName)&&(null===B||void 0===B?void 0:B.moduleName)]})]})]})})}),(0,y.jsxs)(m.jl,{children:[(0,y.jsx)(s.Button,{colorScheme:"brand",size:"sm",mr:2,disabled:!!r,onClick:G,children:r?(0,y.jsx)(j.A,{}):"Update"}),(0,y.jsx)(s.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:l,children:"Close"})]})]})]})})},A=e=>{var l,i;const{onClose:n,isOpen:t,selectedId:a,fetchData:r,setAction:u}=e,[v,x]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1);return(0,y.jsxs)("div",{children:[(0,y.jsxs)(m.aF,{onClose:n,isOpen:t,isCentered:!0,size:"lg",children:[(0,y.jsx)(m.mH,{}),(0,y.jsxs)(m.$m,{children:[(0,y.jsxs)(m.rQ,{textTransform:"capitalize",children:[null===h||void 0===h?void 0:h.name," "]}),(0,y.jsx)(m.s_,{}),(0,y.jsx)(m.cw,{children:(0,y.jsx)(d.Box,{children:(0,y.jsx)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,y.jsx)(d.GridItem,{colSpan:{base:12},children:(0,y.jsxs)(d.Flex,{children:[(0,y.jsx)(d.Text,{fontWeight:"bold",pr:2,textTransform:"capitalize",children:"require :"}),(0,y.jsx)(d.Text,{children:null!==h&&void 0!==h&&h.validations&&(null===h||void 0===h||null===(l=h.validations)||void 0===l?void 0:l.length)>0&&!0===(null===h||void 0===h||null===(i=h.validations[0])||void 0===i?void 0:i.require)?"True":"False"})]})})})})}),(0,y.jsxs)(m.jl,{children:[(0,y.jsx)(s.Button,{variant:"outline",colorScheme:"green",size:"sm",me:2,onClick:()=>{n(),g(!0)},leftIcon:(0,y.jsx)(o.EditIcon,{}),children:"Edit"}),(0,y.jsx)(s.Button,{colorScheme:"red",size:"sm",mr:2,disabled:!!v,leftIcon:(0,y.jsx)(o.DeleteIcon,{}),children:v?(0,y.jsx)(j.A,{}):"Delete"})]})]})]}),(0,y.jsx)(z,{isOpen:f,onClose:()=>{g(!1)},selectedId:null===e||void 0===e?void 0:e.selectedId,editdata:h,setAction:u,fetchData:r})]})};var I=i(3216),F=i(3458),B=i(7149),k=i(5687);const D=e=>{var l,i;const{onClose:o,isOpen:t,fetchData:a,setAction:r}=e,[v,f]=(0,c.useState)(!1),g=(0,n.dU)("brand.500","white"),z=(0,N.wA)(),A=(0,p.Wx)({initialValues:{moduleName:"",icon:""},validationSchema:S,onSubmit:(e,l)=>{let{resetForm:i}=l;E()}}),{errors:I,touched:D,values:T,handleBlur:W,handleChange:G,handleSubmit:O,setFieldValue:_,resetForm:R}=A,E=async()=>{try{var e;f(!0);const n=new FormData;n.append("moduleName",null===T||void 0===T?void 0:T.moduleName),n.append("icon",null===T||void 0===T||null===(e=T.icon)||void 0===e?void 0:e[0]);let d=await(0,u.d_)("api/custom-field/add-module",n);var l,i;if(200===(null===d||void 0===d?void 0:d.status))a(),await z((0,w.K)()),await z((0,k.C)()),o(),R(),r((e=>!e));else b.oR.error(null===d||void 0===d||null===(l=d.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)}catch(t){var n,d,s;if(null!==t&&void 0!==t&&t.response&&null!==t&&void 0!==t&&null!==(n=t.response)&&void 0!==n&&n.data)b.oR.error(null===t||void 0===t||null===(d=t.response)||void 0===d||null===(s=d.data)||void 0===s?void 0:s.message);else b.oR.error("An error occurred while processing your request.")}finally{f(!1)}};return(0,y.jsx)("div",{children:(0,y.jsxs)(m.aF,{onClose:o,isOpen:t,isCentered:!0,size:"2xl",children:[(0,y.jsx)(m.mH,{}),(0,y.jsxs)(m.$m,{children:[(0,y.jsx)(m.rQ,{children:"Add Module"}),(0,y.jsx)(m.s_,{}),(0,y.jsx)(m.cw,{children:(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,y.jsx)(d.GridItem,{colSpan:{base:12},children:(0,y.jsx)(C.A,{w:{base:"100%"},me:"36px",minH:100,img:"Property Photos"===(null===e||void 0===e?void 0:e.text)?"img":"",isMultipleAllow:!1,height:"100%",onFileSelect:e=>_("icon",e),content:(0,y.jsxs)(d.Box,{children:[(0,y.jsx)(F.In,{as:B.vpy,w:"50px",h:"50px",color:g}),(0,y.jsx)(d.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,y.jsx)(d.Text,{fontSize:"sm",fontWeight:"700",color:g,children:"Upload File"})}),(null===T||void 0===T||null===(l=T.icon)||void 0===l?void 0:l.length)>0&&(0,y.jsxs)(d.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",null===T||void 0===T||null===(i=T.icon)||void 0===i?void 0:i.length]})]})})}),(0,y.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,y.jsxs)(x.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"2px",children:["Name",(0,y.jsx)(d.Text,{color:"red",children:"*"})]}),(0,y.jsx)(h.Input,{fontSize:"sm",onChange:G,onBlur:W,value:null===T||void 0===T?void 0:T.moduleName,name:"moduleName",placeholder:"Enter Name",fontWeight:"500",borderColor:null!==I&&void 0!==I&&I.moduleName&&null!==D&&void 0!==D&&D.moduleName?"red.300":null}),(0,y.jsxs)(d.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===I||void 0===I?void 0:I.moduleName)&&(null===D||void 0===D?void 0:D.moduleName)&&(null===I||void 0===I?void 0:I.moduleName)]})]})]})})}),(0,y.jsxs)(m.jl,{children:[(0,y.jsx)(s.Button,{colorScheme:"brand",size:"sm",mr:2,disabled:!!v,onClick:O,children:v?(0,y.jsx)(j.A,{}):"Save"}),(0,y.jsx)(s.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{o(),R()},children:"Close"})]})]})]})})};var T=i(4960),W=i(2853),G=i(8177);const O=()=>{const e=(0,I.Zp)(),[l,i]=(0,c.useState)(!1),[m,v]=(0,c.useState)(!1),[x,h]=(0,c.useState)(!1),[p,f]=(0,c.useState)(!1),[g,S]=(0,c.useState)(!1),[C,b]=(0,c.useState)(),[F,B]=(0,c.useState)([]),[O,_]=(0,c.useState)([]),[R,E]=(0,c.useState)([]),[M,P]=(0,c.useState)(!1),V=(0,n.dU)("gray.500","white"),[q,H]=(0,c.useState)(""),K=(0,N.wA)(),L=async()=>{P(!0);try{let e=await(0,u.x4)("api/custom-field");_(null===e||void 0===e?void 0:e.data),P(!1)}catch(e){}};(0,c.useEffect)((()=>{L()}),[g]);const $=(e,l)=>{H(l),b(null===e||void 0===e?void 0:e._id),f(!p)};return(0,y.jsxs)("div",{children:[(0,y.jsxs)(d.Flex,{justifyContent:"end",mb:3,children:[(null===R||void 0===R?void 0:R.length)>0&&(0,y.jsx)(s.Button,{variant:"outline",colorScheme:"brand",color:"red",mr:2,leftIcon:(0,y.jsx)(o.DeleteIcon,{}),onClick:()=>{$("","many")},size:"sm",children:"Delete"}),(0,y.jsx)(s.Button,{size:"sm",variant:"brand",me:1,onClick:()=>{h(!m)},leftIcon:(0,y.jsx)(o.AddIcon,{}),children:"Add New"}),(0,y.jsxs)(s.Button,{size:"sm",variant:"brand",onClick:()=>e(-1),leftIcon:(0,y.jsx)(T.m6W,{}),children:[" ","Back"]})]}),M?(0,y.jsx)(d.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:V,fontSize:"sm",fontWeight:"700",children:(0,y.jsx)(j.A,{})}):O&&(null===O||void 0===O?void 0:O.length)>0?(0,y.jsx)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:O&&(null===O||void 0===O?void 0:O.map(((e,n)=>(0,y.jsx)(d.GridItem,{rowSpan:2,colSpan:{base:12,md:6,lg:3},children:(0,y.jsx)(r.A,{children:(0,y.jsxs)(d.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,y.jsxs)(d.Flex,{children:[(0,y.jsx)(t.Sc,{disabled:"Properties"===(null===e||void 0===e?void 0:e.moduleName)||"Contacts"===(null===e||void 0===e?void 0:e.moduleName)||"Leads"===(null===e||void 0===e?void 0:e.moduleName),colorScheme:"brandScheme",value:R,isChecked:R.includes(null===e||void 0===e?void 0:e._id),onChange:l=>((e,l)=>{var i;null!==e&&void 0!==e&&null!==(i=e.target)&&void 0!==i&&i.checked?E((e=>[...e,l])):E((e=>null===e||void 0===e?void 0:e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e._id),me:"10px"}),(0,y.jsx)(a.m,{hasArrow:!0,label:null===e||void 0===e?void 0:e.moduleName,bg:"gray.200",color:"gray",textTransform:"capitalize",fontSize:"sm",children:(0,y.jsx)(d.Heading,{size:"md",fontWeight:"500",sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"6rem",overflow:"hidden",textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.moduleName})})]}),(0,y.jsxs)(d.Flex,{children:[(0,y.jsx)(s.Button,{size:"sm",disabled:"Properties"===(null===e||void 0===e?void 0:e.moduleName)||"Contacts"===(null===e||void 0===e?void 0:e.moduleName)||"Leads"===(null===e||void 0===e?void 0:e.moduleName),variant:"outline",me:2,color:"green",onClick:()=>(e=>{b(null===e||void 0===e?void 0:e._id),B(e),i(!l)})(e),children:(0,y.jsx)(o.EditIcon,{})}),(0,y.jsx)(s.Button,{size:"sm",disabled:"Properties"===(null===e||void 0===e?void 0:e.moduleName)||"Contacts"===(null===e||void 0===e?void 0:e.moduleName)||"Leads"===(null===e||void 0===e?void 0:e.moduleName),variant:"outline",me:2,color:"red",onClick:()=>$(e,"one"),children:(0,y.jsx)(o.DeleteIcon,{})})]})]})})},n))))}):(0,y.jsx)(r.A,{mt:"5",children:(0,y.jsx)(d.Text,{textAlign:"center",width:"100%",color:"gray.500",fontSize:"sm",fontWeight:"700",children:(0,y.jsx)(W.A,{})})}),(0,y.jsx)(D,{isOpen:x,onClose:()=>{h(!1)},fetchData:L,setAction:S}),(0,y.jsx)(z,{isOpen:l,onClose:()=>{i(!1)},selectedId:C,editdata:F,setAction:S,fetchData:L}),(0,y.jsx)(G.A,{isOpen:p,onClose:()=>f(!1),type:"Module",handleDeleteData:async(e,l)=>{if("one"===q)try{if(e){P(!0);const l=await(0,u.Gx)("api/custom-field/module/",e);200===(null===l||void 0===l?void 0:l.status)&&(await K((0,w.K)()),f(!1),L(),await K((0,k.C)()))}}catch(i){console.log(i)}finally{P(!1)}else if("many"===q)try{P(!0);let e=await(0,u.Vn)("api/custom-field/deleteMany-Module",l);200===(null===e||void 0===e?void 0:e.status)&&(await K((0,w.K)()),E([]),f(!1),L(),await K((0,k.C)()))}catch(i){console.log(i)}finally{P(!1)}},ids:C,selectedValues:R}),(0,y.jsx)(A,{isOpen:m,onClose:()=>{v(!1)},selectedId:C,setAction:S,fetchData:L})]})}}}]);
//# sourceMappingURL=6266.73d4aa62.chunk.js.map