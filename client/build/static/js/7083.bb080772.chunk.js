"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[7083],{7083:(e,l,o)=>{o.r(l),o.d(l,{default:()=>A});var i=o(9754),n=o(4450),t=o(2554),d=o(5043),s=o(9621),a=o(8031),r=o(4960),c=o(3216),u=o(1206),v=o(9942),x=o(1778),h=o(9488),p=o(1094),m=o(5066),g=o(3516),j=o(2853),f=o(579);const S=function(e){const{columnsData:l,name:o,tableData:i,fetchData:a,setAccess:r,_id:c,setRoleModal:S,editModal:y,setEditModal:C}=e,T=(0,u.dU)("secondaryGray.900","white"),b=(0,u.dU)("gray.200","whiteAlpha.100"),w=(0,d.useMemo)((()=>l),[l]),[z,P]=(0,d.useState)(!1),[H,k]=(0,d.useState)(),D=(0,d.useMemo)((()=>i||[]),[i]),W=(0,p.useTable)({columns:w,data:D,initialState:{pageIndex:0}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableBodyProps:N,headerGroups:A,prepareRow:O,page:F,pageOptions:I,setPageSize:B,state:{pageIndex:M,pageSize:R}}=W;(null===I||void 0===I?void 0:I.length)<H&&k(null===I||void 0===I?void 0:I.length);const G={roleName:o,access:i},E=(0,g.Wx)({initialValues:G,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:o}=l;X()}}),{values:_,handleSubmit:U,setFieldValue:V,resetForm:L}=E,$=(e,l,o)=>i=>{var n,t,d;const{checked:s}=null===i||void 0===i?void 0:i.target,a=null===_||void 0===_||null===(n=_.access)||void 0===n?void 0:n.findIndex((e=>"Leads"===(null===e||void 0===e?void 0:e.title))),r=null===_||void 0===_||null===(t=_.access)||void 0===t?void 0:t.findIndex((e=>"Contacts"===(null===e||void 0===e?void 0:e.title))),c=null===_||void 0===_||null===(d=_.access)||void 0===d?void 0:d.map(((i,n)=>{if(n===e){const e={...i,[l]:s};return o&&!s?e[o]=e.update=e.delete=s:o&&(e[o]=s),e}return i})),u=c.map(((e,l)=>{var i,n,t;if(o&&!1===s&&(null===(i=c[r])||void 0===i||!i.view)&&(null===(n=c[a])||void 0===n||!n.view)&&(null!==(t=["Emails","Calls","Meetings"])&&void 0!==t&&t.includes(null===e||void 0===e?void 0:e.title)))return{...e,create:!1,delete:!1,update:!1,view:!1};return e}));V("access",u)},X=async()=>{try{P(!0),r(null===_||void 0===_?void 0:_.access);let e=await(0,s.yP)(`api/role-access/edit/${c}`,_);200===(null===e||void 0===e?void 0:e.status)&&(C(!1),a(),S(!0))}catch(e){console.log(e)}finally{P(!1)}},Q=e=>{var l;return!!["Emails","Calls","Meetings"].includes(null===e||void 0===e?void 0:e.title)&&!(null!==_&&void 0!==_&&null!==(l=_.access)&&void 0!==l&&l.some((e=>("Contacts"===(null===e||void 0===e?void 0:e.title)||"Leads"===(null===e||void 0===e?void 0:e.title))&&(null===e||void 0===e?void 0:e.view))))};return(0,d.useEffect)((()=>{a()}),[y]),(0,d.useEffect)((()=>{Array.isArray(D)&&(null===D||void 0===D?void 0:D.length)>0&&B(null===D||void 0===D?void 0:D.length)}),[D,B]),(0,f.jsxs)(v.aF,{onClose:()=>C(!1),isOpen:y,isCentered:!0,size:"xl",children:[(0,f.jsx)(v.mH,{}),(0,f.jsxs)(v.$m,{height:"580px",maxWidth:"2xl",children:[(0,f.jsxs)(v.rQ,{textTransform:"capitalize",children:[o," Access"]}),(0,f.jsx)(v.s_,{}),(0,f.jsx)(v.cw,{overflow:"auto",height:"400px",children:(0,f.jsxs)(x.XI,{children:[(0,f.jsx)(x.d8,{children:null===A||void 0===A?void 0:A.map(((e,l)=>{var o;return(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===e||void 0===e||null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,f.jsx)(x.Th,{sx:{width:"10px"},pe:"10px",borderColor:b,display:!1===(null===e||void 0===e?void 0:e.display)&&"none",children:(0,f.jsx)(n.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:!1!==(null===e||void 0===e?void 0:e.display)&&(null===e||void 0===e?void 0:e.render("Header"))})},l))))}))}),(0,f.jsx)(x.NN,{...N(),children:z?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,f.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(h.A,{})})})}):0===(null===D||void 0===D?void 0:D.length)?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,f.jsx)(n.Text,{textAlign:"center",width:"100%",color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===F||void 0===F?void 0:F.map(((e,l)=>{var o;return O(e),(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,o)=>{var i,t,s;let a="";if("title"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header))a=(0,f.jsx)(n.Text,{me:"10px",color:T,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("create"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)){var r,c,u;a=(0,f.jsx)(n.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:Q(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.original),isChecked:null===_||void 0===_||null===(c=_.access[l])||void 0===c?void 0:c.create,defaultChecked:null===_||void 0===_||null===(u=_.access[l])||void 0===u?void 0:u.create,onChange:$(l,"create","view")})})}else if("view"===(null===e||void 0===e?void 0:e.column.Header)){var v,h,p;a=(0,f.jsx)(n.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:Q(null===e||void 0===e||null===(v=e.row)||void 0===v?void 0:v.original),isChecked:null===_||void 0===_||null===(h=_.access[l])||void 0===h?void 0:h.view,defaultChecked:null===_||void 0===_||null===(p=_.access[l])||void 0===p?void 0:p.view,onChange:$(l,"view","create")})})}else if("update"===(null===e||void 0===e?void 0:e.column.Header)){var g,j,S;a=(0,f.jsx)(n.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:!(null!==_&&void 0!==_&&null!==(g=_.access[l])&&void 0!==g&&g.view),isChecked:null===_||void 0===_||null===(j=_.access[l])||void 0===j?void 0:j.update,defaultChecked:null===_||void 0===_||null===(S=_.access[l])||void 0===S?void 0:S.update,onChange:$(l,"update")})})}else if("delete"===(null===e||void 0===e?void 0:e.column.Header)){var y,C,b;a=(0,f.jsx)(n.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:!(null!==_&&void 0!==_&&null!==(y=_.access[l])&&void 0!==y&&y.view),isChecked:null===_||void 0===_||null===(C=_.access[l])||void 0===C?void 0:C.delete,defaultChecked:null===_||void 0===_||null===(b=_.access[l])||void 0===b?void 0:b.delete,onChange:$(l,"delete")})})}return(0,d.createElement)(x.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:o,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e||null===(s=e.column)||void 0===s?void 0:s.Header)&&"none"}},a)})))}))})]})}),(0,f.jsxs)(v.jl,{children:[(0,f.jsx)(t.Button,{size:"sm",variant:"brand",onClick:U,children:"Save"}),(0,f.jsx)(t.Button,{size:"sm",onClick:()=>{L(),C(!1),S(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};var y=o(5369),C=o(8152),T=o(4448);const b=e=>{const{setUserModal:l,userModal:o,tableData:i,columnsData:a,setOpenUser:r,_id:c,userRole:h,fetchData:g}=e,S=(0,u.dU)("secondaryGray.900","white"),b=(0,u.dU)("gray.200","whiteAlpha.100"),w=(0,d.useMemo)((()=>a),[a]),[z,P]=(0,d.useState)(!1),[H,k]=(0,d.useState)([]),D=(0,d.useMemo)((()=>i),[i]),[W,N]=(0,d.useState)(),A=(0,p.useTable)({columns:w,data:D,initialState:{pageIndex:0}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableProps:O,getTableBodyProps:F,headerGroups:I,prepareRow:B,page:M,canPreviousPage:R,canNextPage:G,pageOptions:E,pageCount:_,gotoPage:U,nextPage:V,previousPage:L,setPageSize:$,state:{pageIndex:X,pageSize:Q}}=A;(null===E||void 0===E?void 0:E.length)<W&&N(null===E||void 0===E?void 0:E.length);const q=[...new Set(H)];(0,d.useEffect)((()=>{const e=null===h||void 0===h?void 0:h.map((e=>null===e||void 0===e?void 0:e._id));k(e)}),[o]);return(0,f.jsxs)(v.aF,{onClose:()=>l(!1),isOpen:o,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,f.jsx)(v.mH,{}),(0,f.jsxs)(v.$m,{children:[(0,f.jsx)(v.rQ,{children:(0,f.jsxs)(n.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(n.Text,{children:"Users"}),(0,f.jsx)(v.s_,{mt:"2"})]})}),(0,f.jsxs)(v.cw,{overflowY:"auto",height:"400px",children:[(0,f.jsxs)(x.XI,{...O(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,f.jsx)(x.d8,{children:null===I||void 0===I?void 0:I.map(((e,l)=>{var o;return(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===e||void 0===e||null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,d.createElement)(x.Th,{...null===e||void 0===e?void 0:e.getHeaderProps(!1!==(null===e||void 0===e?void 0:e.isSortable)&&(null===e||void 0===e?void 0:e.getSortByToggleProps())),pe:"10px",key:l,borderColor:b},(0,f.jsxs)(n.Flex,{align:"center",justifyContent:null!==e&&void 0!==e&&e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,f.jsx)("span",{style:{textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.render("Header")}),!1!==(null===e||void 0===e?void 0:e.isSortable)&&(0,f.jsx)("span",{children:null!==e&&void 0!==e&&e.isSorted?null!==e&&void 0!==e&&e.isSortedDesc?(0,f.jsx)(y.GOR,{}):(0,f.jsx)(y.XhJ,{}):(0,f.jsx)(y.MjW,{})})]})))))}))}),(0,f.jsx)(x.NN,{...F(),children:z?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,f.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(T.y,{})})})}):0===(null===D||void 0===D?void 0:D.length)?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,f.jsx)(n.Text,{textAlign:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===M||void 0===M?void 0:M.map(((e,l)=>{var o;return B(e),(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,l)=>{var o,i,t,s,a;let r="";var c;"#"===(null===e||void 0===e||null===(o=e.column)||void 0===o?void 0:o.Header)?r=(0,f.jsxs)(n.Flex,{align:"center",children:[(0,f.jsx)(m.Sc,{colorScheme:"brandScheme",value:H,isChecked:H.includes(null===e||void 0===e?void 0:e.value),onChange:l=>((e,l)=>{var o;null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&o.checked?k((e=>[...e,l])):k((e=>null===e||void 0===e?void 0:e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,f.jsx)(n.Text,{color:S,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(c=e.row)||void 0===c?void 0:c.index)+1})]}):"email Id"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header)?r=(0,f.jsx)(n.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)||"last Name"===(null===e||void 0===e||null===(s=e.column)||void 0===s?void 0:s.Header)?r=(0,f.jsx)(n.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e||null===(a=e.column)||void 0===a?void 0:a.Header)&&(r=(0,f.jsx)(n.Text,{color:S,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,d.createElement)(x.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},r)})))}))})]}),(null===D||void 0===D?void 0:D.length)>5&&(0,f.jsx)(C.A,{gotoPage:U,gopageValue:W,setGopageValue:N,pageCount:_,canPreviousPage:R,previousPage:L,canNextPage:G,pageOptions:E,setPageSize:$,nextPage:V,pageSize:Q,pageIndex:X})]}),(0,f.jsxs)(v.jl,{children:[(0,f.jsx)(t.Button,{variant:"brand",size:"sm",onClick:()=>{(async()=>{const e=await(0,s.yP)(`api/role-access/assignedUsers/${c}`,q);200===(null===e||void 0===e?void 0:e.status)&&(l(!1),g())})(),r(!0)},children:"Save"}),(0,f.jsx)(t.Button,{size:"sm",onClick:()=>{l(!1),k([]),r(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};const w=function(e){const{tableData:l,columnsData:o,isOpen:i,_id:a,setRoleModal:r,setOpenUser:c,fetchData:m}=e,g=(0,u.dU)("secondaryGray.900","white"),S=(0,u.dU)("gray.200","whiteAlpha.100"),T=(0,d.useMemo)((()=>o),[o]),[w,z]=(0,d.useState)([]),[P,H]=(0,d.useState)(!1),k=(0,d.useMemo)((()=>l),[l]),[D,W]=(0,d.useState)(!1),[N,A]=(0,d.useState)([]),[O,F]=(0,d.useState)(),I=(0,p.useTable)({columns:T,data:k,initialState:{pageIndex:0}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableProps:B,getTableBodyProps:M,headerGroups:R,prepareRow:G,page:E,canPreviousPage:_,canNextPage:U,pageOptions:V,pageCount:L,gotoPage:$,nextPage:X,previousPage:Q,setPageSize:q,state:{pageIndex:J,pageSize:Y}}=I;(null===V||void 0===V?void 0:V.length)<O&&F(null===V||void 0===V?void 0:V.length);const Z=async()=>{var e;let l=await(0,s.x4)("api/user/?role=user");A(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.user)};return(0,d.useEffect)((()=>{Z()}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(v.aF,{onClose:()=>c(!1),isOpen:i,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,f.jsx)(v.mH,{}),(0,f.jsxs)(v.$m,{children:[(0,f.jsx)(v.rQ,{height:"580px",children:(0,f.jsxs)(n.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(n.Text,{children:"Users"}),(0,f.jsx)(t.Button,{variant:"brand",size:"sm",me:"2rem",onClick:()=>{c(!1),W(!0)},children:"Manage Users"}),(0,f.jsx)(v.s_,{mt:"2"})]})}),(0,f.jsxs)(v.cw,{overflow:"auto",height:"400px",children:[(0,f.jsxs)(x.XI,{...B(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,f.jsx)(x.d8,{children:null===R||void 0===R?void 0:R.map(((e,l)=>{var o;return(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===e||void 0===e||null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,d.createElement)(x.Th,{...null===e||void 0===e?void 0:e.getHeaderProps(!1!==(null===e||void 0===e?void 0:e.isSortable)&&(null===e||void 0===e?void 0:e.getSortByToggleProps())),pe:"10px",key:l,borderColor:S},(0,f.jsxs)(n.Flex,{align:"center",justifyContent:null!==e&&void 0!==e&&e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,f.jsx)("span",{style:{textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.render("Header")}),!1!==(null===e||void 0===e?void 0:e.isSortable)&&(0,f.jsx)("span",{children:null!==e&&void 0!==e&&e.isSorted?null!==e&&void 0!==e&&e.isSortedDesc?(0,f.jsx)(y.GOR,{}):(0,f.jsx)(y.XhJ,{}):(0,f.jsx)(y.MjW,{})})]})))))}))}),(0,f.jsx)(x.NN,{...M(),children:P?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===T||void 0===T?void 0:T.length,children:(0,f.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:g,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(h.A,{})})})}):0===(null===k||void 0===k?void 0:k.length)?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===T||void 0===T?void 0:T.length,children:(0,f.jsx)(n.Text,{textAlign:"center",width:"100%",color:g,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===E||void 0===E?void 0:E.map(((e,l)=>{var o;return G(e),(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,l)=>{var o,i,t,s,a;let r="";var c;"#"===(null===e||void 0===e||null===(o=e.column)||void 0===o?void 0:o.Header)?r=(0,f.jsx)(n.Flex,{align:"center",children:(0,f.jsx)(n.Text,{color:g,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(c=e.row)||void 0===c?void 0:c.index)+1})}):"email Id"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header)?r=(0,f.jsx)(n.Text,{me:"10px",color:g,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)||"last Name"===(null===e||void 0===e||null===(s=e.column)||void 0===s?void 0:s.Header)?r=(0,f.jsx)(n.Text,{me:"10px",color:g,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e||null===(a=e.column)||void 0===a?void 0:a.Header)&&(r=(0,f.jsx)(n.Text,{color:g,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,d.createElement)(x.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},r)})))}))})]}),(null===k||void 0===k?void 0:k.length)>5&&(0,f.jsx)(C.A,{gotoPage:$,gopageValue:O,setGopageValue:F,pageCount:L,canPreviousPage:_,previousPage:Q,canNextPage:U,pageOptions:V,setPageSize:q,nextPage:X,pageSize:Y,pageIndex:J})]}),(0,f.jsx)(v.jl,{children:(0,f.jsx)(t.Button,{size:"sm",onClick:()=>{c(!1),r(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})})]})]}),(0,f.jsx)(b,{fetchData:m,userModal:D,setOpenUser:c,_id:a,setUserModal:W,userFetchData:Z,userRole:l,tableData:N||[],columnsData:o||[]})]})};const z=function(e){const{name:l,tableData:o,fetchData:i,columnsData:a,isOpen:r,setAction:c,setAccess:m,_id:g,onOpen:y,setRoleModal:C}=e,T=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"role",accessor:"role"}],b=(0,u.dU)("secondaryGray.900","white"),z=(0,u.dU)("gray.200","whiteAlpha.100"),P=(0,d.useMemo)((()=>a),[a]),[H,k]=(0,d.useState)(!1),[D,W]=(0,d.useState)(!1),[N,A]=(0,d.useState)(),[O,F]=(0,d.useState)(),I=(0,d.useMemo)((()=>o||[]),[o]),[B,M]=(JSON.parse(localStorage.getItem("user")),(0,d.useState)([])),R=(0,p.useTable)({columns:P,data:I,initialState:{pageIndex:0,pageSize:500}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableBodyProps:G,headerGroups:E,prepareRow:_,page:U,pageOptions:V,state:{pageIndex:L,pageSize:$}}=R;(null===V||void 0===V?void 0:V.length)<O&&F(null===V||void 0===V?void 0:V.length);const X=async()=>{if(g){let e=await(0,s.x4)("api/role-access/assignedUsers/",g);M(null===e||void 0===e?void 0:e.data)}};return(0,d.useEffect)((()=>{X()}),[g]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(v.aF,{onClose:()=>C(!1),isOpen:r,isCentered:!0,size:"xl",children:[(0,f.jsx)(v.mH,{}),(0,f.jsxs)(v.$m,{height:"580px",maxWidth:"2xl",children:[(0,f.jsx)(v.rQ,{children:(0,f.jsxs)(n.Flex,{justifyContent:"space-between",children:[(0,f.jsxs)(n.Text,{textTransform:"capitalize",children:[l," Access"]}),(0,f.jsxs)(n.Text,{style:{marginRight:"25px",fontSize:"15px",fontWeight:"700",marginTop:"5px",color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:()=>{A(!0),C(!1)},children:["View user's in ",l," role"]}),(0,f.jsx)(v.s_,{mt:"2"})]})}),(0,f.jsx)(v.cw,{overflow:"auto",height:"400px",children:(0,f.jsxs)(x.XI,{children:[(0,f.jsx)(x.d8,{children:null===E||void 0===E?void 0:E.map(((e,l)=>{var o;return(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,f.jsx)(x.Th,{sx:{width:"10px"},borderColor:z,display:!1===(null===e||void 0===e?void 0:e.display)&&"none",children:!1!==(null===e||void 0===e?void 0:e.display)&&(null===e||void 0===e?void 0:e.render("Header"))},l))))}))}),(0,f.jsx)(x.NN,{...G(),children:H?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===P||void 0===P?void 0:P.length,children:(0,f.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(h.A,{})})})}):0===(null===I||void 0===I?void 0:I.length)?(0,f.jsx)(x.Tr,{children:(0,f.jsx)(x.Td,{colSpan:null===P||void 0===P?void 0:P.length,children:(0,f.jsx)(n.Text,{textAlign:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===U||void 0===U?void 0:U.map(((e,l)=>{var o;return _(e),(0,d.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,l)=>{var o,i,t,s,a,r;let c="";return"title"===(null===e||void 0===e||null===(o=e.column)||void 0===o?void 0:o.Header)?c=(0,f.jsx)(n.Text,{me:"10px",color:b,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("create"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header)||"view"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)||"update"===(null===e||void 0===e||null===(s=e.column)||void 0===s?void 0:s.Header)||"delete"===(null===e||void 0===e||null===(a=e.column)||void 0===a?void 0:a.Header))&&(c=(0,f.jsx)(n.Text,{color:b,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?"Yes":"No"})),(0,d.createElement)(x.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e||null===(r=e.column)||void 0===r?void 0:r.Header)&&"none"}},c)})))}))})]})}),(0,f.jsxs)(v.jl,{children:[(0,f.jsx)(t.Button,{variant:"brand",size:"sm",onClick:()=>{W(!0),C(!1)},children:"Change Access"}),(0,f.jsx)(t.Button,{size:"sm",onClick:()=>C(!1),variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]}),(0,f.jsx)(S,{tableData:null!==o&&void 0!==o?o:[],accessRole:null!==o&&void 0!==o?o:[],setAccess:m,setRoleModal:C,columnsData:null!==a&&void 0!==a?a:[],_id:g,fetchData:i,name:l,setEditModal:W,setAction:c,editModal:D}),(0,f.jsx)(w,{isOpen:N,setRoleModal:C,setOpenUser:A,onOpen:y,columnsData:null!==T&&void 0!==T?T:[],tableData:null!==B&&void 0!==B?B:[],setAction:c,_id:g,fetchData:X,userdata:B})]})};var P=o(4034),H=o(8510),k=o(7682),D=o(2145),W=o(899);const N=e=>{const{onClose:l,isOpen:o,setAction:i}=e,[a,r]=(0,d.useState)(!1),c=W.object({roleName:W.string().required("Role Name is required"),description:W.string().required("Description is required")}),u=(0,g.Wx)({initialValues:{roleName:"",description:""},validationSchema:c,onSubmit:(e,l)=>{let{resetForm:o}=l;b(),o()}}),{errors:x,touched:p,values:m,handleBlur:j,handleChange:S,handleSubmit:y,setFieldValue:C,resetForm:T}=u,b=async()=>{try{r(!0);let n=await(0,s.d_)("api/role-access/add",m);var e,o;if(n&&200===(null===n||void 0===n?void 0:n.status))l(!1),i((e=>!e));else D.oR.error(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)}catch(n){console.log(n)}finally{r(!1)}};return(0,f.jsxs)(v.aF,{isOpen:o,isCentered:!0,children:[(0,f.jsx)(v.mH,{}),(0,f.jsxs)(v.$m,{children:[(0,f.jsxs)(v.rQ,{justifyContent:"space-between",display:"flex",children:["Add Role",(0,f.jsx)(t.IconButton,{onClick:()=>l(!1),icon:(0,f.jsx)(P.CloseIcon,{})})]}),(0,f.jsx)(v.cw,{children:(0,f.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,f.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Role Name",(0,f.jsx)(n.Text,{color:"red",children:"*"})]}),(0,f.jsx)(k.Input,{fontSize:"sm",onChange:S,onBlur:j,value:null===m||void 0===m?void 0:m.roleName,name:"roleName",placeholder:"Enter Role Name",fontWeight:"500",borderColor:null!==x&&void 0!==x&&x.roleName&&null!==p&&void 0!==p&&p.roleName?"red.300":null}),(0,f.jsxs)(n.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===x||void 0===x?void 0:x.roleName)&&(null===p||void 0===p?void 0:p.roleName)&&(null===x||void 0===x?void 0:x.roleName)]})]}),(0,f.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Description",(0,f.jsx)(n.Text,{color:"red",children:"*"})]}),(0,f.jsx)(k.Input,{fontSize:"sm",onChange:S,onBlur:j,value:null===m||void 0===m?void 0:m.description,name:"description",placeholder:"Enter Description",fontWeight:"500",borderColor:null!==x&&void 0!==x&&x.description&&null!==p&&void 0!==p&&p.description?"red.300":null}),(0,f.jsxs)(n.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===x||void 0===x?void 0:x.description)&&(null===p||void 0===p?void 0:p.description)&&(null===x||void 0===x?void 0:x.description)]})]})]})}),(0,f.jsxs)(v.jl,{children:[(0,f.jsx)(t.Button,{size:"sm",variant:"brand",mr:1,disabled:!!a,onClick:y,children:a?(0,f.jsx)(h.A,{}):"Save"}),(0,f.jsx)(t.Button,{size:"sm",variant:"outline",color:"red",colorScheme:"red",onClick:()=>{u.resetForm(),l(!1)},children:"Close"})]})]})]})},A=()=>{const{isOpen:e,onOpen:l,onClose:o}=(0,i.j1)(),[u,v]=(0,d.useState)(!1),[x,h]=(0,d.useState)([]),[p,m]=(0,d.useState)(""),[g,j]=(0,d.useState)(""),[S,y]=(0,d.useState)([]),[C,T]=(0,d.useState)(!1),[b,w]=(0,d.useState)(""),[P,H]=(0,d.useState)([]),k=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"Role Name",accessor:"roleName",cell:e=>(0,f.jsx)(n.Text,{me:"10px",onClick:()=>{var l,o,i,n;v(!0),w(null===e||void 0===e?void 0:e.value),m(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(o=l.original)||void 0===o?void 0:o._id),h(null===e||void 0===e||null===(i=e.row)||void 0===i||null===(n=i.original)||void 0===n?void 0:n.access)},color:"brand.600",sx:{"&:hover":{color:"blue.500",textDecoration:"underline",cursor:"pointer"}},fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})},{Header:"Description",accessor:"description"}],D=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"title",accessor:"title"},{Header:"create",accessor:"create",width:"20px"},{Header:"view",accessor:"view",width:"20px"},{Header:"update",accessor:"update",width:"20px"},{Header:"delete",accessor:"delete",width:"20px"}],[W,A]=(0,d.useState)(!1),[O,F]=(0,d.useState)(!1),[I,B]=(0,d.useState)([]),M=(0,c.Zp)(),R=async()=>{F(!0);let e=await(0,s.x4)("api/role-access");B(null===e||void 0===e?void 0:e.data),F(!1)};return(0,d.useEffect)((()=>{R()}),[W]),(0,f.jsxs)("div",{children:[(0,f.jsx)(a.A,{title:"Roles",isLoding:O,columnData:null!==k&&void 0!==k?k:[],allData:I||[],tableData:I,AdvanceSearch:!1,tableCustomFields:[],searchedDataOut:P,searchDisplay:C,setSearchDisplay:T,setSearchedDataOut:H,searchboxOutside:g,BackButton:(0,f.jsx)(t.Button,{onClick:()=>M("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,f.jsx)(r.m6W,{}),ml:2,children:"Back"}),deleteMany:!0,access:!0,checkBox:!1,getTagValuesOutSide:S,setGetTagValuesOutside:y,ManageGrid:!1,onOpen:l,customSearch:!0}),(0,f.jsx)(N,{isOpen:e,size:"sm",setAction:A,onClose:o}),x&&(0,f.jsx)(z,{isOpen:u,setRoleModal:v,onOpen:l,isLoding:O,columnsData:null!==D&&void 0!==D?D:[],name:b,_id:p,tableData:null!==x&&void 0!==x?x:[],setAccess:h,fetchData:R,setAction:A})]})}}}]);
//# sourceMappingURL=7083.bb080772.chunk.js.map