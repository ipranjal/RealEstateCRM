"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[1435],{2876:(e,l,o)=>{o(9488),o(5043),o(2145),o(4731),o(9849),o(9621),o(7508),o(4066),o(579)},4978:(e,l,o)=>{o.d(l,{A:()=>G});var i=o(4034),n=o(9942),s=o(2554),d=o(4450),t=o(8510),a=o(7682),r=o(3458),u=o(968),v=o(9488),c=o(5043),m=o(8860),p=o(1206),x=o(1778),h=o(5066),g=o(1094),j=o(216),f=o(6914),b=o(8152),S=o(5369),N=o(579);function y(e){const{columnsData:l,tableData:o,title:i,type:n,selectedValues:s,setSelectedValues:t}=e,a=(0,c.useMemo)((()=>l),[l]),r=(0,c.useMemo)((()=>o),[o]),[u,v]=(JSON.parse(localStorage.getItem("user")),(0,c.useState)()),m=(0,g.useTable)({columns:a,data:r,initialState:{pageIndex:0}},g.useGlobalFilter,g.useSortBy,g.usePagination),{getTableProps:y,getTableBodyProps:C,headerGroups:I,prepareRow:w,page:z,canPreviousPage:P,canNextPage:T,pageOptions:F,pageCount:k,gotoPage:B,nextPage:A,previousPage:G,setPageSize:R,state:{pageIndex:W,pageSize:L}}=m;(null===F||void 0===F?void 0:F.length)<u&&v(null===F||void 0===F?void 0:F.length);const E=(0,p.dU)("gray.500","white"),H=(0,p.dU)("gray.200","whiteAlpha.100"),O=(e,l)=>{var o,i;"multi"===n?null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&o.checked?t((e=>[...e,l])):t((e=>null===e||void 0===e?void 0:e.filter((e=>e!==l)))):null!==e&&void 0!==e&&null!==(i=e.target)&&void 0!==i&&i.checked?t(l):t(null)};return(0,N.jsxs)(j.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,N.jsx)(d.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,N.jsxs)(d.Text,{color:E,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[i," (",(0,N.jsx)(f.A,{targetNumber:null===r||void 0===r?void 0:r.length},null===r||void 0===r?void 0:r.length),")"]})}),(0,N.jsx)(d.Box,{overflowY:"auto",className:"table-container-property",children:(0,N.jsxs)(x.XI,{...y(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,N.jsx)(x.d8,{zIndex:1,children:null===I||void 0===I?void 0:I.map(((e,l)=>{var o;return(0,c.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,c.createElement)(x.Th,{...e.getHeaderProps(!1!==(null===e||void 0===e?void 0:e.isSortable)&&(null===e||void 0===e?void 0:e.getSortByToggleProps())),pe:"10px",key:l,borderColor:H},(0,N.jsxs)(d.Flex,{align:"center",justifyContent:null!==e&&void 0!==e&&e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,N.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:null===e||void 0===e?void 0:e.render("Header")}),!1!==(null===e||void 0===e?void 0:e.isSortable)&&(0,N.jsx)("span",{children:null!==e&&void 0!==e&&e.isSorted?null!==e&&void 0!==e&&e.isSortedDesc?(0,N.jsx)(S.GOR,{}):(0,N.jsx)(S.XhJ,{}):(0,N.jsx)(S.MjW,{})})]})))))}))}),(0,N.jsxs)(x.NN,{...C(),children:[0===(null===r||void 0===r?void 0:r.length)&&(0,N.jsx)(x.Tr,{children:(0,N.jsx)(x.Td,{colSpan:a.length,children:(0,N.jsx)(d.Text,{textAlign:"center",width:"100%",color:E,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===z||void 0===z?void 0:z.map(((e,l)=>{var o;return w(e),(0,c.createElement)(x.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,l)=>{var o,i,t;let a="";var r;"#"===(null===e||void 0===e||null===(o=e.column)||void 0===o?void 0:o.Header)?a=(0,N.jsxs)(d.Flex,{align:"center",children:["multi"===n?(0,N.jsx)(h.Sc,{colorScheme:"brandScheme",value:s,isChecked:null===s||void 0===s?void 0:s.includes(null===e||void 0===e?void 0:e.value),onChange:l=>O(l,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,N.jsx)(h.Sc,{colorScheme:"brandScheme",value:s,isChecked:s===(null===e||void 0===e?void 0:e.value),onChange:l=>O(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,N.jsx)(d.Text,{color:E,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.index)+1})]}):("Role Name"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header)||"Description"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header))&&(a=(0,N.jsx)(d.Text,{me:"10px",color:E,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,c.createElement)(x.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},a)})))}))]})]})}),(null===r||void 0===r?void 0:r.length)>5&&(0,N.jsx)(b.A,{gotoPage:B,gopageValue:u,setGopageValue:v,pageCount:k,canPreviousPage:P,previousPage:G,canNextPage:T,pageOptions:F,setPageSize:R,nextPage:A,pageSize:L,pageIndex:W})]})}const C=e=>{var l,o;const{onClose:i,isOpen:t,fieldName:a,setFieldValue:r,data:u,role:p}=e,[x,h]=(0,c.useState)([]),[g,j]=(0,c.useState)([]),[f,b]=(0,c.useState)(!1),S=(JSON.parse(localStorage.getItem("user")),[...new Set(x)]),C=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"Role Name",accessor:"roleName"},{Header:"Description",accessor:"description"}];return(0,N.jsxs)(n.aF,{onClose:i,size:"full",isOpen:t,children:[(0,N.jsx)(n.mH,{}),(0,N.jsxs)(n.$m,{children:[(0,N.jsx)(n.rQ,{children:"Select Role"}),(0,N.jsx)(n.s_,{}),(0,N.jsx)(n.cw,{children:f?(0,N.jsx)(d.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,N.jsx)(v.A,{})}):(0,N.jsx)(y,{title:"Role",isLoding:f,allData:p,tableData:p,type:"multi",tableCustomFields:(null===g||void 0===g||null===(l=g[0])||void 0===l||null===(o=l.fields)||void 0===o?void 0:o.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],selectedValues:x,setSelectedValues:h,columnsData:null!==C&&void 0!==C?C:[]})}),(0,N.jsxs)(n.jl,{children:[(0,N.jsxs)(s.Button,{variant:"brand",onClick:async()=>{try{b(!0),r(a,S),i()}catch(e){console.log(e)}finally{b(!1)}},disabled:!!f,leftIcon:(0,N.jsx)(m.NLY,{}),children:[" ",f?(0,N.jsx)(v.A,{}):"Select"]}),(0,N.jsx)(s.Button,{onClick:()=>i(),children:"Close"})]})]})]})};var I=o(3516),w=o(3388),z=o(7149),P=o(2285),T=o(7508),F=o(2145),k=o(9849),B=o(9621),A=o(4066);const G=e=>{var l;const{onClose:o,isOpen:m,setAction:p,data:x,userAction:h,userData:g,selectedId:j,fetchData:f,setUserAction:b}=e,[S,y]=(0,c.useState)(!1),[G,R]=c.useState(!1),[W,L]=c.useState([]),[E,H]=(0,c.useState)(!1),[O,D]=(0,c.useState)([]),V=(0,T.wA)(),_={firstName:"add"===h?"":null===x||void 0===x?void 0:x.firstName,lastName:"add"===h?"":null===x||void 0===x?void 0:x.lastName,username:"add"===h?"":null===x||void 0===x?void 0:x.username,phoneNumber:"add"===h?"":null===x||void 0===x?void 0:x.phoneNumber,password:"add"===h?"":null===x||void 0===x?void 0:x.password,roles:"add"===h?[]:null===x||void 0===x||null===(l=x.roles)||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e._id))},J=JSON.parse(window.localStorage.getItem("user")),U=(0,I.Wx)({initialValues:_,validationSchema:k.vJ,enableReinitialize:!0,onSubmit:e=>{ee()}}),{errors:M,touched:X,values:Y,handleBlur:$,handleChange:Q,handleSubmit:q,setFieldValue:K,resetForm:Z}=U,ee=async()=>{if("add"===h)try{y(!0);let i=await(0,B.d_)("api/user/register",Y);var e,l;if(i&&200===(null===i||void 0===i?void 0:i.status))Z(),p((e=>!e)),b(""),o();else F.oR.error(null===i||void 0===i||null===(e=i.response)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)}catch(s){console.log(s)}finally{y(!1)}else if("edit"===h)try{y(!0);let e=await(0,B.yP)(`api/user/edit/${j}`,Y);if(e&&200===(null===e||void 0===e?void 0:e.status)){if(f(),(null===J||void 0===J?void 0:J._id)===j){let e=x;e&&"object"===typeof e&&(e={...e,firstName:null===Y||void 0===Y?void 0:Y.firstName,lastName:null===Y||void 0===Y?void 0:Y.lastName});const l=JSON.stringify(e);localStorage.setItem("user",l),V((0,A.gV)(l))}b(""),p((e=>!e)),o()}else{var i,n;F.oR.error(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}}catch(s){console.log(s)}finally{y(!1)}};return(0,c.useEffect)((()=>{(async()=>{var e;y(!0);let l=await(0,B.x4)("api/role-access");L(null===(e=l.data)||void 0===e?void 0:e.map((e=>({...e,value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.roleName})))),y(!1)})()}),[]),(0,N.jsxs)(n.aF,{isOpen:m,isCentered:!0,children:[(0,N.jsx)(n.mH,{}),(0,N.jsxs)(n.$m,{children:[(0,N.jsxs)(n.rQ,{justifyContent:"space-between",display:"flex",children:["add"===h?"Add":"Edit"," User",(0,N.jsx)(s.IconButton,{onClick:o,icon:(0,N.jsx)(i.CloseIcon,{})})]}),(0,N.jsxs)(n.cw,{children:[(0,N.jsxs)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,N.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,N.jsxs)(t.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["First Name",(0,N.jsx)(d.Text,{color:"red",children:"*"})]}),(0,N.jsx)(a.Input,{fontSize:"sm",onChange:Q,onBlur:$,value:null===Y||void 0===Y?void 0:Y.firstName,name:"firstName",placeholder:"firstName",fontWeight:"500",borderColor:null!==M&&void 0!==M&&M.firstName&&null!==X&&void 0!==X&&X.firstName?"red.300":null}),(0,N.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===M||void 0===M?void 0:M.firstName)&&(null===X||void 0===X?void 0:X.firstName)&&(null===M||void 0===M?void 0:M.firstName)]})]}),(0,N.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,N.jsx)(t.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Last Name"}),(0,N.jsx)(a.Input,{fontSize:"sm",onChange:Q,onBlur:$,value:null===Y||void 0===Y?void 0:Y.lastName,name:"lastName",placeholder:"Last Name",fontWeight:"500",borderColor:null!==M&&void 0!==M&&M.lastName&&null!==X&&void 0!==X&&X.lastName?"red.300":null}),(0,N.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===M||void 0===M?void 0:M.lastName)&&(null===X||void 0===X?void 0:X.lastName)&&(null===M||void 0===M?void 0:M.lastName)]})]}),(0,N.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,N.jsxs)(d.Flex,{alignItems:"end",justifyContent:"space-between",children:[(0,N.jsx)(d.Text,{w:"100%",children:(0,N.jsx)(u.CUIAutoComplete,{label:"Choose Role",placeholder:"Type a Name",name:"roles",items:W,mb:null!==M&&void 0!==M&&M.roles&&null!==X&&void 0!==X&&X.roles?void 0:"10px",className:"custom-autoComplete",selectedItems:null===W||void 0===W?void 0:W.filter((e=>{var l;return null===Y||void 0===Y||null===(l=Y.roles)||void 0===l?void 0:l.includes(null===e||void 0===e?void 0:e._id)})),onSelectedItemsChange:e=>{const l=null===(o=null===e||void 0===e?void 0:e.selectedItems)||void 0===o?void 0:o.map((e=>null===e||void 0===e?void 0:e._id));var o;K("roles",l)},borderColor:null!==M&&void 0!==M&&M.roles&&null!==X&&void 0!==X&&X.roles?"red.300":null})}),(0,N.jsx)(s.IconButton,{mb:6,onClick:()=>H(!0),fontSize:"25px",icon:(0,N.jsx)(w.G2h,{})})]}),(0,N.jsx)(d.Text,{color:"red",children:(null===M||void 0===M?void 0:M.roles)&&(null===X||void 0===X?void 0:X.roles)&&(null===M||void 0===M?void 0:M.roles)})]}),(0,N.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,N.jsxs)(t.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Email",(0,N.jsx)(d.Text,{color:"red",children:"*"})]}),(0,N.jsx)(a.Input,{fontSize:"sm",type:"email",onChange:Q,onBlur:$,value:null===Y||void 0===Y?void 0:Y.username,name:"username",disabled:"edit"===h,placeholder:"Email Address",fontWeight:"500",borderColor:null!==M&&void 0!==M&&M.username&&null!==X&&void 0!==X&&X.username?"red.300":null}),(0,N.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===M||void 0===M?void 0:M.username)&&(null===X||void 0===X?void 0:X.username)&&(null===M||void 0===M?void 0:M.username)]})]}),(0,N.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,N.jsxs)(t.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Phone Number",(0,N.jsx)(d.Text,{color:"red",children:"*"})]}),(0,N.jsxs)(a.InputGroup,{children:[(0,N.jsx)(a.InputLeftElement,{pointerEvents:"none",children:(0,N.jsx)(i.PhoneIcon,{color:"gray.300",borderRadius:"16px"})}),(0,N.jsx)(a.Input,{type:"tel",fontSize:"sm",onChange:Q,onBlur:$,value:null===Y||void 0===Y?void 0:Y.phoneNumber,name:"phoneNumber",fontWeight:"500",borderColor:null!==M&&void 0!==M&&M.phoneNumber&&null!==X&&void 0!==X&&X.phoneNumber?"red.300":null,placeholder:"Phone number",borderRadius:"16px"})]}),(0,N.jsx)(d.Text,{mb:"10px",color:"red",children:(null===M||void 0===M?void 0:M.phoneNumber)&&(null===X||void 0===X?void 0:X.phoneNumber)&&(null===M||void 0===M?void 0:M.phoneNumber)})]}),"edit"!==h&&(0,N.jsxs)(d.GridItem,{colSpan:{base:12},children:[(0,N.jsx)(t.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Password"}),(0,N.jsxs)(a.InputGroup,{size:"md",children:[(0,N.jsx)(a.Input,{isRequired:!0,fontSize:"sm",placeholder:"Enter Your Password",name:"password",size:"lg",variant:"auth",type:G?"text":"password",value:null===Y||void 0===Y?void 0:Y.password,onChange:Q,onBlur:$,borderColor:null!==M&&void 0!==M&&M.password&&null!==X&&void 0!==X&&X.password?"red.300":null,className:null!==M&&void 0!==M&&M.password&&null!==X&&void 0!==X&&X.password?"isInvalid":null}),(0,N.jsx)(a.InputRightElement,{display:"flex",alignItems:"center",mt:"4px",children:(0,N.jsx)(r.In,{color:"gray.400",_hover:{cursor:"pointer"},as:G?P.B6J:z.kIi,onClick:()=>R(!G)})})]}),(0,N.jsxs)(d.Text,{mb:"10px",color:"red",children:[" ",(null===M||void 0===M?void 0:M.password)&&(null===X||void 0===X?void 0:X.password)&&(null===M||void 0===M?void 0:M.password)]})]})]}),(0,N.jsx)(C,{isOpen:E,data:O,role:W,onClose:()=>H(!1),isLoding:S,setIsLoding:y,fieldName:"roles",setFieldValue:K})]}),(0,N.jsxs)(n.jl,{children:[(0,N.jsx)(s.Button,{variant:"brand",size:"sm",disabled:!!S,onClick:q,children:S?(0,N.jsx)(v.A,{}):"Save"}),(0,N.jsx)(s.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{U.resetForm(),o()},children:"Close"})]})]})]})}},9201:(e,l,o)=>{o(9488),o(5043),o(2145),o(9849),o(9621),o(579)}}]);
//# sourceMappingURL=1435.e4fab080.chunk.js.map