(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[3136],{446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,i="millisecond",l="second",a="minute",o="hour",r="day",s="week",d="month",c="quarter",u="year",v="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},p=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},g={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),l=n%60;return(t<=0?"+":"-")+p(i,2,"0")+":"+p(l,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),l=t.clone().add(i,d),a=n-l<0,o=t.clone().add(i+(a?-1:1),d);return+(-(i+(n-l)/(a?l-o:o-l))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:s,d:r,D:v,h:o,m:a,s:l,ms:i,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=f;var j="$isDayjsObject",C=function(e){return e instanceof B||!(!e||!e[j])},b=function e(t,n,i){var l;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();S[a]&&(l=a),n&&(S[a]=n,l=a);var o=t.split("-");if(!l&&o.length>1)return e(o[0])}else{var r=t.name;S[r]=t,l=r}return!i&&l&&(y=l),l||!i&&y},$=function(e,t){if(C(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new B(n)},D=g;D.l=b,D.i=C,D.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var B=function(){function f(e){this.$L=b(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[j]=!0}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(D.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(m);if(i){var l=i[2]-1||0,a=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return D},p.isValid=function(){return!(this.$d.toString()===h)},p.isSame=function(e,t){var n=$(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return $(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<$(e)},p.$g=function(e,t,n){return D.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var n=this,i=!!D.u(t)||t,c=D.p(e),h=function(e,t){var l=D.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?l:l.endOf(r)},m=function(e,t){return D.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},x=this.$W,f=this.$M,p=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case u:return i?h(1,0):h(31,11);case d:return i?h(1,f):h(0,f+1);case s:var y=this.$locale().weekStart||0,S=(x<y?x+7:x)-y;return h(i?p-S:p+(6-S),f);case r:case v:return m(g+"Hours",0);case o:return m(g+"Minutes",1);case a:return m(g+"Seconds",2);case l:return m(g+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var n,s=D.p(e),c="set"+(this.$u?"UTC":""),h=(n={},n[r]=c+"Date",n[v]=c+"Date",n[d]=c+"Month",n[u]=c+"FullYear",n[o]=c+"Hours",n[a]=c+"Minutes",n[l]=c+"Seconds",n[i]=c+"Milliseconds",n)[s],m=s===r?this.$D+(t-this.$W):t;if(s===d||s===u){var x=this.clone().set(v,1);x.$d[h](m),x.init(),this.$d=x.set(v,Math.min(this.$D,x.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[D.p(e)]()},p.add=function(i,c){var v,h=this;i=Number(i);var m=D.p(c),x=function(e){var t=$(h);return D.w(t.date(t.date()+Math.round(e*i)),h)};if(m===d)return this.set(d,this.$M+i);if(m===u)return this.set(u,this.$y+i);if(m===r)return x(1);if(m===s)return x(7);var f=(v={},v[a]=t,v[o]=n,v[l]=e,v)[m]||1,p=this.$d.getTime()+i*f;return D.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var i=e||"YYYY-MM-DDTHH:mm:ssZ",l=D.z(this),a=this.$H,o=this.$m,r=this.$M,s=n.weekdays,d=n.months,c=n.meridiem,u=function(e,n,l,a){return e&&(e[n]||e(t,i))||l[n].slice(0,a)},v=function(e){return D.s(a%12||12,e,"0")},m=c||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(x,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return D.s(t.$y,4,"0");case"M":return r+1;case"MM":return D.s(r+1,2,"0");case"MMM":return u(n.monthsShort,r,d,3);case"MMMM":return u(d,r);case"D":return t.$D;case"DD":return D.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(n.weekdaysMin,t.$W,s,2);case"ddd":return u(n.weekdaysShort,t.$W,s,3);case"dddd":return s[t.$W];case"H":return String(a);case"HH":return D.s(a,2,"0");case"h":return v(1);case"hh":return v(2);case"a":return m(a,o,!0);case"A":return m(a,o,!1);case"m":return String(o);case"mm":return D.s(o,2,"0");case"s":return String(t.$s);case"ss":return D.s(t.$s,2,"0");case"SSS":return D.s(t.$ms,3,"0");case"Z":return l}return null}(e)||l.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(i,v,h){var m,x=this,f=D.p(v),p=$(i),g=(p.utcOffset()-this.utcOffset())*t,y=this-p,S=function(){return D.m(x,p)};switch(f){case u:m=S()/12;break;case d:m=S();break;case c:m=S()/3;break;case s:m=(y-g)/6048e5;break;case r:m=(y-g)/864e5;break;case o:m=y/n;break;case a:m=y/t;break;case l:m=y/e;break;default:m=y}return h?m:D.a(m)},p.daysInMonth=function(){return this.endOf(d).$D},p.$locale=function(){return S[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=b(e,t,!0);return i&&(n.$L=i),n},p.clone=function(){return D.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),w=B.prototype;return $.prototype=w,[["$ms",i],["$s",l],["$m",a],["$H",o],["$W",r],["$M",d],["$y",u],["$D",v]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,B,$),e.$i=!0),$},$.locale=b,$.isDayjs=C,$.unix=function(e){return $(1e3*e)},$.en=S[y],$.Ls=S,$.p={},$}()},3136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var i=n(5043),l=n(3216),a=n(5475),o=n(4034),r=n(9754),s=n(4450),d=n(5376),c=n(2554),u=n(9621),v=n(5574),h=n(8031),m=n(7368),x=n(6178),f=n.n(x),p=n(9942),g=n(8510),y=n(5104),S=n(4626),j=n(7682),C=n(3186),b=n(9565),$=n(1125),D=n(4614),B=(n(1716),n(9488)),w=n(446),L=n.n(w),N=n(3516),T=n(3388),A=n(9849),z=n(8757),O=n(968),M=n(579);const _=e=>{const{onClose:t,isOpen:n,setAction:l,data:a}=e,[o,r]=(0,i.useState)(!1),[d,v]=(0,i.useState)([]),[h,m]=(0,i.useState)([]),[x,f]=(0,i.useState)(!1),[w,_]=(0,i.useState)(!1),[I,W]=(0,i.useState)(!1),[F,k]=(0,i.useState)([]),[H,V]=(0,i.useState)([]),[G,Y]=(0,i.useState)(!1),[R,E]=(0,i.useState)([]),U=JSON.parse(localStorage.getItem("user")),J=(new Date).toISOString().split(".")[0],P={sender:null===U||void 0===U?void 0:U._id,recipient:"",callDuration:"",callNotes:"",createByContact:"",createByLead:"",property:"",startDate:"",category:"contact",createBy:null===U||void 0===U?void 0:U._id,salesAgent:""},Z=(0,N.Wx)({initialValues:P,validationSchema:A.Ar,onSubmit:(e,t)=>{let{resetForm:n}=t;ie(),n()}}),{errors:Q,touched:q,values:K,handleBlur:X,handleChange:ee,handleSubmit:te,setFieldValue:ne}=Z,ie=async()=>{try{r(!0);let t=await(0,u.d_)("api/phoneCall/add",K);200===(null===t||void 0===t?void 0:t.status)&&(null===e||void 0===e||e.onClose(),l((e=>!e)))}catch(t){console.log(t)}finally{r(!1)}};(0,i.useEffect)((async()=>{K.start=null===e||void 0===e?void 0:e.date;try{let e;var t;if("Contact"===(null===K||void 0===K?void 0:K.category)&&(null===h||void 0===h?void 0:h.length)<=0)e=await(0,u.x4)("superAdmin"===(null===U||void 0===U?void 0:U.role)?"api/contact/":`api/contact/?createBy=${U._id}`),m(null===(t=e)||void 0===t?void 0:t.data);else if("Lead"===(null===K||void 0===K?void 0:K.category)&&(null===d||void 0===d?void 0:d.length)<=0){var n;e=await(0,u.x4)("superAdmin"===(null===U||void 0===U?void 0:U.role)?"api/lead/":`api/lead/?createBy=${null===U||void 0===U?void 0:U._id}`),v(null===(n=e)||void 0===n?void 0:n.data)}else if("property"===(null===K||void 0===K?void 0:K.category)&&console.log(""),(null===F||void 0===F?void 0:F.length)<=0){var i;e=await(0,u.x4)("superAdmin"===(null===U||void 0===U?void 0:U.role)?"api/property":`api/property/?createBy=${null===U||void 0===U?void 0:U._id}`),k(null===(i=e)||void 0===i?void 0:i.data)}}catch(l){console.log(l)}}),[null===e||void 0===e?void 0:e.date,null===K||void 0===K?void 0:K.category]);(0,i.useEffect)((()=>{(async()=>{if(null!==K&&void 0!==K&&K.createByContact){let e=null===h||void 0===h?void 0:h.find((e=>(null===e||void 0===e?void 0:e._id)===(null===K||void 0===K?void 0:K.createByContact)));e&&ne("recipient",null===e||void 0===e?void 0:e.phoneNumber)}else if(null!==K&&void 0!==K&&K.createByLead){let e=null===d||void 0===d?void 0:d.find((e=>(null===e||void 0===e?void 0:e._id)===(null===K||void 0===K?void 0:K.createByLead)));e&&ne("recipient",null===e||void 0===e?void 0:e.leadPhoneNumber)}else ne("recipient","")})()}),[null===K||void 0===K?void 0:K.createByContact,null===K||void 0===K?void 0:K.createByLead]),(0,i.useEffect)((()=>{(async()=>{r(!0);try{var e,t;let n=await(0,u.x4)("api/user/"),i=(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.filter((e=>{var t;return null===e||void 0===e||null===(t=e.roles)||void 0===t?void 0:t.some((e=>"Sales"===(null===e||void 0===e?void 0:e.roleName)))})))||[];V(i)}catch(n){console.error("Failed to fetch users data:",n)}finally{r(!1)}})()}),[]);const le=null===F||void 0===F?void 0:F.map((e=>({...e,value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.name})));return(0,M.jsxs)(p.aF,{onClose:t,isOpen:n,isCentered:!0,children:[(0,M.jsx)(p.mH,{}),(0,M.jsxs)(p.$m,{children:[(0,M.jsx)(p.rQ,{children:"Add Call"}),(0,M.jsx)(p.s_,{}),(0,M.jsxs)(p.cw,{children:[(0,M.jsx)(b.A,{isOpen:x,data:h,onClose:f,fieldName:"createByContact",setFieldValue:ne}),(0,M.jsx)($.A,{isOpen:w,data:d,onClose:_,fieldName:"createByLead",setFieldValue:ne}),(0,M.jsx)(D.A,{onClose:()=>Y(!1),isOpen:G,fieldName:"salesAgent",setFieldValue:ne,data:H,isLoding:o,setIsLoding:r}),(0,M.jsx)(z.A,{onClose:()=>W(!1),isOpen:I,data:F,isLoding:o,setIsLoding:r,fieldName:"property",setFieldValue:ne,columnsData:null!==R&&void 0!==R?R:[]}),(0,M.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,M.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,M.jsx)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Related"}),(0,M.jsx)(y.z6,{onChange:e=>{ne("category",e),ne("createByContact",""),ne("createByLead",""),ne("property","")},value:null===K||void 0===K?void 0:K.category,children:(0,M.jsxs)(s.Stack,{direction:"row",children:[(0,M.jsx)(y.sx,{value:"Contact",children:"Contact"}),(0,M.jsx)(y.sx,{value:"Lead",children:"Lead"})]})}),(0,M.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.category)&&(null===q||void 0===q?void 0:q.category)&&(null===Q||void 0===Q?void 0:Q.category)]})]}),(0,M.jsx)(s.GridItem,{colSpan:{base:12},children:"Contact"===(null===K||void 0===K?void 0:K.category)?(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,M.jsx)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Contact)"}),(0,M.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,M.jsx)(S.l6,{value:null===K||void 0===K?void 0:K.createByContact,name:"createByContact",onChange:ee,mb:null!==Q&&void 0!==Q&&Q.createByContact&&null!==q&&void 0!==q&&q.createByContact?void 0:"10px",fontWeight:"500",placeholder:"Assign To",borderColor:null!==Q&&void 0!==Q&&Q.createByContact&&null!==q&&void 0!==q&&q.createByContact?"red.300":null,children:null===h||void 0===h?void 0:h.map((e=>(0,M.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:"Contact"===K.category?`${null===e||void 0===e?void 0:e.fullName}`:null===e||void 0===e?void 0:e.leadName},null===e||void 0===e?void 0:e._id)))}),(0,M.jsx)(c.IconButton,{onClick:()=>f(!0),ml:2,fontSize:"25px",icon:(0,M.jsx)(T.G2h,{})})]}),(0,M.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.createByContact)&&(null===q||void 0===q?void 0:q.createByContact)&&(null===Q||void 0===Q?void 0:Q.createByContact)]})]})}):"Lead"===(null===K||void 0===K?void 0:K.category)?(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,M.jsx)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Lead)"}),(0,M.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,M.jsx)(S.l6,{value:null===K||void 0===K?void 0:K.createByLead,name:"createByLead",onChange:ee,mb:null!==Q&&void 0!==Q&&Q.createByLead&&null!==q&&void 0!==q&&q.createByLead?void 0:"10px",fontWeight:"500",placeholder:"Assign To",borderColor:null!==Q&&void 0!==Q&&Q.createByLead&&null!==q&&void 0!==q&&q.createByLead?"red.300":null,children:null===d||void 0===d?void 0:d.map((e=>(0,M.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:"Contact"===K.category?`${null===e||void 0===e?void 0:e.firstName} ${null===e||void 0===e?void 0:e.lastName}`:null===e||void 0===e?void 0:e.leadName},null===e||void 0===e?void 0:e._id)))}),(0,M.jsx)(c.IconButton,{onClick:()=>_(!0),ml:2,fontSize:"25px",icon:(0,M.jsx)(T.G2h,{})})]}),(0,M.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.createByLead)&&(null===q||void 0===q?void 0:q.createByLead)&&(null===Q||void 0===Q?void 0:Q.createByLead)]})]})}):""}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,M.jsxs)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,M.jsx)(s.Text,{color:"red",children:"*"})]}),(0,M.jsx)(j.Input,{fontSize:"sm",disabled:!0,value:null!==K&&void 0!==K&&K.recipient?null===K||void 0===K?void 0:K.recipient:"",name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:null!==Q&&void 0!==Q&&Q.recipient&&null!==q&&void 0!==q&&q.recipient?"red.300":null})]}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,M.jsxs)(s.Flex,{alignItems:"end",justifyContent:"space-between",children:[(0,M.jsx)(s.Text,{w:"100%",children:(0,M.jsx)(O.CUIAutoComplete,{label:"Property",items:le,selectedItems:null===le||void 0===le?void 0:le.filter((e=>{var t;return null===K||void 0===K||null===(t=K.property)||void 0===t?void 0:t.includes(null===e||void 0===e?void 0:e._id)})),onSelectedItemsChange:e=>{const t=null===(n=null===e||void 0===e?void 0:e.selectedItems)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e._id));var n;ne("property",t)},value:null===K||void 0===K?void 0:K.property,name:"property",onChange:ee,mb:null!==Q&&void 0!==Q&&Q.property&&null!==q&&void 0!==q&&q.property?void 0:"10px",fontWeight:"500",placeholder:"Assign To Property",borderColor:null!==Q&&void 0!==Q&&Q.property&&null!==q&&void 0!==q&&q.property?"red.300":null})}),(0,M.jsx)(c.IconButton,{mb:6,onClick:()=>W(!0),fontSize:"25px",icon:(0,M.jsx)(T.G2h,{})})]}),(0,M.jsxs)(s.Text,{color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.attendes)&&(null===q||void 0===q?void 0:q.attendes)&&(null===Q||void 0===Q?void 0:Q.attendes)]})]}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,M.jsxs)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,M.jsx)(s.Text,{color:"red",children:"*"})]}),(0,M.jsx)(j.Input,{type:"datetime-local",fontSize:"sm",onChange:ee,onBlur:X,min:L()(J).format("YYYY-MM-DD HH:mm"),value:null===K||void 0===K?void 0:K.startDate,name:"startDate",fontWeight:"500",borderColor:null!==Q&&void 0!==Q&&Q.startDate&&null!==q&&void 0!==q&&q.startDate?"red.300":null}),(0,M.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.startDate)&&(null===q||void 0===q?void 0:q.startDate)&&(null===Q||void 0===Q?void 0:Q.startDate)]})]}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,M.jsxs)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,M.jsx)(s.Text,{color:"red",children:"*"})]}),(0,M.jsx)(j.Input,{fontSize:"sm",onChange:ee,onBlur:X,value:null===K||void 0===K?void 0:K.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:null!==Q&&void 0!==Q&&Q.callDuration&&null!==q&&void 0!==q&&q.callDuration?"red.300":null}),(0,M.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.callDuration)&&(null===q||void 0===q?void 0:q.callDuration)&&(null===Q||void 0===Q?void 0:Q.callDuration)]})]}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,M.jsxs)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Assign To Sales Agent ",(0,M.jsx)(s.Text,{color:"red",children:"*"})]}),(0,M.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,M.jsx)(S.l6,{value:null===K||void 0===K?void 0:K.salesAgent,name:"salesAgent",onChange:ee,mb:null!==Q&&void 0!==Q&&Q.salesAgent&&null!==q&&void 0!==q&&q.salesAgent?void 0:"10px",fontWeight:"500",placeholder:"Assign To Sales Agent",borderColor:null!==Q&&void 0!==Q&&Q.salesAgent&&null!==q&&void 0!==q&&q.salesAgent?"red.300":null,children:null===H||void 0===H?void 0:H.map((e=>(0,M.jsx)("option",{value:e._id,children:`${e.firstName} ${e.lastName}`},e._id)))}),(0,M.jsx)(c.IconButton,{onClick:()=>Y(!0),ml:2,fontSize:"25px",icon:(0,M.jsx)(T.G2h,{})})]}),(0,M.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.salesAgent)&&(null===q||void 0===q?void 0:q.salesAgent)&&(null===Q||void 0===Q?void 0:Q.salesAgent)]})]}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,M.jsx)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,M.jsx)(C.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:ee,onBlur:X,value:null===K||void 0===K?void 0:K.callNotes,name:"callNotes",fontWeight:"500",borderColor:null!==Q&&void 0!==Q&&Q.callNotes&&null!==q&&void 0!==q&&q.callNotes?"red.300":null}),(0,M.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===Q||void 0===Q?void 0:Q.callNotes)&&(null===q||void 0===q?void 0:q.callNotes)&&(null===Q||void 0===Q?void 0:Q.callNotes)]})]})]})]}),(0,M.jsxs)(p.jl,{children:[(0,M.jsx)(c.Button,{variant:"brand",size:"sm",disabled:!!o,onClick:te,children:o?(0,M.jsx)(B.A,{}):"Save"}),(0,M.jsx)(c.Button,{size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{Z.resetForm(),t()},children:"Close"})]})]})]})};var I=n(7149),W=n(4960),F=n(899),k=n(3017),H=n(7508);const V=e=>{const{state:t,allData:n,advanceSearch:i,setAdvanceSearch:l,isLoding:a,setSearchedData:o,setDisplaySearchData:r,setSearchClear:d,setSearchbox:u}=e,v=(0,H.wA)(),h=F.object({senderName:F.string(),realetedTo:F.string(),createByName:F.string()}),m=(0,N.Wx)({initialValues:{senderName:"",realetedTo:"",createByName:""},validationSchema:h,onSubmit:(e,t)=>{let{resetForm:i}=t;v((0,k.gB)(e)),v((0,k.DW)({values:e,allData:n,type:"Calls"}));const a=[{name:["senderName"],value:e.senderName},{name:["realetedTo"],value:e.realetedTo},{name:["createByName"],value:e.createByName}];v((0,k.Tr)(null===a||void 0===a?void 0:a.filter((e=>null===e||void 0===e?void 0:e.value)))),r(!0),l(!1),i(),u("")}}),{errors:x,touched:f,values:y,handleBlur:C,handleChange:b,handleSubmit:$,setFieldValue:D,resetForm:w,dirty:L}=m;return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(p.aF,{onClose:()=>{l(!1),w()},isOpen:i,isCentered:!0,children:[(0,M.jsx)(p.mH,{}),(0,M.jsxs)(p.$m,{children:[(0,M.jsx)(p.rQ,{children:"Advance Search"}),(0,M.jsx)(p.s_,{onClick:()=>{l(!1),w()}}),(0,M.jsx)(p.cw,{children:(0,M.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,M.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,M.jsx)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Sender Name"}),(0,M.jsx)(j.Input,{fontSize:"sm",onChange:b,onBlur:C,value:null===y||void 0===y?void 0:y.senderName,name:"senderName",placeholder:"Enter senderName",fontWeight:"500"}),(0,M.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===x||void 0===x?void 0:x.senderName)&&(null===f||void 0===f?void 0:f.senderName)&&(null===x||void 0===x?void 0:x.senderName)]})]}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,M.jsx)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Realeted To"}),(0,M.jsxs)(S.l6,{value:null===y||void 0===y?void 0:y.realetedTo,fontSize:"sm",name:"realetedTo",onChange:b,fontWeight:"500",placeholder:"Select Realeted To",children:[(0,M.jsx)("option",{value:"contact",children:"Contact"}),(0,M.jsx)("option",{value:"lead",children:"Lead"})]}),(0,M.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===x||void 0===x?void 0:x.realetedTo)&&(null===f||void 0===f?void 0:f.realetedTo)&&(null===x||void 0===x?void 0:x.realetedTo)]})]}),(0,M.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,M.jsx)(g.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Recipient"}),(0,M.jsx)(j.Input,{fontSize:"sm",onChange:b,onBlur:C,value:null===y||void 0===y?void 0:y.createByName,name:"createByName",placeholder:"Enter Recipient",fontWeight:"500"}),(0,M.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===x||void 0===x?void 0:x.createByName)&&(null===f||void 0===f?void 0:f.createByName)&&(null===x||void 0===x?void 0:x.createByName)]})]})]})}),(0,M.jsxs)(p.jl,{children:[(0,M.jsx)(c.Button,{size:"sm",variant:"brand",mr:2,onClick:$,disabled:!(!a&&L),children:a?(0,M.jsx)(B.A,{}):"Search"}),(0,M.jsx)(c.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>w(),children:"Clear"})]})]})]})})};var G=n(4809);const Y=(0,G.zD)("fetchPhoneCallData",(async()=>{const e=JSON.parse(localStorage.getItem("user"));try{return await(0,u.x4)("superAdmin"===e.role?"api/phoneCall":`api/phoneCall?sender=${e._id}`)}catch(t){throw t}}));(0,G.Z0)({name:"phoneCallData",initialState:{data:[],isLoading:!1,error:""},extraReducers:e=>{e.addCase(Y.pending,(e=>{e.isLoading=!0})).addCase(Y.fulfilled,((e,t)=>{e.isLoading=!1,e.data=t.payload,e.error=""})).addCase(Y.rejected,((e,t)=>{e.isLoading=!1,e.data=[],e.error=t.error.message}))}}).reducer;var R=n(2145);const E=e=>{const[t,n]=(0,i.useState)(!1),{isOpen:u,onOpen:x,onClose:p}=(0,r.j1)(),[g,y]=(0,i.useState)(!1),[S,j]=(0,i.useState)([]),[C,b]=(0,i.useState)(!1),[$,D]=(0,i.useState)([]),[B,w]=(0,i.useState)(""),L=(JSON.parse(localStorage.getItem("user")),(0,l.Zp)()),[N,T]=(0,i.useState)(!1),[A,z]=(0,i.useState)([]),[O,F]=(0,i.useState)(!1),[k,G]=(0,i.useState)([]),E=(0,H.wA)(),[U,J,P]=(0,v.h)(["Calls","Leads","Contacts"]),Z={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var t;let{row:n}=e;return(0,M.jsx)(s.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,M.jsxs)(d.W1,{isLazy:!0,children:[(0,M.jsx)(d.IU,{children:(0,M.jsx)(m.txp,{})}),(0,M.jsxs)(d.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===U||void 0===U?void 0:U.view)&&(0,M.jsx)(d.Dr,{py:2.5,color:"green",onClick:()=>L(`/phone-call/${null===n||void 0===n?void 0:n.values._id}`),icon:(0,M.jsx)(o.ViewIcon,{mb:"2px",fontSize:15}),children:"View"}),null!==n&&void 0!==n&&null!==(t=n.original)&&void 0!==t&&t.createByContact&&null!==P&&void 0!==P&&P.view?(0,M.jsxs)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>{var e;return L((null===n||void 0===n||null===(e=n.original)||void 0===e?void 0:e.createByContact)&&`/contactView/${null===n||void 0===n?void 0:n.original.createByContact}`)},icon:(null===n||void 0===n?void 0:n.original.createByContact)&&(0,M.jsx)(W.oau,{fontSize:15}),children:[" ",(null===n||void 0===n?void 0:n.original.createByContact)&&(null===P||void 0===P?void 0:P.view)&&"contact"]}):"",null!==n&&void 0!==n&&n.original.createByLead&&null!==J&&void 0!==J&&J.view?(0,M.jsx)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>L(`/leadView/${null===n||void 0===n?void 0:n.original.createByLead}`),icon:(null===n||void 0===n?void 0:n.original.createByLead)&&(null===J||void 0===J?void 0:J.view)&&(0,M.jsx)(I.ju$,{style:{marginBottom:"4px"},fontSize:15}),children:(null===n||void 0===n?void 0:n.original.createByLead)&&(null===J||void 0===J?void 0:J.view)&&"lead"}):""]})]})})}},Q=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Recipient",accessor:"recipient",cell:e=>{var t;return(0,M.jsx)(a.N_,{to:`/phone-call/${null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.values._id}`,children:(0,M.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||" - "})})}},{Header:"Sender Name",accessor:"senderName"},{Header:"Realeted To",accessor:"realeted",cell:e=>{let{row:t}=e;return(0,M.jsxs)(s.Text,{children:[null!==t&&void 0!==t&&t.original.createByContact&&null!==P&&void 0!==P&&P.view?(0,M.jsx)(a.N_,{to:`/contactView/${null===t||void 0===t?void 0:t.original.createByContact}`,children:(0,M.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===t||void 0===t?void 0:t.original.createByContact)&&"Contact"})}):(0,M.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===t||void 0===t?void 0:t.original.createByContact)&&"Contact"}),null!==J&&void 0!==J&&J.view&&null!==t&&void 0!==t&&t.original.createByLead?(0,M.jsx)(a.N_,{to:`/leadView/${null===t||void 0===t?void 0:t.original.createByLead}`,children:(0,M.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===t||void 0===t?void 0:t.original.createByLead)&&"Lead"})}):(0,M.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===t||void 0===t?void 0:t.original.createByLead)&&"Lead"})]})}},{Header:"Timestamp",accessor:"timestamp"},{Header:"Created",accessor:"created",cell:e=>{let{row:t}=e;return(0,M.jsx)(s.Text,{fontSize:"sm",fontWeight:"700",children:f()(null===t||void 0===t?void 0:t.values.timestamp).format("(DD/MM) h:mma")})}},...null!==U&&void 0!==U&&U.update||null!==U&&void 0!==U&&U.view||null!==U&&void 0!==U&&U.delete?[Z]:[]];return(0,i.useEffect)((()=>{(async()=>{T(!0);const e=await E(Y());var t;200===e.payload.status?z(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.data):R.oR.error("Failed to fetch data","error"),T(!1)})()}),[t]),(0,M.jsxs)("div",{children:[(0,M.jsx)(h.A,{title:"Calls",isLoding:N,columnData:null!==Q&&void 0!==Q?Q:[],allData:null!==A&&void 0!==A?A:[],tableData:A,searchDisplay:O,setSearchDisplay:F,searchedDataOut:k,setSearchedDataOut:G,tableCustomFields:[],access:U,onOpen:x,selectedValues:S,setSelectedValues:j,setDelete:y,deleteMany:!0,AdvanceSearch:(0,M.jsx)(c.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,M.jsx)(o.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>b(!0),children:"Advance Search"}),getTagValuesOutSide:$,searchboxOutside:B,setGetTagValuesOutside:D,setSearchboxOutside:w,handleSearchType:"CallsSearch"}),(0,M.jsx)(V,{advanceSearch:C,setAdvanceSearch:b,setSearchedData:G,setDisplaySearchData:F,allData:null!==A&&void 0!==A?A:[],setAction:n,setGetTagValues:D,setSearchbox:w}),(0,M.jsx)(_,{isOpen:u,size:"sm",onClose:p,setAction:n})]})}},3186:(e,t,n)=>{"use strict";n.d(t,{T:()=>d});var i=n(8510),l=n(9522),a=n(835),o=n(5043);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}var s=["className","rows"],d=(0,l.Rf)((function(e,t){var n=(0,l.Vl)("Textarea",e),d=(0,l.MN)(e),c=d.className,u=d.rows,v=function(e,t){if(null==e)return{};var n,i,l={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(l[n]=e[n]);return l}(d,s),h=(0,i.useFormControl)(v),m=u?(0,a.cJ)(n,["h","minH","height","minHeight"]):n;return o.createElement(l.Bv.textarea,r({ref:t,rows:u},h,{className:(0,a.cx)("chakra-textarea",c),__css:m}))}));a.gt&&(d.displayName="Textarea")},4614:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(9942),l=n(4450),a=n(2554),o=n(5043),r=n(9488),s=n(8860),d=n(8031),c=(n(7892),n(7508)),u=(n(9621),n(579));const v=e=>{const{onClose:t,isOpen:n,fieldName:v,setFieldValue:h,data:m,isLoding:x,setIsLoding:f}=e,[p,g]=((0,c.wA)(),(0,o.useState)([])),[y,S]=(0,o.useState)([]),j=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},..."salesAgent"!==v?[{Header:"role",accessor:"role"}]:[]];return(0,u.jsxs)(i.aF,{onClose:t,size:"full",isOpen:n,children:[(0,u.jsx)(i.mH,{}),(0,u.jsxs)(i.$m,{children:[(0,u.jsx)(i.rQ,{children:"Select User"}),(0,u.jsx)(i.s_,{}),(0,u.jsx)(i.cw,{children:x?(0,u.jsx)(l.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(r.A,{})}):(0,u.jsx)(d.A,{title:"Users",isLoding:x,columnData:null!==j&&void 0!==j?j:[],allData:null!==m&&void 0!==m?m:[],tableData:m,AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:y,setSelectedValues:S,selectType:"single",customSearch:!1})}),(0,u.jsxs)(i.jl,{children:[(0,u.jsxs)(a.Button,{variant:"brand",size:"sm",me:2,disabled:!!x,leftIcon:(0,u.jsx)(s.NLY,{}),onClick:async()=>{try{f(!0),h(v,y),t()}catch(e){console.log(e)}finally{f(!1)}},children:[" ",x?(0,u.jsx)(r.A,{}):"Select"]}),(0,u.jsx)(a.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>t(),children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=3136.28e25c98.chunk.js.map