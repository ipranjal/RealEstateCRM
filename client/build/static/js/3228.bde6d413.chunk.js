"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[3228],{1046:(e,l,o)=>{o.d(l,{A:()=>p});var i=o(1206),n=o(4450),d=o(1778),t=o(5066),a=o(5043),r=o(1094),s=o(216),u=o(6914),v=o(8152),c=o(5369),m=o(579);function p(e){const{columnsData:l,tableData:o,title:p,type:x,selectedValues:h,setSelectedValues:g}=e,f=(0,a.useMemo)((()=>l),[l]),j=(0,a.useMemo)((()=>o),[o]),[S,b]=(JSON.parse(localStorage.getItem("user")),(0,a.useState)()),N=(0,r.useTable)({columns:f,data:j,initialState:{pageIndex:0}},r.useGlobalFilter,r.useSortBy,r.usePagination),{getTableProps:y,getTableBodyProps:w,headerGroups:C,prepareRow:F,page:P,canPreviousPage:T,canNextPage:z,pageOptions:A,pageCount:k,gotoPage:H,nextPage:I,previousPage:W,setPageSize:B,state:{pageIndex:G,pageSize:E}}=N;(null===A||void 0===A?void 0:A.length)<S&&b(null===A||void 0===A?void 0:A.length);const L=(0,i.dU)("gray.500","white"),D=(0,i.dU)("gray.200","whiteAlpha.100"),O=(e,l)=>{var o,i;"multi"===x?null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&o.checked?g((e=>[...e,l])):g((e=>null===e||void 0===e?void 0:e.filter((e=>e!==l)))):null!==e&&void 0!==e&&null!==(i=e.target)&&void 0!==i&&i.checked?g(l):g(null)};return(0,m.jsxs)(s.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,m.jsx)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,m.jsxs)(n.Text,{color:L,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[p," (",(0,m.jsx)(u.A,{targetNumber:null===j||void 0===j?void 0:j.length},null===j||void 0===j?void 0:j.length),")"]})}),(0,m.jsx)(n.Box,{overflowY:"auto",className:"table-container-property",children:(0,m.jsxs)(d.XI,{...y(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,m.jsx)(d.d8,{zIndex:1,children:null===C||void 0===C?void 0:C.map(((e,l)=>{var o;return(0,a.createElement)(d.Tr,{...e.getHeaderGroupProps(),key:l},null===e||void 0===e||null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,a.createElement)(d.Th,{...e.getHeaderProps(!1!==(null===e||void 0===e?void 0:e.isSortable)&&(null===e||void 0===e?void 0:e.getSortByToggleProps())),pe:"10px",key:l,borderColor:D},(0,m.jsxs)(n.Flex,{align:"center",justifyContent:null!==e&&void 0!==e&&e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,m.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:null===e||void 0===e?void 0:e.render("Header")}),!1!==(null===e||void 0===e?void 0:e.isSortable)&&(0,m.jsx)("span",{children:null!==e&&void 0!==e&&e.isSorted?null!==e&&void 0!==e&&e.isSortedDesc?(0,m.jsx)(c.GOR,{}):(0,m.jsx)(c.XhJ,{}):(0,m.jsx)(c.MjW,{})})]})))))}))}),(0,m.jsxs)(d.NN,{...w(),children:[0===(null===j||void 0===j?void 0:j.length)&&(0,m.jsx)(d.Tr,{children:(0,m.jsx)(d.Td,{colSpan:f.length,children:(0,m.jsx)(n.Text,{textAlign:"center",width:"100%",color:L,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===P||void 0===P?void 0:P.map(((e,l)=>{var o;return F(e),(0,a.createElement)(d.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,l)=>{var o,i,r;let s="";var u;"#"===(null===e||void 0===e||null===(o=e.column)||void 0===o?void 0:o.Header)?s=(0,m.jsxs)(n.Flex,{align:"center",children:["multi"===x?(0,m.jsx)(t.Sc,{colorScheme:"brandScheme",value:h,isChecked:h.includes(null===e||void 0===e?void 0:e.value),onChange:l=>O(l,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,m.jsx)(t.Sc,{colorScheme:"brandScheme",value:h,isChecked:h===(null===e||void 0===e?void 0:e.value),onChange:l=>O(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,m.jsx)(n.Text,{color:L,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(u=e.row)||void 0===u?void 0:u.index)+1})]}):"Full Name"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header)||"first Name"===(null===e||void 0===e||null===(r=e.column)||void 0===r?void 0:r.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?s=(0,m.jsx)(n.Text,{me:"10px",color:L,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"Phone Number"===(null===e||void 0===e?void 0:e.column.Header)||"Email"===(null===e||void 0===e?void 0:e.column.Header)?s=(0,m.jsx)(n.Text,{fontSize:"sm",fontWeight:"700",color:L,children:null===e||void 0===e?void 0:e.value}):("physical Address"===(null===e||void 0===e?void 0:e.column.Header)||"mailing Address"===(null===e||void 0===e?void 0:e.column.Header)||"Contact Method"===(null===e||void 0===e?void 0:e.column.Header))&&(s=(0,m.jsx)(n.Text,{color:L,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,a.createElement)(d.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},s)})))}))]})]})}),(null===j||void 0===j?void 0:j.length)>5&&(0,m.jsx)(v.A,{gotoPage:H,gopageValue:S,setGopageValue:b,pageCount:k,canPreviousPage:T,previousPage:W,canNextPage:z,pageOptions:A,setPageSize:B,nextPage:I,pageSize:E,pageIndex:G})]})}},4319:(e,l,o)=>{o.r(l),o.d(l,{default:()=>b});var i=o(9754),n=o(4450),d=o(8510),t=o(7682),a=o(2554),r=o(962),s=o(216),u=o(3994),v=o(9488),c=o(2770),m=o(3516),p=o(5043),x=o(3216),h=o(2145),g=o(9849),f=o(9621),j=o(8966),S=o(579);const b=()=>{var e,l,o;const[b,N]=(0,p.useState)([]),{isOpen:y,onOpen:w,onClose:C}=(0,i.j1)(),F=JSON.parse(localStorage.getItem("user")),[P,T]=(0,p.useState)(!1),[z,A]=(0,p.useState)(!1),k=async()=>{T(!0);let e=await(0,f.x4)("superAdmin"===(null===F||void 0===F?void 0:F.role)?"api/document":`api/document?createBy=${null===F||void 0===F?void 0:F._id}`);N(null===e||void 0===e?void 0:e.data),T(!1)},H={folderName:"",files:"",filename:"",createBy:null===F||void 0===F?void 0:F._id},I=(0,m.Wx)({initialValues:H,validationSchema:g.L8,onSubmit:(e,l)=>{let{resetForm:o}=l;M()}}),{errors:W,touched:B,values:G,handleBlur:E,handleChange:L,handleSubmit:D,setFieldValue:O,resetForm:R}=I,V=((0,x.Zp)(),async e=>{if(e){var l;let o=await(0,f.x4)("api/document/download/",e);o&&200===(null===o||void 0===o?void 0:o.status)?(window.open(`${null===c.d||void 0===c.d?void 0:c.d.baseUrl}api/document/download/${e}`),h.oR.success("File Download successful")):o&&404===(null===o||void 0===o||null===(l=o.response)||void 0===l?void 0:l.status)&&h.oR.error("File Not Found")}}),_=async e=>{if(e){let l=await(0,f.Gx)("api/document/delete/",e);l&&200===(null===l||void 0===l?void 0:l.status)&&k()}},M=async()=>{try{T(!0);const e=new FormData;null===e||void 0===e||e.append("folderName",null===G||void 0===G?void 0:G.folderName),null===e||void 0===e||e.append("createBy",null===G||void 0===G?void 0:G.createBy),null===e||void 0===e||e.append("filename",null===G||void 0===G?void 0:G.filename),G.files.forEach((l=>{null===e||void 0===e||e.append("files",l)}));let l=await(0,f.d_)("api/document/add",e);l&&200===(null===l||void 0===l?void 0:l.status)&&(k(),I.resetForm())}catch(e){console.log(e)}finally{T(!1)}};return(0,p.useEffect)((()=>{k()}),[z,D]),(0,S.jsx)("div",{children:(0,S.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,S.jsx)(n.GridItem,{colSpan:{base:12,md:7},children:(0,S.jsxs)(s.A,{minH:"20em",children:[(0,S.jsx)(n.Heading,{size:"lg",mb:4,children:"File Explorer"}),(0,S.jsx)(u.E,{}),(0,S.jsx)(n.VStack,{mt:4,alignItems:"flex-start",children:P?(0,S.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,S.jsx)(v.A,{})}):0===(null===b||void 0===b?void 0:b.length)?(0,S.jsx)(n.Text,{textAlign:"center",width:"100%",fontSize:"sm",fontWeight:"700",children:"-- No Document Found --"}):null===b||void 0===b?void 0:b.map((e=>{var l;return(0,S.jsx)(r.A,{name:null===e||void 0===e?void 0:e.folderName,item:e,children:null===e||void 0===e||null===(l=e.files)||void 0===l?void 0:l.map((e=>(0,S.jsx)(r.A,{download:V,setLinkDocument:A,deleteFile:_,data:e,name:e.fileName,isFile:!0})))})}))})]})}),(0,S.jsx)(n.GridItem,{colSpan:{base:12,md:5},colStart:{base:1,md:8},children:(0,S.jsxs)(s.A,{children:[(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(d.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Folder Name",(0,S.jsx)(n.Text,{color:"red",children:"*"})]}),(0,S.jsx)(t.Input,{onFocus:w,fontSize:"sm",onChange:L,onBlur:()=>setTimeout(C,200),value:null===G||void 0===G?void 0:G.folderName,name:"folderName",placeholder:"Enter Folder Name",fontWeight:"500",borderColor:null!==W&&void 0!==W&&W.folderName&&null!==B&&void 0!==B&&B.folderName?"red.300":null}),y&&(null===G||void 0===G?void 0:G.folderName)&&(null===b||void 0===b||null===(e=b.filter((e=>{var l,o,i;return null===e||void 0===e||null===(l=e.folderName)||void 0===l||null===(o=l.toLowerCase())||void 0===o?void 0:o.includes(null===G||void 0===G||null===(i=G.folderName)||void 0===i?void 0:i.toLowerCase())})))||void 0===e?void 0:e.length)>0&&(0,S.jsx)(n.List,{position:"relative",border:"1px solid",bg:"gray.100",width:"100%",borderRadius:"0px 0px 20px 20px",lineHeight:1,children:null===b||void 0===b||null===(l=b.filter((e=>{var l,o,i;return null===e||void 0===e||null===(l=e.folderName)||void 0===l||null===(o=l.toLowerCase())||void 0===o?void 0:o.includes(null===G||void 0===G||null===(i=G.folderName)||void 0===i?void 0:i.toLowerCase())})))||void 0===l?void 0:l.map(((e,l)=>(0,S.jsx)(n.ListItem,{p:3,borderBottom:"2px solid #efefef",sx:{"&:last-child":{borderBottom:"none"}},cursor:"pointer",onClick:()=>{O("folderName",null===e||void 0===e?void 0:e.folderName)},children:null===e||void 0===e?void 0:e.folderName},null===e||void 0===e?void 0:e._id)))}),(0,S.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",(null===W||void 0===W?void 0:W.folderName)&&(null===B||void 0===B?void 0:B.folderName)&&(null===W||void 0===W?void 0:W.folderName)]})]}),(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsx)(d.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"File Name"}),(0,S.jsx)(t.Input,{fontSize:"sm",onChange:L,onBlur:()=>setTimeout(C,200),value:null===G||void 0===G?void 0:G.filename,name:"filename",placeholder:"Enter File Name",fontWeight:"500",borderColor:null!==W&&void 0!==W&&W.filename&&null!==B&&void 0!==B&&B.filename?"red.300":null}),(0,S.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",(null===W||void 0===W?void 0:W.filename)&&(null===B||void 0===B?void 0:B.filename)&&(null===W||void 0===W?void 0:W.filename)]})]}),(0,S.jsx)(j.A,{count:null===G||void 0===G||null===(o=G.files)||void 0===o?void 0:o.length,onFileSelect:e=>O("files",e)}),(0,S.jsx)(a.Button,{size:"sm",disabled:!!P,onClick:D,variant:"brand",fontWeight:"500",children:P?(0,S.jsx)(v.A,{}):"Publish now"})]})})]})})}}}]);
//# sourceMappingURL=3228.bde6d413.chunk.js.map