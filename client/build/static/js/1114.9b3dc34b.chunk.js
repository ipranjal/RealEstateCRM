(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[1114],{446:function(e){e.exports=function(){"use strict";var e=1e3,l=6e4,t=36e5,n="millisecond",i="second",o="minute",a="hour",r="day",s="week",d="month",c="quarter",u="year",v="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var l=["th","st","nd","rd"],t=e%100;return"["+e+(l[(t-20)%10]||l[t]||l[0])+"]"}},g=function(e,l,t){var n=String(e);return!n||n.length>=l?e:""+Array(l+1-n.length).join(t)+e},f={s:g,z:function(e){var l=-e.utcOffset(),t=Math.abs(l),n=Math.floor(t/60),i=t%60;return(l<=0?"+":"-")+g(n,2,"0")+":"+g(i,2,"0")},m:function e(l,t){if(l.date()<t.date())return-e(t,l);var n=12*(t.year()-l.year())+(t.month()-l.month()),i=l.clone().add(n,d),o=t-i<0,a=l.clone().add(n+(o?-1:1),d);return+(-(n+(t-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:s,d:r,D:v,h:a,m:o,s:i,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},j="en",S={};S[j]=p;var y="$isDayjsObject",b=function(e){return e instanceof $||!(!e||!e[y])},C=function e(l,t,n){var i;if(!l)return j;if("string"==typeof l){var o=l.toLowerCase();S[o]&&(i=o),t&&(S[o]=t,i=o);var a=l.split("-");if(!i&&a.length>1)return e(a[0])}else{var r=l.name;S[r]=l,i=r}return!n&&i&&(j=i),i||!n&&j},w=function(e,l){if(b(e))return e.clone();var t="object"==typeof l?l:{};return t.date=e,t.args=arguments,new $(t)},T=f;T.l=C,T.i=b,T.w=function(e,l){return w(e,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var $=function(){function p(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[y]=!0}var g=p.prototype;return g.parse=function(e){this.$d=function(e){var l=e.date,t=e.utc;if(null===l)return new Date(NaN);if(T.u(l))return new Date;if(l instanceof Date)return new Date(l);if("string"==typeof l&&!/Z$/i.test(l)){var n=l.match(m);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return t?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(l)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return T},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(e,l){var t=w(e);return this.startOf(l)<=t&&t<=this.endOf(l)},g.isAfter=function(e,l){return w(e)<this.startOf(l)},g.isBefore=function(e,l){return this.endOf(l)<w(e)},g.$g=function(e,l,t){return T.u(e)?this[l]:this.set(t,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,l){var t=this,n=!!T.u(l)||l,c=T.p(e),h=function(e,l){var i=T.w(t.$u?Date.UTC(t.$y,l,e):new Date(t.$y,l,e),t);return n?i:i.endOf(r)},m=function(e,l){return T.w(t.toDate()[e].apply(t.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(l)),t)},x=this.$W,p=this.$M,g=this.$D,f="set"+(this.$u?"UTC":"");switch(c){case u:return n?h(1,0):h(31,11);case d:return n?h(1,p):h(0,p+1);case s:var j=this.$locale().weekStart||0,S=(x<j?x+7:x)-j;return h(n?g-S:g+(6-S),p);case r:case v:return m(f+"Hours",0);case a:return m(f+"Minutes",1);case o:return m(f+"Seconds",2);case i:return m(f+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,l){var t,s=T.p(e),c="set"+(this.$u?"UTC":""),h=(t={},t[r]=c+"Date",t[v]=c+"Date",t[d]=c+"Month",t[u]=c+"FullYear",t[a]=c+"Hours",t[o]=c+"Minutes",t[i]=c+"Seconds",t[n]=c+"Milliseconds",t)[s],m=s===r?this.$D+(l-this.$W):l;if(s===d||s===u){var x=this.clone().set(v,1);x.$d[h](m),x.init(),this.$d=x.set(v,Math.min(this.$D,x.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},g.set=function(e,l){return this.clone().$set(e,l)},g.get=function(e){return this[T.p(e)]()},g.add=function(n,c){var v,h=this;n=Number(n);var m=T.p(c),x=function(e){var l=w(h);return T.w(l.date(l.date()+Math.round(e*n)),h)};if(m===d)return this.set(d,this.$M+n);if(m===u)return this.set(u,this.$y+n);if(m===r)return x(1);if(m===s)return x(7);var p=(v={},v[o]=l,v[a]=t,v[i]=e,v)[m]||1,g=this.$d.getTime()+n*p;return T.w(g,this)},g.subtract=function(e,l){return this.add(-1*e,l)},g.format=function(e){var l=this,t=this.$locale();if(!this.isValid())return t.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),o=this.$H,a=this.$m,r=this.$M,s=t.weekdays,d=t.months,c=t.meridiem,u=function(e,t,i,o){return e&&(e[t]||e(l,n))||i[t].slice(0,o)},v=function(e){return T.s(o%12||12,e,"0")},m=c||function(e,l,t){var n=e<12?"AM":"PM";return t?n.toLowerCase():n};return n.replace(x,(function(e,n){return n||function(e){switch(e){case"YY":return String(l.$y).slice(-2);case"YYYY":return T.s(l.$y,4,"0");case"M":return r+1;case"MM":return T.s(r+1,2,"0");case"MMM":return u(t.monthsShort,r,d,3);case"MMMM":return u(d,r);case"D":return l.$D;case"DD":return T.s(l.$D,2,"0");case"d":return String(l.$W);case"dd":return u(t.weekdaysMin,l.$W,s,2);case"ddd":return u(t.weekdaysShort,l.$W,s,3);case"dddd":return s[l.$W];case"H":return String(o);case"HH":return T.s(o,2,"0");case"h":return v(1);case"hh":return v(2);case"a":return m(o,a,!0);case"A":return m(o,a,!1);case"m":return String(a);case"mm":return T.s(a,2,"0");case"s":return String(l.$s);case"ss":return T.s(l.$s,2,"0");case"SSS":return T.s(l.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,v,h){var m,x=this,p=T.p(v),g=w(n),f=(g.utcOffset()-this.utcOffset())*l,j=this-g,S=function(){return T.m(x,g)};switch(p){case u:m=S()/12;break;case d:m=S();break;case c:m=S()/3;break;case s:m=(j-f)/6048e5;break;case r:m=(j-f)/864e5;break;case a:m=j/t;break;case o:m=j/l;break;case i:m=j/e;break;default:m=j}return h?m:T.a(m)},g.daysInMonth=function(){return this.endOf(d).$D},g.$locale=function(){return S[this.$L]},g.locale=function(e,l){if(!e)return this.$L;var t=this.clone(),n=C(e,l,!0);return n&&(t.$L=n),t},g.clone=function(){return T.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},p}(),B=$.prototype;return w.prototype=B,[["$ms",n],["$s",i],["$m",o],["$H",a],["$W",r],["$M",d],["$y",u],["$D",v]].forEach((function(e){B[e[1]]=function(l){return this.$g(l,e[0],e[1])}})),w.extend=function(e,l){return e.$i||(e(l,$,w),e.$i=!0),w},w.locale=C,w.isDayjs=b,w.unix=function(e){return w(1e3*e)},w.en=S[j],w.Ls=S,w.p={},w}()},1046:(e,l,t)=>{"use strict";t.d(l,{A:()=>m});var n=t(1206),i=t(4450),o=t(1778),a=t(5066),r=t(5043),s=t(1094),d=t(216),c=t(6914),u=t(8152),v=t(5369),h=t(579);function m(e){const{columnsData:l,tableData:t,title:m,type:x,selectedValues:p,setSelectedValues:g}=e,f=(0,r.useMemo)((()=>l),[l]),j=(0,r.useMemo)((()=>t),[t]),[S,y]=(JSON.parse(localStorage.getItem("user")),(0,r.useState)()),b=(0,s.useTable)({columns:f,data:j,initialState:{pageIndex:0}},s.useGlobalFilter,s.useSortBy,s.usePagination),{getTableProps:C,getTableBodyProps:w,headerGroups:T,prepareRow:$,page:B,canPreviousPage:D,canNextPage:A,pageOptions:N,pageCount:z,gotoPage:L,nextPage:F,previousPage:I,setPageSize:O,state:{pageIndex:M,pageSize:k}}=b;(null===N||void 0===N?void 0:N.length)<S&&y(null===N||void 0===N?void 0:N.length);const H=(0,n.dU)("gray.500","white"),W=(0,n.dU)("gray.200","whiteAlpha.100"),_=(e,l)=>{var t,n;"multi"===x?null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.checked?g((e=>[...e,l])):g((e=>null===e||void 0===e?void 0:e.filter((e=>e!==l)))):null!==e&&void 0!==e&&null!==(n=e.target)&&void 0!==n&&n.checked?g(l):g(null)};return(0,h.jsxs)(d.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,h.jsx)(i.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,h.jsxs)(i.Text,{color:H,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[m," (",(0,h.jsx)(c.A,{targetNumber:null===j||void 0===j?void 0:j.length},null===j||void 0===j?void 0:j.length),")"]})}),(0,h.jsx)(i.Box,{overflowY:"auto",className:"table-container-property",children:(0,h.jsxs)(o.XI,{...C(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,h.jsx)(o.d8,{zIndex:1,children:null===T||void 0===T?void 0:T.map(((e,l)=>{var t;return(0,r.createElement)(o.Tr,{...e.getHeaderGroupProps(),key:l},null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,r.createElement)(o.Th,{...e.getHeaderProps(!1!==(null===e||void 0===e?void 0:e.isSortable)&&(null===e||void 0===e?void 0:e.getSortByToggleProps())),pe:"10px",key:l,borderColor:W},(0,h.jsxs)(i.Flex,{align:"center",justifyContent:null!==e&&void 0!==e&&e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,h.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:null===e||void 0===e?void 0:e.render("Header")}),!1!==(null===e||void 0===e?void 0:e.isSortable)&&(0,h.jsx)("span",{children:null!==e&&void 0!==e&&e.isSorted?null!==e&&void 0!==e&&e.isSortedDesc?(0,h.jsx)(v.GOR,{}):(0,h.jsx)(v.XhJ,{}):(0,h.jsx)(v.MjW,{})})]})))))}))}),(0,h.jsxs)(o.NN,{...w(),children:[0===(null===j||void 0===j?void 0:j.length)&&(0,h.jsx)(o.Tr,{children:(0,h.jsx)(o.Td,{colSpan:f.length,children:(0,h.jsx)(i.Text,{textAlign:"center",width:"100%",color:H,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===B||void 0===B?void 0:B.map(((e,l)=>{var t;return $(e),(0,r.createElement)(o.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{var t,n,s;let d="";var c;"#"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)?d=(0,h.jsxs)(i.Flex,{align:"center",children:["multi"===x?(0,h.jsx)(a.Sc,{colorScheme:"brandScheme",value:p,isChecked:p.includes(null===e||void 0===e?void 0:e.value),onChange:l=>_(l,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,h.jsx)(a.Sc,{colorScheme:"brandScheme",value:p,isChecked:p===(null===e||void 0===e?void 0:e.value),onChange:l=>_(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,h.jsx)(i.Text,{color:H,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(c=e.row)||void 0===c?void 0:c.index)+1})]}):"Full Name"===(null===e||void 0===e||null===(n=e.column)||void 0===n?void 0:n.Header)||"first Name"===(null===e||void 0===e||null===(s=e.column)||void 0===s?void 0:s.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?d=(0,h.jsx)(i.Text,{me:"10px",color:H,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"Phone Number"===(null===e||void 0===e?void 0:e.column.Header)||"Email"===(null===e||void 0===e?void 0:e.column.Header)?d=(0,h.jsx)(i.Text,{fontSize:"sm",fontWeight:"700",color:H,children:null===e||void 0===e?void 0:e.value}):("physical Address"===(null===e||void 0===e?void 0:e.column.Header)||"mailing Address"===(null===e||void 0===e?void 0:e.column.Header)||"Contact Method"===(null===e||void 0===e?void 0:e.column.Header))&&(d=(0,h.jsx)(i.Text,{color:H,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,r.createElement)(o.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},d)})))}))]})]})}),(null===j||void 0===j?void 0:j.length)>5&&(0,h.jsx)(u.A,{gotoPage:L,gopageValue:S,setGopageValue:y,pageCount:z,canPreviousPage:D,previousPage:I,canNextPage:A,pageOptions:N,setPageSize:O,nextPage:F,pageSize:k,pageIndex:M})]})}},1114:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>Y});var n=t(5043),i=t(3216),o=t(5475),a=t(4034),r=t(9754),s=t(4450),d=t(5376),c=t(2554),u=t(9621),v=t(5574),h=t(8031),m=t(7368),x=t(3516),p=t(899),g=t(9942),f=t(8510),j=t(7682),S=t(4626),y=t(9488),b=t(3017),C=t(7508),w=t(579);const T=e=>{const{state:l,allData:t,advanceSearch:n,setAdvanceSearch:i,isLoding:o,setSearchedData:a,setDisplaySearchData:r,setSearchClear:d,setSearchbox:u}=e,v=(0,C.wA)(),h=p.object({senderName:p.string(),realetedTo:p.string(),createByName:p.string()}),m=(0,x.Wx)({initialValues:{senderName:"",realetedTo:"",createByName:""},validationSchema:h,onSubmit:(e,l)=>{let{resetForm:n}=l;v((0,b.gB)(e)),v((0,b.DW)({values:e,allData:t,type:"Email"}));const o=[{name:["senderName"],value:e.senderName},{name:["realetedTo"],value:e.realetedTo},{name:["createByName"],value:e.createByName}];v((0,b.Tr)(null===o||void 0===o?void 0:o.filter((e=>null===e||void 0===e?void 0:e.value)))),r(!0),i(!1),n(),u("")}}),{errors:T,touched:$,values:B,handleBlur:D,handleChange:A,handleSubmit:N,setFieldValue:z,resetForm:L,dirty:F}=m;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.aF,{onClose:()=>{i(!1),L()},isOpen:n,isCentered:!0,children:[(0,w.jsx)(g.mH,{}),(0,w.jsxs)(g.$m,{children:[(0,w.jsx)(g.rQ,{children:"Advance Search"}),(0,w.jsx)(g.s_,{onClick:()=>{i(!1),L()}}),(0,w.jsx)(g.cw,{children:(0,w.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Sender Name"}),(0,w.jsx)(j.Input,{fontSize:"sm",onChange:A,onBlur:D,value:null===B||void 0===B?void 0:B.senderName,name:"senderName",placeholder:"Enter Sender Name",fontWeight:"500"}),(0,w.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===T||void 0===T?void 0:T.senderName)&&(null===$||void 0===$?void 0:$.senderName)&&(null===T||void 0===T?void 0:T.senderName)]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Realeted To"}),(0,w.jsxs)(S.l6,{value:null===B||void 0===B?void 0:B.realetedTo,fontSize:"sm",name:"realetedTo",onChange:A,fontWeight:"500",placeholder:"Select Realeted To",children:[(0,w.jsx)("option",{value:"contact",children:"Contact"}),(0,w.jsx)("option",{value:"lead",children:"Lead"})]}),(0,w.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===T||void 0===T?void 0:T.realetedTo)&&(null===$||void 0===$?void 0:$.realetedTo)&&(null===T||void 0===T?void 0:T.realetedTo)]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"CreateBy Name"}),(0,w.jsx)(j.Input,{fontSize:"sm",onChange:A,onBlur:D,value:null===B||void 0===B?void 0:B.createByName,name:"createByName",placeholder:"Enter CreateBy Name",fontWeight:"500"}),(0,w.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===T||void 0===T?void 0:T.createByName)&&(null===$||void 0===$?void 0:$.createByName)&&(null===T||void 0===T?void 0:T.createByName)]})]})]})}),(0,w.jsxs)(g.jl,{children:[(0,w.jsx)(c.Button,{size:"sm",variant:"brand",mr:2,onClick:N,disabled:!(!o&&F),children:o?(0,w.jsx)(y.A,{}):"Search"}),(0,w.jsx)(c.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>L(),children:"Clear"})]})]})]})})};var $=t(6178),B=t.n($),D=t(7149),A=t(4960),N=t(5104),z=t(3186),L=t(9565),F=t(1125),I=t(4614),O=t(3388),M=t(9849),k=t(446),H=t.n(k),W=t(2101),_=t(2145),P=t(968),V=t(8757);t(216);const G=e=>{var l,t;const{onClose:i,isOpen:o}=e,[a,r]=(0,n.useState)(!1),[d,v]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[p,b]=(0,n.useState)(!1),[T,$]=(0,n.useState)(!1),[B,D]=(0,n.useState)([]),[A,k]=(0,n.useState)(!1),[G,E]=(0,n.useState)(!1),[Y,R]=(0,n.useState)([]),[U,J]=(0,n.useState)([]),[Q,X]=(0,n.useState)([]),Z=(0,C.wA)(),q=JSON.parse(localStorage.getItem("user")),K=null===(l=new Date)||void 0===l||null===(t=l.toISOString())||void 0===t?void 0:t.split(".")[0],ee={sender:null===q||void 0===q?void 0:q._id,recipient:"",subject:"",callNotes:"",createByContact:"",createByLead:"",property:"",startDate:"",type:"message",html:"",category:"contact",createBy:null===q||void 0===q?void 0:q._id,salesAgent:""},le=(0,x.Wx)({initialValues:ee,validationSchema:M.y4,onSubmit:(e,l)=>{let{resetForm:t}=l;de(),t()}}),{errors:te,touched:ne,values:ie,handleBlur:oe,handleChange:ae,handleSubmit:re,setFieldValue:se}=le,de=async()=>{try{r(!0);let l=await(0,u.d_)("api/email/add",ie);200===(null===l||void 0===l?void 0:l.status)&&(null===e||void 0===e||e.onClose(),null===e||void 0===e||e.setAction((e=>!e)))}catch(l){console.log(l)}finally{r(!1)}};(0,n.useEffect)((async()=>{ie.start=null===e||void 0===e?void 0:e.date;try{let e;var l;if("Contact"===(null===ie||void 0===ie?void 0:ie.category)&&(null===h||void 0===h?void 0:h.length)<=0)e=await(0,u.x4)("superAdmin"===(null===q||void 0===q?void 0:q.role)?"api/contact/":`api/contact/?createBy=${null===q||void 0===q?void 0:q._id}`),m(null===(l=e)||void 0===l?void 0:l.data);else if("Lead"===(null===ie||void 0===ie?void 0:ie.category)&&d<=0){var t;e=await(0,u.x4)("superAdmin"===(null===q||void 0===q?void 0:q.role)?"api/lead/":`api/lead/?createBy=${null===q||void 0===q?void 0:q._id}`),v(null===(t=e)||void 0===t?void 0:t.data)}else if("property"===(null===ie||void 0===ie?void 0:ie.category)&&console.log(""),Y.length<=0){var n;e=await(0,u.x4)("superAdmin"===(null===q||void 0===q?void 0:q.role)?"api/property":`api/property/?createBy=${null===q||void 0===q?void 0:q._id}`),R(null===(n=e)||void 0===n?void 0:n.data)}}catch(i){console.log(i)}}),[e,null===ie||void 0===ie?void 0:ie.category]);(0,n.useEffect)((()=>{"template"===(null===ie||void 0===ie?void 0:ie.type)&&(async()=>{var e;r(!0);const l=await Z((0,W.t)());var t;200===(null===l||void 0===l||null===(e=l.payload)||void 0===e?void 0:e.status)?X(null===l||void 0===l||null===(t=l.payload)||void 0===t?void 0:t.data):_.oR.error("Failed to fetch data","error"),r(!1)})()}),[null===ie||void 0===ie?void 0:ie.type]),(0,n.useEffect)((()=>{(async()=>{if(null!==ie&&void 0!==ie&&ie.createByContact){let e=null===h||void 0===h?void 0:h.find((e=>(null===e||void 0===e?void 0:e._id)===(null===ie||void 0===ie?void 0:ie.createByContact)));e&&se("recipient",null===e||void 0===e?void 0:e.email)}else if(null!==ie&&void 0!==ie&&ie.createByLead){let e=null===d||void 0===d?void 0:d.find((e=>(null===e||void 0===e?void 0:e._id)===(null===ie||void 0===ie?void 0:ie.createByLead)));e&&se("recipient",null===e||void 0===e?void 0:e.leadEmail)}else se("recipient","")})()}),[null===ie||void 0===ie?void 0:ie.createByContact,null===ie||void 0===ie?void 0:ie.createByLead]),(0,n.useEffect)((()=>{(async()=>{r(!0);try{var e,l;let t=await(0,u.x4)("api/user/"),n=(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(l=e.user)||void 0===l?void 0:l.filter((e=>{var l;return null===e||void 0===e||null===(l=e.roles)||void 0===l?void 0:l.some((e=>"Sales"===(null===e||void 0===e?void 0:e.roleName)))})))||[];D(n)}catch(t){console.error("Failed to fetch users data:",t)}finally{r(!1)}})()}),[]);const ce=null===Y||void 0===Y?void 0:Y.map((e=>({...e,value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.name})));return(0,w.jsxs)(g.aF,{onClose:i,isOpen:o,isCentered:!0,children:[(0,w.jsx)(g.mH,{}),(0,w.jsxs)(g.$m,{height:"580px",children:[(0,w.jsx)(g.rQ,{children:"Add Email"}),(0,w.jsx)(g.s_,{}),(0,w.jsxs)(g.cw,{overflowY:"auto",height:"400px",children:[(0,w.jsx)(L.A,{isOpen:p,data:h,onClose:b,fieldName:"createByContact",setFieldValue:se}),(0,w.jsx)(F.A,{isOpen:T,data:d,onClose:$,fieldName:"createByLead",setFieldValue:se}),(0,w.jsx)(I.A,{onClose:()=>k(!1),isOpen:A,fieldName:"salesAgent",setFieldValue:se,data:B,isLoding:a,setIsLoding:r}),(0,w.jsx)(V.A,{onClose:()=>E(!1),isOpen:G,data:Y,isLoding:a,setIsLoding:r,fieldName:"property",setFieldValue:se,columnsData:null!==U&&void 0!==U?U:[]}),(0,w.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Related"}),(0,w.jsx)(N.z6,{onChange:e=>{se("category",e),se("createByContact",""),se("createByLead","")},value:ie.category,children:(0,w.jsxs)(s.Stack,{direction:"row",children:[(0,w.jsx)(N.sx,{value:"Contact",children:"Contact"}),(0,w.jsx)(N.sx,{value:"Lead",children:"Lead"})]})})]}),(0,w.jsx)(s.GridItem,{colSpan:{base:12},children:"Contact"===ie.category?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Contact)"}),(0,w.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,w.jsx)(S.l6,{value:ie.createByContact,name:"createByContact",onChange:ae,mb:te.createByContact&&ne.createByContact?void 0:"10px",fontWeight:"500",placeholder:"Assign To",borderColor:te.createByContact&&ne.createByContact?"red.300":null,children:null===h||void 0===h?void 0:h.map((e=>(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:"Contact"===(null===ie||void 0===ie?void 0:ie.category)?`${null===e||void 0===e?void 0:e.fullName}`:null===e||void 0===e?void 0:e.leadName},null===e||void 0===e?void 0:e._id)))}),(0,w.jsx)(c.IconButton,{onClick:()=>b(!0),ml:2,fontSize:"25px",icon:(0,w.jsx)(O.G2h,{})})]})]})}):"Lead"===(null===ie||void 0===ie?void 0:ie.category)?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,w.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Lead)"}),(0,w.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,w.jsx)(S.l6,{value:null===ie||void 0===ie?void 0:ie.createByLead,name:"createByLead",onChange:ae,mb:null!==te&&void 0!==te&&te.createByLead&&null!==ne&&void 0!==ne&&ne.createByLead?void 0:"10px",fontWeight:"500",placeholder:"Assign To",borderColor:null!==te&&void 0!==te&&te.createByLead&&null!==ne&&void 0!==ne&&ne.createByLead?"red.300":null,children:null===d||void 0===d?void 0:d.map((e=>(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:"Contact"===(null===ie||void 0===ie?void 0:ie.category)?`${null===e||void 0===e?void 0:e.firstName} ${null===e||void 0===e?void 0:e.lastName}`:null===e||void 0===e?void 0:e.leadName},null===e||void 0===e?void 0:e._id)))}),(0,w.jsx)(c.IconButton,{onClick:()=>$(!0),ml:2,fontSize:"25px",icon:(0,w.jsx)(O.G2h,{})})]})]})}):""}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsxs)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,w.jsx)(s.Text,{color:"red",children:"*"})]}),(0,w.jsx)(j.Input,{fontSize:"sm",disabled:!0,value:null===ie||void 0===ie?void 0:ie.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:null!==te&&void 0!==te&&te.recipient&&null!==ne&&void 0!==ne&&ne.recipient?"red.300":null}),(0,w.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",(null===te||void 0===te?void 0:te.recipient)&&(null===ne||void 0===ne?void 0:ne.recipient)&&(null===te||void 0===te?void 0:te.recipient)]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsxs)(s.Flex,{alignItems:"end",justifyContent:"space-between",children:[(0,w.jsx)(s.Text,{w:"100%",children:(0,w.jsx)(P.CUIAutoComplete,{label:"Property",items:ce,selectedItems:null===ce||void 0===ce?void 0:ce.filter((e=>{var l;return null===ie||void 0===ie||null===(l=ie.property)||void 0===l?void 0:l.includes(null===e||void 0===e?void 0:e._id)})),onSelectedItemsChange:e=>{const l=null===(t=null===e||void 0===e?void 0:e.selectedItems)||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e._id));var t;se("property",l)},value:null===ie||void 0===ie?void 0:ie.property,name:"property",onChange:ae,mb:null!==te&&void 0!==te&&te.property&&null!==ne&&void 0!==ne&&ne.property?void 0:"10px",fontWeight:"500",placeholder:"Assign To Property",borderColor:null!==te&&void 0!==te&&te.property&&null!==ne&&void 0!==ne&&ne.property?"red.300":null})}),(0,w.jsx)(c.IconButton,{mb:6,onClick:()=>E(!0),fontSize:"25px",icon:(0,w.jsx)(O.G2h,{})})]}),(0,w.jsxs)(s.Text,{color:"red",children:[" ",(null===te||void 0===te?void 0:te.attendes)&&(null===ne||void 0===ne?void 0:ne.attendes)&&(null===te||void 0===te?void 0:te.attendes)]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsxs)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,w.jsx)(s.Text,{color:"red",children:"*"})]}),(0,w.jsx)(j.Input,{type:"datetime-local",fontSize:"sm",onChange:ae,onBlur:oe,min:H()(K).format("YYYY-MM-DD HH:mm"),value:null===ie||void 0===ie?void 0:ie.startDate,name:"startDate",fontWeight:"500",borderColor:null!==te&&void 0!==te&&te.startDate&&null!==ne&&void 0!==ne&&ne.startDate?"red.300":null}),(0,w.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",(null===te||void 0===te?void 0:te.startDate)&&(null===ne||void 0===ne?void 0:ne.startDate)&&(null===te||void 0===te?void 0:te.startDate)]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsxs)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Assign To Sales Agent ",(0,w.jsx)(s.Text,{color:"red",children:"*"})]}),(0,w.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,w.jsx)(S.l6,{value:null===ie||void 0===ie?void 0:ie.salesAgent,name:"salesAgent",onChange:ae,mb:null!==te&&void 0!==te&&te.salesAgent&&null!==ne&&void 0!==ne&&ne.salesAgent?void 0:"10px",fontWeight:"500",placeholder:"Assign To Sales Agent",borderColor:null!==te&&void 0!==te&&te.salesAgent&&null!==ne&&void 0!==ne&&ne.salesAgent?"red.300":null,children:null===B||void 0===B?void 0:B.map((e=>(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:`${null===e||void 0===e?void 0:e.firstName} ${null===e||void 0===e?void 0:e.lastName}`},null===e||void 0===e?void 0:e._id)))}),(0,w.jsx)(c.IconButton,{onClick:()=>k(!0),ml:2,fontSize:"25px",icon:(0,w.jsx)(O.G2h,{})})]}),(0,w.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",(null===te||void 0===te?void 0:te.salesAgent)&&(null===ne||void 0===ne?void 0:ne.salesAgent)&&(null===te||void 0===te?void 0:te.salesAgent)]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsxs)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Subject",(0,w.jsx)(s.Text,{color:"red",children:"*"})]}),(0,w.jsx)(j.Input,{fontSize:"sm",onChange:ae,onBlur:oe,value:null===ie||void 0===ie?void 0:ie.subject,name:"subject",placeholder:"subject",fontWeight:"500",borderColor:null!==te&&void 0!==te&&te.subject&&null!==ne&&void 0!==ne&&ne.subject?"red.300":null}),(0,w.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",(null===te||void 0===te?void 0:te.subject)&&(null===ne||void 0===ne?void 0:ne.subject)&&(null===te||void 0===te?void 0:te.subject)]})]}),(0,w.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,w.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,w.jsx)(N.z6,{onChange:e=>{se("type",e)},value:null===ie||void 0===ie?void 0:ie.type,children:(0,w.jsxs)(s.Stack,{direction:"row",children:[(0,w.jsx)(N.sx,{value:"message",children:"Message"}),(0,w.jsx)(N.sx,{value:"template",children:"Template"})]})})]}),(0,w.jsx)(s.GridItem,{colSpan:{base:12},children:"message"===(null===ie||void 0===ie?void 0:ie.type)?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(z.T,{resize:"none",fontSize:"sm",placeholder:"Enter Message",onChange:ae,onBlur:oe,value:null===ie||void 0===ie?void 0:ie.message,name:"message",fontWeight:"500",borderColor:null!==te&&void 0!==te&&te.message&&null!==ne&&void 0!==ne&&ne.message?"red.300":null}),(0,w.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",(null===te||void 0===te?void 0:te.message)&&(null===ne||void 0===ne?void 0:ne.message)&&(null===te||void 0===te?void 0:te.message)]})]}):(0,w.jsx)(S.l6,{name:"html",onChange:ae,onBlur:oe,value:ie.html,fontWeight:"500",placeholder:"Select Template",children:null===Q||void 0===Q?void 0:Q.map((e=>(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e.html,children:null===e||void 0===e?void 0:e.templateName},e._id)))})})]})]}),(0,w.jsxs)(g.jl,{children:[(0,w.jsx)(c.Button,{variant:"brand",size:"sm",disabled:!!a,onClick:re,children:a?(0,w.jsx)(y.A,{}):"Save"}),(0,w.jsx)(c.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{le.resetForm(),i()},size:"sm",children:"Close"})]})]})]})};var E=t(7560);const Y=e=>{const[l,t]=(0,n.useState)(!1),{isOpen:u,onOpen:x,onClose:p}=(0,r.j1)(),[g,f]=(0,n.useState)(!1),[j,S]=(0,n.useState)([]),[y,b]=(0,n.useState)(!1),[$,N]=(0,n.useState)([]),[z,L]=(0,n.useState)(""),F=(JSON.parse(localStorage.getItem("user")),(0,i.Zp)()),I=(0,C.wA)(),[O,M]=(0,n.useState)(!1),[k,H]=(0,n.useState)([]),[W,P]=(0,n.useState)(!1),[V,Y]=(0,n.useState)([]),[R,U,J]=(0,v.h)(["Emails","Leads","Contacts"]),Q={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var l,t,n,i,o,r;let{row:c}=e;return(0,w.jsx)(s.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,w.jsxs)(d.W1,{isLazy:!0,children:[(0,w.jsx)(d.IU,{children:(0,w.jsx)(m.txp,{})}),(0,w.jsxs)(d.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===R||void 0===R?void 0:R.view)&&(0,w.jsx)(d.Dr,{py:2.5,color:"green",onClick:()=>{var e;return F(`/Email/${null===c||void 0===c||null===(e=c.values)||void 0===e?void 0:e._id}`)},icon:(0,w.jsx)(a.ViewIcon,{mb:"2px",fontSize:15}),children:"View"}),null!==c&&void 0!==c&&null!==(l=c.original)&&void 0!==l&&l.createByContact&&null!==J&&void 0!==J&&J.view?(0,w.jsxs)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>{var e;return F((null===c||void 0===c||null===(e=c.original)||void 0===e?void 0:e.createByContact)&&`/contactView/${null===c||void 0===c?void 0:c.original.createByContact}`)},icon:(null===c||void 0===c||null===(t=c.original)||void 0===t?void 0:t.createByContact)&&(0,w.jsx)(A.oau,{fontSize:15}),children:[" ",(null===c||void 0===c||null===(n=c.original)||void 0===n?void 0:n.createByContact)&&(null===J||void 0===J?void 0:J.view)&&"contact"]}):"",null!==c&&void 0!==c&&null!==(i=c.original)&&void 0!==i&&i.createByLead&&null!==U&&void 0!==U&&U.view?(0,w.jsx)(d.Dr,{width:"165px",py:2.5,color:"black",onClick:()=>F(`/leadView/${null===c||void 0===c?void 0:c.original.createByLead}`),icon:(null===c||void 0===c||null===(o=c.original)||void 0===o?void 0:o.createByLead)&&(null===U||void 0===U?void 0:U.view)&&(0,w.jsx)(D.ju$,{style:{marginBottom:"4px"},fontSize:15}),children:(null===c||void 0===c||null===(r=c.original)||void 0===r?void 0:r.createByLead)&&(null===U||void 0===U?void 0:U.view)&&"lead"}):""]})]})})}},X=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"recipient",accessor:"createByName",cell:e=>{var l,t;return(0,w.jsx)(o.N_,{to:`/Email/${null===e||void 0===e||null===(l=e.row)||void 0===l||null===(t=l.values)||void 0===t?void 0:t._id}`,children:(0,w.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||"-"})})}},{Header:"sender Name",accessor:"senderName"},{Header:"Realeted To",accessor:"realeted",cell:e=>{var l,t,n,i,a,r,d,c;let{row:u}=e;return(0,w.jsxs)(s.Text,{children:[null!==u&&void 0!==u&&null!==(l=u.original)&&void 0!==l&&l.createByContact&&null!==J&&void 0!==J&&J.view?(0,w.jsx)(o.N_,{to:`/contactView/${null===u||void 0===u||null===(t=u.original)||void 0===t?void 0:t.createByContact}`,children:(0,w.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===u||void 0===u||null===(n=u.original)||void 0===n?void 0:n.createByContact)&&"Contact"})}):(0,w.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===u||void 0===u||null===(i=u.original)||void 0===i?void 0:i.createByContact)&&"Contact"}),null!==U&&void 0!==U&&U.view&&null!==u&&void 0!==u&&null!==(a=u.original)&&void 0!==a&&a.createByLead?(0,w.jsx)(o.N_,{to:`/leadView/${null===u||void 0===u||null===(r=u.original)||void 0===r?void 0:r.createByLead}`,children:(0,w.jsx)(s.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===u||void 0===u||null===(d=u.original)||void 0===d?void 0:d.createByLead)&&"Lead"})}):(0,w.jsx)(s.Text,{me:"10px",fontSize:"sm",fontWeight:"700",children:(null===u||void 0===u||null===(c=u.original)||void 0===c?void 0:c.createByLead)&&"Lead"})]})}},{Header:"timestamp",accessor:"timestamp"},{Header:"Created",accessor:"created",cell:e=>{var l;let{row:t}=e;return(0,w.jsx)(s.Text,{fontSize:"sm",fontWeight:"700",children:B()(null===t||void 0===t||null===(l=t.values)||void 0===l?void 0:l.timestamp).format("(DD/MM) h:mma")})}},...null!==R&&void 0!==R&&R.update||null!==R&&void 0!==R&&R.view||null!==R&&void 0!==R&&R.delete?[Q]:[]];return(0,n.useEffect)((()=>{(async()=>{var e,l;M(!0);const t=await I((0,E.q)());let n=[...null===t||void 0===t||null===(e=t.payload)||void 0===e?void 0:e.data];n&&(null===n||void 0===n?void 0:n.length)>0&&(null===n||void 0===n||n.forEach((e=>{if(Object.isExtensible(e))e.createByLead&&(e.realeted="Lead"),e.createBy&&(e.realeted="Contact");else{var l,t;const n={...e};null!==(l=e)&&void 0!==l&&l.createByLead&&(n.realeted="Lead"),null!==(t=e)&&void 0!==t&&t.createBy&&(n.realeted="Contact"),e=n}}))),200===(null===t||void 0===t||null===(l=t.payload)||void 0===l?void 0:l.status)?H(n):_.oR.error("Failed to fetch data","error"),M(!1)})()}),[l]),(0,w.jsxs)("div",{children:[(0,w.jsx)(h.A,{title:"Email",isLoding:O,columnData:null!==X&&void 0!==X?X:[],allData:null!==k&&void 0!==k?k:[],tableData:k,searchDisplay:W,setSearchDisplay:P,searchedDataOut:V,setSearchedDataOut:Y,tableCustomFields:[],access:R,onOpen:x,selectedValues:j,setSelectedValues:S,setDelete:f,deleteMany:!0,AdvanceSearch:(0,w.jsx)(c.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,w.jsx)(a.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>b(!0),children:"Advance Search"}),getTagValuesOutSide:$,searchboxOutside:z,setGetTagValuesOutside:N,setSearchboxOutside:L,handleSearchType:"EmailSearch"}),(0,w.jsx)(T,{advanceSearch:y,setAdvanceSearch:b,setSearchedData:Y,setDisplaySearchData:P,allData:null!==k&&void 0!==k?k:[],setAction:t,setGetTagValues:N,setSearchbox:L}),(0,w.jsx)(G,{isOpen:u,size:"sm",onClose:p,setAction:t})]})}},1125:(e,l,t)=>{"use strict";t.d(l,{A:()=>m});var n=t(9942),i=t(4450),o=t(2554),a=t(5043),r=t(9488),s=t(8860),d=t(8031),c=t(7892),u=t(7508),v=t(7801),h=t(579);const m=e=>{var l,t;const{onClose:m,isOpen:x,fieldName:p,setFieldValue:g,data:f}=e,j=(0,u.wA)(),[S,y]=(0,a.useState)(!1),[b,C]=(0,a.useState)([]),[w,T]=(0,a.useState)([]),[$,B]=(0,a.useState)([]);return(0,a.useEffect)((()=>{j((0,v.T)()),(async()=>{var e,l,t,n,i,o;y(!0);const a=await j((0,c.y)());T(null===a||void 0===a||null===(e=a.payload)||void 0===e?void 0:e.data);const r=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Status",accessor:"leadStatus",isSortable:!0,center:!0,cell:e=>{let{row:l}=e;return l.original.leadStatus}},...(null===a||void 0===a||null===(l=a.payload)||void 0===l||null===(t=l.data)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.fields)||void 0===i||null===(o=i.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&"leadStatus"!==(null===e||void 0===e?void 0:e.name))))||void 0===o?void 0:o.map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name}))))||[]];C(r),y(!1)})()}),[]),(0,h.jsxs)(n.aF,{onClose:m,size:"full",isOpen:x,children:[(0,h.jsx)(n.mH,{}),(0,h.jsxs)(n.$m,{children:[(0,h.jsx)(n.rQ,{children:"Select Lead"}),(0,h.jsx)(n.s_,{}),(0,h.jsx)(n.cw,{children:S?(0,h.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,h.jsx)(r.A,{})}):(0,h.jsx)(d.A,{title:"Leads",isLoding:S,columnData:null!==b&&void 0!==b?b:[],allData:null!==f&&void 0!==f?f:[],tableData:f,tableCustomFields:(null===w||void 0===w||null===(l=w[0])||void 0===l||null===(t=l.fields)||void 0===t?void 0:t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:$,setSelectedValues:B,selectType:"single",customSearch:!1})}),(0,h.jsxs)(n.jl,{children:[(0,h.jsxs)(o.Button,{variant:"brand",size:"sm",me:2,disabled:!!S,leftIcon:(0,h.jsx)(s.NLY,{}),onClick:async()=>{try{y(!0),g(p,$),m()}catch(e){console.log(e)}finally{y(!1)}},children:[" ",S?(0,h.jsx)(r.A,{}):"Select"]}),(0,h.jsx)(o.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>m(),children:"Close"})]})]})]})}},3186:(e,l,t)=>{"use strict";t.d(l,{T:()=>d});var n=t(8510),i=t(9522),o=t(835),a=t(5043);function r(){return r=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var t=arguments[l];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.apply(this,arguments)}var s=["className","rows"],d=(0,i.Rf)((function(e,l){var t=(0,i.Vl)("Textarea",e),d=(0,i.MN)(e),c=d.className,u=d.rows,v=function(e,l){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],l.indexOf(t)>=0||(i[t]=e[t]);return i}(d,s),h=(0,n.useFormControl)(v),m=u?(0,o.cJ)(t,["h","minH","height","minHeight"]):t;return a.createElement(i.Bv.textarea,r({ref:l,rows:u},h,{className:(0,o.cx)("chakra-textarea",c),__css:m}))}));o.gt&&(d.displayName="Textarea")},4614:(e,l,t)=>{"use strict";t.d(l,{A:()=>v});var n=t(9942),i=t(4450),o=t(2554),a=t(5043),r=t(9488),s=t(8860),d=t(8031),c=(t(7892),t(7508)),u=(t(9621),t(579));const v=e=>{const{onClose:l,isOpen:t,fieldName:v,setFieldValue:h,data:m,isLoding:x,setIsLoding:p}=e,[g,f]=((0,c.wA)(),(0,a.useState)([])),[j,S]=(0,a.useState)([]),y=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},..."salesAgent"!==v?[{Header:"role",accessor:"role"}]:[]];return(0,u.jsxs)(n.aF,{onClose:l,size:"full",isOpen:t,children:[(0,u.jsx)(n.mH,{}),(0,u.jsxs)(n.$m,{children:[(0,u.jsx)(n.rQ,{children:"Select User"}),(0,u.jsx)(n.s_,{}),(0,u.jsx)(n.cw,{children:x?(0,u.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(r.A,{})}):(0,u.jsx)(d.A,{title:"Users",isLoding:x,columnData:null!==y&&void 0!==y?y:[],allData:null!==m&&void 0!==m?m:[],tableData:m,AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:j,setSelectedValues:S,selectType:"single",customSearch:!1})}),(0,u.jsxs)(n.jl,{children:[(0,u.jsxs)(o.Button,{variant:"brand",size:"sm",me:2,disabled:!!x,leftIcon:(0,u.jsx)(s.NLY,{}),onClick:async()=>{try{p(!0),h(v,j),l()}catch(e){console.log(e)}finally{p(!1)}},children:[" ",x?(0,u.jsx)(r.A,{}):"Select"]}),(0,u.jsx)(o.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>l(),children:"Close"})]})]})]})}},6445:(e,l,t)=>{"use strict";t.d(l,{A:()=>m});var n=t(1206),i=t(4450),o=t(1778),a=t(5066),r=t(5043),s=t(1094),d=t(216),c=t(6914),u=t(8152),v=t(5369),h=t(579);function m(e){const{columnsData:l,tableData:t,title:m,type:x,selectedValues:p,setSelectedValues:g}=e,f=(0,r.useMemo)((()=>l),[l]),j=(0,r.useMemo)((()=>t),[t]),[S,y]=(JSON.parse(localStorage.getItem("user")),(0,r.useState)()),b=(0,s.useTable)({columns:f,data:j,initialState:{pageIndex:0}},s.useGlobalFilter,s.useSortBy,s.usePagination),{getTableProps:C,getTableBodyProps:w,headerGroups:T,prepareRow:$,page:B,canPreviousPage:D,canNextPage:A,pageOptions:N,pageCount:z,gotoPage:L,nextPage:F,previousPage:I,setPageSize:O,state:{pageIndex:M,pageSize:k}}=b;(null===N||void 0===N?void 0:N.length)<S&&y(null===N||void 0===N?void 0:N.length);const H=(0,n.dU)("gray.500","white"),W=(0,n.dU)("gray.200","whiteAlpha.100"),_=(e,l)=>{var t,n;"multi"===x?null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.checked?g((function(){return[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l]})):g((e=>null===e||void 0===e?void 0:e.filter((e=>e!==l)))):null!==e&&void 0!==e&&null!==(n=e.target)&&void 0!==n&&n.checked?g(l):g(null)};return(0,h.jsxs)(d.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,h.jsx)(i.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,h.jsxs)(i.Text,{color:H,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[m," (",(0,h.jsx)(c.A,{targetNumber:null===j||void 0===j?void 0:j.length},null===j||void 0===j?void 0:j.length),")"]})}),(0,h.jsx)(i.Box,{overflowY:"auto",className:"table-container-property",children:(0,h.jsxs)(o.XI,{...C(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,h.jsx)(o.d8,{zIndex:1,children:null===T||void 0===T?void 0:T.map(((e,l)=>{var t;return(0,r.createElement)(o.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,r.createElement)(o.Th,{...e.getHeaderProps(!1!==(null===e||void 0===e?void 0:e.isSortable)&&(null===e||void 0===e?void 0:e.getSortByToggleProps())),pe:"10px",key:l,borderColor:W},(0,h.jsxs)(i.Flex,{align:"center",justifyContent:null!==e&&void 0!==e&&e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,h.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:null===e||void 0===e?void 0:e.render("Header")}),!1!==(null===e||void 0===e?void 0:e.isSortable)&&(0,h.jsx)("span",{children:null!==e&&void 0!==e&&e.isSorted?null!==e&&void 0!==e&&e.isSortedDesc?(0,h.jsx)(v.GOR,{}):(0,h.jsx)(v.XhJ,{}):(0,h.jsx)(v.MjW,{})})]})))))}))}),(0,h.jsxs)(o.NN,{...w(),children:[0===(null===j||void 0===j?void 0:j.length)&&(0,h.jsx)(o.Tr,{children:(0,h.jsx)(o.Td,{colSpan:null===f||void 0===f?void 0:f.length,children:(0,h.jsx)(i.Text,{textAlign:"center",width:"100%",color:H,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===B||void 0===B?void 0:B.map(((e,l)=>{var t;return $(e),(0,r.createElement)(o.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{var t,n;let s="";var d;"#"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)?s=(0,h.jsxs)(i.Flex,{align:"center",children:["multi"===x?(0,h.jsx)(a.Sc,{colorScheme:"brandScheme",value:p,isChecked:null===p||void 0===p?void 0:p.includes(null===e||void 0===e?void 0:e.value),onChange:l=>_(l,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,h.jsx)(a.Sc,{colorScheme:"brandScheme",value:p,isChecked:p===(null===e||void 0===e?void 0:e.value),onChange:l=>_(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,h.jsx)(i.Text,{color:H,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.index)+1})]}):"Name"===(null===e||void 0===e||null===(n=e.column)||void 0===n?void 0:n.Header)&&(s=(0,h.jsx)(i.Text,{me:"10px",color:H,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,r.createElement)(o.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},s)})))}))]})]})}),(null===j||void 0===j?void 0:j.length)>5&&(0,h.jsx)(u.A,{gotoPage:L,gopageValue:S,setGopageValue:y,pageCount:z,canPreviousPage:D,previousPage:I,canNextPage:A,pageOptions:N,setPageSize:O,nextPage:F,pageSize:k,pageIndex:M})]})}},8757:(e,l,t)=>{"use strict";t.d(l,{A:()=>m});var n=t(9942),i=t(4450),o=t(2554),a=t(5043),r=t(9488),s=t(3915),d=t(3288),c=t(6445),u=t(8860),v=t(7508),h=t(579);const m=e=>{var l,t;const{onClose:m,isOpen:x,fieldName:p,setFieldValue:g,data:f,selectedItems:j}=e,S=null===j||void 0===j?void 0:j.map((e=>null===e||void 0===e?void 0:e._id)),[y,b]=(0,a.useState)(S),[C,w]=(0,a.useState)([]),[T,$]=(0,a.useState)([]),[B,D]=(0,a.useState)(!1),A=(0,v.wA)();(0,a.useEffect)((()=>{b(S)}),[j]),(0,a.useEffect)((async()=>{await A((0,d.g)()),(async()=>{var e,l,t,n;D(!0);const i=await A((0,s.R)());$(null===i||void 0===i||null===(e=i.payload)||void 0===e?void 0:e.data);const o=[{Header:"#",accessor:"_id",isSortable:!1,width:10},...((null===i||void 0===i||null===(l=i.payload)||void 0===l||null===(t=l.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.fields)||[]).filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))).map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name})))];w(o),D(!1)})()}),[]);JSON.parse(localStorage.getItem("user"));const N=[...new Set(y)];return(0,h.jsxs)(n.aF,{onClose:m,size:"full",isOpen:x,children:[(0,h.jsx)(n.mH,{}),(0,h.jsxs)(n.$m,{children:[(0,h.jsx)(n.rQ,{children:"Select Property"}),(0,h.jsx)(n.s_,{}),(0,h.jsx)(n.cw,{children:B?(0,h.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,h.jsx)(r.A,{})}):(0,h.jsx)(c.A,{title:"Property",isLoding:B,allData:f,tableData:f,type:"multi",tableCustomFields:(null===T||void 0===T||null===(l=T[0])||void 0===l||null===(t=l.fields)||void 0===t?void 0:t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],selectedValues:y,setSelectedValues:b,columnsData:null!==C&&void 0!==C?C:[]})}),(0,h.jsxs)(n.jl,{children:[(0,h.jsxs)(o.Button,{variant:"brand",onClick:async()=>{try{D(!0),g(p,N),m()}catch(e){console.log(e)}finally{D(!1)}},disabled:!!B,leftIcon:(0,h.jsx)(u.NLY,{}),children:[" ",B?(0,h.jsx)(r.A,{}):"Select"]}),(0,h.jsx)(o.Button,{onClick:()=>m(),children:"Close"})]})]})]})}},9565:(e,l,t)=>{"use strict";t.d(l,{A:()=>m});var n=t(9942),i=t(4450),o=t(2554),a=t(5043),r=(t(1046),t(9488)),s=t(8860),d=t(8031),c=t(850),u=t(6547),v=t(7508),h=t(579);const m=e=>{var l,t;const{onClose:m,isOpen:x,fieldName:p,setFieldValue:g,data:f}=e,[j,S]=(0,a.useState)(),[y,b]=(0,a.useState)([]),[C,w]=(0,a.useState)(!1),[T,$]=(0,a.useState)([]),B=(0,v.wA)();return(0,a.useEffect)((async()=>{await B((0,u.h)()),(async()=>{var e,l,t,n;w(!0);const i=await B((0,c.I)());b(null===i||void 0===i||null===(e=i.payload)||void 0===e?void 0:e.data);const o=[{Header:"#",accessor:"_id",isSortable:!1,width:10},...((null===i||void 0===i||null===(l=i.payload)||void 0===l||null===(t=l.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.fields)||[]).filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))).map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name})))];$(o),w(!1)})()}),[]),(0,h.jsxs)(n.aF,{onClose:m,size:"full",isOpen:x,children:[(0,h.jsx)(n.mH,{}),(0,h.jsxs)(n.$m,{children:[(0,h.jsx)(n.rQ,{children:"Select Contact"}),(0,h.jsx)(n.s_,{}),(0,h.jsx)(n.cw,{children:C?(0,h.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,h.jsx)(r.A,{})}):(0,h.jsx)(d.A,{title:"Contacts",isLoding:C,columnData:null!==T&&void 0!==T?T:[],allData:null!==f&&void 0!==f?f:[],tableData:f,tableCustomFields:(null===y||void 0===y||null===(l=y[0])||void 0===l||null===(t=l.fields)||void 0===t?void 0:t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:j,setSelectedValues:S,selectType:"single",customSearch:!1})}),(0,h.jsxs)(n.jl,{children:[(0,h.jsxs)(o.Button,{variant:"brand",size:"sm",me:2,onClick:async()=>{try{w(!0),g(p,j),m()}catch(e){console.log(e)}finally{w(!1)}},disabled:!!C,leftIcon:(0,h.jsx)(s.NLY,{}),children:[" ",C?(0,h.jsx)(r.A,{}):"Select"]}),(0,h.jsx)(o.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>m(),children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=1114.9b3dc34b.chunk.js.map