"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[2107],{2107:(e,l,i)=>{i.r(l),i.d(l,{default:()=>w});var o=i(5043),t=i(3216),n=i(5574),d=i(9754),s=i(4450),a=i(5376),r=i(4034),c=i(7368),u=i(9621),v=i(8031),p=i(8700),x=i(2943),h=i(9942),m=i(2554),j=i(9488),y=i(3516),f=i(3848),S=i(579);const b=e=>{var l;const{onClose:i,isOpen:n,fetchData:d,text:a,customFields:r}=e,[c,u]=(0,o.useState)(!1),v=(0,t.Zp)(),p=(0,y.Wx)({initialValues:{property:""},onSubmit:(e,l)=>{let{resetForm:i}=l;A(),i()}}),{errors:x,touched:b,values:g,handleBlur:C,handleChange:I,handleSubmit:z,setFieldValue:F,resetForm:w}=p,A=async()=>{try{u(!0),w(),null!==g&&void 0!==g&&g.property&&(i(),v("/propertyImport",{state:{fileData:null===g||void 0===g?void 0:g.property,customFields:r}}))}catch(e){console.log(e)}finally{u(!1)}};return(0,S.jsxs)(h.aF,{onClose:i,isOpen:n,isCentered:!0,children:[(0,S.jsx)(h.mH,{}),(0,S.jsxs)(h.$m,{children:[(0,S.jsx)(h.rQ,{children:"Import Properties"}),(0,S.jsx)(h.s_,{}),(0,S.jsx)(h.cw,{children:(0,S.jsx)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,S.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,S.jsx)(f.A,{count:null===g||void 0===g||null===(l=g.property)||void 0===l?void 0:l.length,onFileSelect:e=>F("property",e),text:a}),(0,S.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",(null===x||void 0===x?void 0:x.property)&&(null===b||void 0===b?void 0:b.property)&&(0,S.jsxs)(S.Fragment,{children:["Please Select ",a]})]})]})})}),(0,S.jsxs)(h.jl,{children:[(0,S.jsx)(m.Button,{size:"sm",variant:"brand",onClick:z,disabled:!!c,children:c?(0,S.jsx)(j.A,{}):"Save"}),(0,S.jsx)(m.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{i(),p.resetForm()},children:"Close"})]})]})]})};var g=i(8177),C=i(3915),I=i(7508),z=i(3288),F=i(2145);const w=()=>{var e,l,i;JSON.parse(localStorage.getItem("user"));const h=(0,t.Zp)(),m=(0,I.wA)(),[j]=(0,n.h)(["Properties"]),[y,f]=(0,o.useState)(!1),[w,A]=(0,o.useState)([]),[D,O]=(0,o.useState)([]),[B,V]=(0,o.useState)(!1),{isOpen:k,onOpen:T,onClose:_}=(0,d.j1)(),[P,W]=(0,o.useState)([]),[E,G]=(0,o.useState)(!1),[H,U]=(0,o.useState)(!1),[L,N]=(0,o.useState)(),[R,$]=(0,o.useState)([]),[J,M]=(0,o.useState)(!1),Q=(0,I.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.propertyData)||void 0===l?void 0:l.data}));return(0,o.useEffect)((()=>{m((0,z.g)()),(async()=>{var e,l,i,o,t,n,d,u,v;f(!0);const p=await m((0,C.R)());var x;200===(null===p||void 0===p||null===(e=p.payload)||void 0===e?void 0:e.status)?W(null===p||void 0===p||null===(x=p.payload)||void 0===x?void 0:x.data):F.oR.error("Failed to fetch data","error");const y={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:l}=e;return(0,S.jsx)(s.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,S.jsxs)(a.W1,{isLazy:!0,children:[(0,S.jsx)(a.IU,{children:(0,S.jsx)(c.txp,{})}),(0,S.jsxs)(a.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===j||void 0===j?void 0:j.update)&&(0,S.jsx)(a.Dr,{py:2.5,icon:(0,S.jsx)(r.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;G(!0),N(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===j||void 0===j?void 0:j.view)&&(0,S.jsx)(a.Dr,{py:2.5,color:"green",icon:(0,S.jsx)(r.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;h(`/propertyView/${null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id}`)},children:"View"}),(null===j||void 0===j?void 0:j.delete)&&(0,S.jsx)(a.Dr,{py:2.5,color:"red",icon:(0,S.jsx)(r.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e,i;U(!0),$([null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id]),N(null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i._id)},children:"Delete"})]})]})})}},b=[{Header:"#",accessor:"_id",isSortable:!1,width:10},...null!==p&&void 0!==p&&null!==(l=p.payload)&&void 0!==l&&l.data&&p.payload.data.length>0&&(null===p||void 0===p||null===(i=p.payload)||void 0===i||null===(o=i.data[0])||void 0===o||null===(t=o.fields)||void 0===t||null===(n=t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&(null===e||void 0===e?void 0:e.isView))))||void 0===n?void 0:n.map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name,cell:e=>(0,S.jsx)("div",{className:"selectOpt",children:(0,S.jsx)(s.Text,{onClick:()=>{var l,i;h(`/propertyView/${null===e||void 0===e||null===(l=e.row)||void 0===l||null===(i=l.original)||void 0===i?void 0:i._id}`)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||"-"})})}))))||[],...((null===p||void 0===p||null===(d=p.payload)||void 0===d||null===(u=d.data)||void 0===u||null===(v=u[0])||void 0===v?void 0:v.fields)||[]).filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&!(null!==e&&void 0!==e&&e.isView))).map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name}))),...null!==j&&void 0!==j&&j.update||null!==j&&void 0!==j&&j.view||null!==j&&void 0!==j&&j.delete?[y]:[]];O(b),f(!1)})()}),[B]),(0,S.jsxs)("div",{children:[(0,S.jsx)(s.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:4,children:!y&&(0,S.jsx)(s.GridItem,{colSpan:6,children:(0,S.jsx)(v.A,{title:"Properties",isLoding:y,columnData:null!==D&&void 0!==D?D:[],allData:null!==Q&&void 0!==Q?Q:[],tableData:Q,tableCustomFields:(null===P||void 0===P||null===(e=P[0])||void 0===e||null===(l=e.fields)||void 0===l?void 0:l.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],access:j,onOpen:T,selectedValues:R,setSelectedValues:$,setDelete:U,setIsImport:M})})}),k&&(0,S.jsx)(p.A,{propertyData:P[0],isOpen:k,size:"lg",onClose:_,setAction:V}),E&&(0,S.jsx)(x.A,{isOpen:E,size:"lg",propertyData:P[0],selectedId:L,setSelectedId:N,onClose:G,setAction:V}),H&&(0,S.jsx)(g.A,{isOpen:H,onClose:()=>U(!1),type:"Properties",handleDeleteData:async e=>{try{f(!0);let l=await(0,u.Vn)("api/property/deleteMany",e);200===(null===l||void 0===l?void 0:l.status)&&($([]),U(!1),V((e=>!e)))}catch(l){console.log(l)}finally{f(!1)}},ids:R}),J&&(0,S.jsx)(b,{text:"Property file",isOpen:J,onClose:M,customFields:(null===P||void 0===P||null===(i=P[0])||void 0===i?void 0:i.fields)||[]})]})}},2943:(e,l,i)=>{i.d(l,{A:()=>m});var o=i(4034),t=i(9942),n=i(2554),d=i(4450),s=i(9488),a=i(3516),r=i(5043),c=i(3216),u=i(9621),v=i(2030),p=i(8908),x=i(899),h=i(579);const m=e=>{var l,i,m,j,y;const{data:f}=e,S=null===Object||void 0===Object?void 0:Object.fromEntries(null===(l=(null===e||void 0===e||null===(i=e.leadData)||void 0===i?void 0:i.fields)||[])||void 0===l?void 0:l.map((e=>[null===e||void 0===e?void 0:e.name,""]))),[b,g]=(0,r.useState)({...S,createBy:null===(m=JSON.parse(localStorage.getItem("user")))||void 0===m?void 0:m._id}),C=(0,c.g)(),I=(0,a.Wx)({initialValues:b,validationSchema:null===(j=x.object())||void 0===j?void 0:j.shape((0,v.g)(null===e||void 0===e||null===(y=e.propertyData)||void 0===y?void 0:y.fields)),enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:i}=l;T()}}),{errors:z,touched:F,values:w,handleBlur:A,handleChange:D,handleSubmit:O,setFieldValue:B}=I,[V,k]=(0,r.useState)(!1),T=async()=>{try{k(!0);let l=await(0,u.yP)(`api/property/edit/${(null===e||void 0===e?void 0:e.selectedId)||(null===C||void 0===C?void 0:C.id)}`,w);200===(null===l||void 0===l?void 0:l.status)&&(e.onClose(),e.setAction((e=>!e)))}catch(l){console.log(l)}finally{k(!1)}};let _;return(0,r.useEffect)((()=>{(async()=>{if(f)g((e=>({...e,...f})));else if(null!==e&&void 0!==e&&e.selectedId)try{k(!0),_=await(0,u.x4)("api/property/view/",null===e||void 0===e?void 0:e.selectedId),g((e=>{var l,i;return{...e,...null===(l=_)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.property}}))}catch(l){console.error(l)}finally{k(!1)}})()}),[null===e||void 0===e?void 0:e.selectedId,f]),(0,h.jsx)("div",{children:(0,h.jsxs)(t._s,{isOpen:null===e||void 0===e?void 0:e.isOpen,size:null===e||void 0===e?void 0:e.size,children:[(0,h.jsx)(t.QP,{}),(0,h.jsxs)(t.zj,{children:[(0,h.jsxs)(t.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Edit ",(null===w||void 0===w?void 0:w.name)||"Property",(0,h.jsx)(n.IconButton,{onClick:()=>{e.onClose(!1),e.setSelectedId&&(null===e||void 0===e||e.setSelectedId())},icon:(0,h.jsx)(o.CloseIcon,{})})]}),(0,h.jsx)(t.ys,{children:V?(0,h.jsx)(d.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,h.jsx)(s.A,{})}):(0,h.jsx)(p.A,{moduleData:null===e||void 0===e?void 0:e.propertyData,values:w,setFieldValue:B,handleChange:D,handleBlur:A,errors:z,touched:F})}),(0,h.jsxs)(t.tb,{children:[(0,h.jsx)(n.Button,{size:"sm",sx:{textTransform:"capitalize"},variant:"brand",disabled:!!V,type:"submit",onClick:O,children:V?(0,h.jsx)(s.A,{}):"Update"}),(0,h.jsx)(n.Button,{size:"sm",variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},onClick:()=>{null===e||void 0===e||e.onClose(!1)},children:"Close"})]})]})]})})}},3848:(e,l,i)=>{i.d(l,{A:()=>r});var o=i(1206),t=i(4450),n=i(3458),d=i(1997),s=i(7149),a=i(579);function r(e){const{count:l,text:i,onFileSelect:r}=e,c=(0,o.dU)("secondaryGray.900","white"),u=(0,o.dU)("brand.500","white");return(0,a.jsxs)(t.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,a.jsx)(t.GridItem,{colSpan:{base:12},children:(0,a.jsx)(d.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===i?"img":"",csv:"csv",height:"100%",onFileSelect:r,isMultipleAllow:!1,content:(0,a.jsxs)(t.Box,{children:[(0,a.jsx)(n.In,{as:s.vpy,w:"80px",h:"80px",color:u}),(0,a.jsx)(t.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,a.jsx)(t.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),l>0&&(0,a.jsxs)(t.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",l]})]})})}),(0,a.jsx)(t.GridItem,{colSpan:{base:12},children:(0,a.jsxs)(t.Flex,{direction:"column",children:[(0,a.jsxs)(t.Text,{color:c,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",i]}),(0,a.jsx)(t.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}},8700:(e,l,i)=>{i.d(l,{A:()=>x});var o=i(4034),t=i(9942),n=i(2554),d=i(9488),s=i(3516),a=i(5043),r=i(9621),c=i(2030),u=i(8908),v=i(899),p=i(579);const x=e=>{var l,i,x,h;const[m,j]=(0,a.useState)(!1),y={...null===Object||void 0===Object?void 0:Object.fromEntries(null===(l=(null===e||void 0===e||null===(i=e.propertyData)||void 0===i?void 0:i.fields)||[])||void 0===l?void 0:l.map((e=>[null===e||void 0===e?void 0:e.name,""]))),createBy:JSON.parse(localStorage.getItem("user"))._id},f=(0,s.Wx)({initialValues:y,enableReinitialize:!0,validationSchema:null===(x=v.object())||void 0===x?void 0:x.shape((0,c.g)(null===e||void 0===e||null===(h=e.propertyData)||void 0===h?void 0:h.fields)),onSubmit:(e,l)=>{let{resetForm:i}=l;w()}}),{errors:S,touched:b,values:g,handleBlur:C,handleChange:I,handleSubmit:z,setFieldValue:F}=f,w=async()=>{try{var l;j(!0);let i=await(0,r.d_)("api/form/add",{...g,moduleId:null===e||void 0===e||null===(l=e.propertyData)||void 0===l?void 0:l._id});200===(null===i||void 0===i?void 0:i.status)&&(e.onClose(),f.resetForm(),e.setAction((e=>!e)))}catch(i){console.log(i)}finally{j(!1)}};return(0,p.jsx)("div",{children:(0,p.jsxs)(t._s,{isOpen:null===e||void 0===e?void 0:e.isOpen,size:null===e||void 0===e?void 0:e.size,children:[(0,p.jsx)(t.QP,{}),(0,p.jsxs)(t.zj,{children:[(0,p.jsxs)(t.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Add Property",(0,p.jsx)(n.IconButton,{onClick:null===e||void 0===e?void 0:e.onClose,icon:(0,p.jsx)(o.CloseIcon,{})})]}),(0,p.jsx)(t.ys,{children:(0,p.jsx)(u.A,{moduleData:null===e||void 0===e?void 0:e.propertyData,values:g,setFieldValue:F,handleChange:I,handleBlur:C,errors:S,touched:b})}),(0,p.jsxs)(t.tb,{children:[(0,p.jsx)(n.Button,{size:"sm",sx:{textTransform:"capitalize"},disabled:!!m,variant:"brand",type:"submit",onClick:z,children:m?(0,p.jsx)(d.A,{}):"Save"}),(0,p.jsx)(n.Button,{size:"sm",variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},onClick:null===e||void 0===e?void 0:e.onClose,children:"Close"})]})]})]})})}}}]);
//# sourceMappingURL=2107.2bab4a16.chunk.js.map