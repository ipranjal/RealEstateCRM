"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[4629],{4629:(e,l,i)=>{i.r(l),i.d(l,{default:()=>w});var t=i(9754),n=i(4450),d=i(2554),o=i(216),a=i(3994),s=i(9488),r=i(6178),c=i.n(r),m=i(5043),v=i(4960),x=i(3216),h=i(5475),u=i(5574),p=i(9621),j=i(5369),b=i(74),f=i.n(b),g=(i(3288),i(3915)),S=i(8031),y=i(7508),T=i(579);const w=()=>{var e,l,i,r,b;const w=(0,x.g)(),[I,k]=(0,m.useState)(),{isOpen:A,onOpen:B,onClose:G}=(0,t.j1)(),[C,D]=(0,m.useState)(!1),[z,W]=(0,m.useState)(!1),[E,N]=(JSON.parse(localStorage.getItem("user")),(0,m.useState)(!1)),F=(0,x.Zp)(),[_,L]=(0,m.useState)(!1),[M,P]=(0,m.useState)([]),[H,O]=(0,m.useState)(),R=(0,y.wA)();(0,m.useEffect)((()=>{(async()=>{var e,l,i,t,n;N(!0);const d=await R((0,g.R)()),o=[{Header:"#",accessor:"_id",isSortable:!1,width:10},...null===d||void 0===d||null===(e=d.payload)||void 0===e||null===(l=e.data)||void 0===l||null===(i=l[0])||void 0===i||null===(t=i.fields)||void 0===t||null===(n=t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||void 0===n?void 0:n.map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name})))];P(o),N(!1)})()}),[]);(0,m.useEffect)((()=>{(async()=>{N(!0);let e=await(0,p.x4)("api/email/view/",w.id);k(null===e||void 0===e?void 0:e.data),N(!1)})()}),[]);const[V,Y,$]=(0,u.h)(["Contacts","Leads","Properties"]);return(0,T.jsx)(T.Fragment,{children:E?(0,T.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,T.jsx)(s.A,{})}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(n.Grid,{templateColumns:"repeat(4, 1fr)",gap:3,id:"reports",children:[(0,T.jsx)(n.GridItem,{colSpan:{base:4},children:(0,T.jsx)(n.Heading,{size:"lg",m:3,children:null===I||void 0===I?void 0:I.senderEmail})}),(0,T.jsx)(n.GridItem,{colSpan:{base:4},children:(0,T.jsx)(o.A,{children:(0,T.jsxs)(n.Grid,{gap:4,children:[(0,T.jsx)(n.GridItem,{colSpan:2,children:(0,T.jsxs)(n.Box,{children:[(0,T.jsxs)(n.Box,{display:"flex",justifyContent:"space-between",children:[(0,T.jsx)(n.Heading,{size:"md",mb:3,children:"Email Details"}),(0,T.jsxs)(n.Box,{id:"hide-btn",children:[(0,T.jsx)(d.Button,{leftIcon:(0,T.jsx)(j.kl1,{}),size:"sm",variant:"brand",onClick:()=>{L(!0);const e=document.getElementById("reports"),l=document.getElementById("hide-btn");e?(l.style.display="none",f()().from(e).set({margin:[0,0,0,0],filename:`Email_Details_${c()().format("DD-MM-YYYY")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).save().then((()=>{L(!1),l.style.display=""}))):(console.error("Element with ID 'reports' not found."),L(!1))},disabled:_,children:_?"Please Wait...":"Print as PDF"}),(0,T.jsx)(d.Button,{leftIcon:(0,T.jsx)(v.m6W,{}),size:"sm",variant:"brand",onClick:()=>F(-1),style:{marginLeft:10},children:"Back"})]})]}),(0,T.jsx)(a.E,{})]})}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Sender"," "]}),(0,T.jsx)(n.Text,{children:null!==I&&void 0!==I&&I.senderEmail?null===I||void 0===I?void 0:I.senderEmail:" - "})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Recipient"," "]}),(0,T.jsx)(n.Text,{children:null!==I&&void 0!==I&&I.recipient?null===I||void 0===I?void 0:I.recipient:" - "})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Create From"," "]}),null!==I&&void 0!==I&&I.createBy?(0,T.jsx)(h.N_,{to:`/contactView/${null===I||void 0===I?void 0:I.createBy}`,children:(0,T.jsx)(n.Text,{color:null!==V&&void 0!==V&&V.view?"brand.600":"blackAlpha.900",sx:{"&:hover":{color:null!==V&&void 0!==V&&V.view?"blue.500":"blackAlpha.900",textDecoration:null!==V&&void 0!==V&&V.view?"underline":"none"}},children:null!==I&&void 0!==I&&I.createByName?null===I||void 0===I?void 0:I.createByName:" - "})}):(0,T.jsx)(h.N_,{to:`/leadView/${null===I||void 0===I?void 0:I.createByLead}`,children:(0,T.jsx)(n.Text,{color:null!==Y&&void 0!==Y&&Y.view?"brand.600":"blackAlpha.900",sx:{"&:hover":{color:null!==Y&&void 0!==Y&&Y.view?"blue.500":"blackAlpha.900",textDecoration:null!==Y&&void 0!==Y&&Y.view?"underline":"none"}},children:null!==I&&void 0!==I&&I.createByName?null===I||void 0===I?void 0:I.createByName:" - "})})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Realeted To"," "]}),(0,T.jsx)(n.Text,{children:null!==I&&void 0!==I&&I.createBy?"Contact":(null===I||void 0===I?void 0:I.createByLead)&&"Lead"})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Start Date"," "]}),(0,T.jsxs)(n.Text,{children:[" ",null!==I&&void 0!==I&&I.startDate?c()(null===I||void 0===I?void 0:I.startDate).format("lll "):" - "," "]})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:["End Date"," "]}),(0,T.jsxs)(n.Text,{children:[" ",null!==I&&void 0!==I&&I.endDate?c()(null===I||void 0===I?void 0:I.endDate).format("lll "):" - "," "]})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Time stamp"," "]}),(0,T.jsxs)(n.Text,{children:[" ",null!==I&&void 0!==I&&I.timestamp?c()(null===I||void 0===I?void 0:I.timestamp).format("lll "):" - "," ","[",null!==I&&void 0!==I&&I.timestamp?c()(null===I||void 0===I?void 0:I.timestamp).toNow():" - ","]"]})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Subject"," "]}),(0,T.jsx)(n.Text,{children:null!==I&&void 0!==I&&I.subject?null===I||void 0===I?void 0:I.subject:" - "})]}),(0,T.jsxs)(n.GridItem,{colSpan:{base:2},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Sales Agent"," "]}),(0,T.jsx)(n.Text,{children:null!==I&&void 0!==I&&I.salesAgentName?null===I||void 0===I?void 0:I.salesAgentName:" - "})]})]})})})]}),(0,T.jsx)(o.A,{mt:3,children:(0,T.jsx)(n.Grid,{templateColumns:"repeat(6, 1fr)",gap:1,children:(0,T.jsxs)(n.GridItem,{colSpan:{base:2},style:{maxWidth:"100%",width:"100%",boxSizing:"border-box",padding:"0 10px"},children:[(0,T.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Message"," "]}),(0,T.jsx)("pre",{style:{whiteSpace:"pre-wrap",display:"flex",justifyContent:"center",alignItems:"center",alignContent:"center"},children:"message"===(null===I||void 0===I?void 0:I.type)?(0,T.jsx)(n.Text,{children:null!==I&&void 0!==I&&I.message?null===I||void 0===I?void 0:I.message:"-"}):(0,T.jsx)("div",{style:{width:"100%",display:"flex",alignContent:"center",alignItems:"center",padding:"50px 50px"},dangerouslySetInnerHTML:{__html:null===I||void 0===I?void 0:I.html}})})]})})}),(0,T.jsx)(n.Grid,{templateColumns:"repeat(2, 1fr)",gap:1,mt:3,children:(0,T.jsx)(n.GridItem,{colSpan:{base:2},children:(0,T.jsx)(S.A,{title:"Properties",isLoding:E,columnData:null!==M&&void 0!==M?M:[],allData:null!==(e=null===I||void 0===I?void 0:I.properties)&&void 0!==e?e:[],tableData:null!==(l=null===I||void 0===I?void 0:I.properties)&&void 0!==l?l:[],AdvanceSearch:!1,tableCustomFields:(null===I||void 0===I||null===(i=I.properties)||void 0===i||null===(r=i[0])||void 0===r||null===(b=r.fields)||void 0===b?void 0:b.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],addBtn:!1,ManageGrid:!1,deleteMany:!1,checkBox:!1,access:$,selectedValues:H,setSelectedValues:O})})})]})})}}}]);
//# sourceMappingURL=4629.15054755.chunk.js.map