"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[2673],{2673:(e,a,s)=>{s.r(a),s.d(a,{default:()=>A});var t=s(5043),l=s(3216),i=s(5475),n=s(4034),r=s(4450),o=s(5376),d=s(2554),c=s(9621),u=s(8031),m=s(7368),v=s(4960),h=(s(9201),s(2876),s(3516)),x=s(899),S=s(9942),j=s(8510),p=s(7682),f=s(9488),b=s(3017),g=s(7508),N=s(579);const D=e=>{const{allData:a,advanceSearch:s,setAdvanceSearch:t,isLoding:l,setDisplaySearchData:i,setSearchbox:n}=e,o=(0,g.wA)(),c=x.object({firstName:x.string(),username:x.string().email("User Email is invalid"),lastName:x.string()}),u=(0,h.Wx)({initialValues:{firstName:"",username:"",lastName:""},validationSchema:c,onSubmit:(e,s)=>{let{resetForm:l}=s;o((0,b.gB)(e)),o((0,b.DW)({values:e,allData:a,type:"Users"})),l();const r=[{name:["firstName"],value:null===e||void 0===e?void 0:e.firstName},{name:["lastName"],value:null===e||void 0===e?void 0:e.lastName},{name:["username"],value:null===e||void 0===e?void 0:e.username}];o((0,b.Tr)(null===r||void 0===r?void 0:r.filter((e=>null===e||void 0===e?void 0:e.value)))),i(!0),t(!1),n("")}}),{errors:m,touched:v,values:D,handleBlur:C,handleChange:y,handleSubmit:A,resetForm:z,dirty:I}=u;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(S.aF,{onClose:()=>{t(!1),z()},isOpen:s,isCentered:!0,children:[(0,N.jsx)(S.mH,{}),(0,N.jsxs)(S.$m,{children:[(0,N.jsx)(S.rQ,{children:"Advance Search"}),(0,N.jsx)(S.s_,{onClick:()=>{t(!1),z()}}),(0,N.jsx)(S.cw,{children:(0,N.jsxs)(r.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,N.jsxs)(r.GridItem,{colSpan:{base:12},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"First Name"}),(0,N.jsx)(p.Input,{fontSize:"sm",onChange:y,onBlur:C,value:null===D||void 0===D?void 0:D.firstName,name:"firstName",placeholder:"Enter First Name",fontWeight:"500"}),(0,N.jsxs)(r.Text,{mb:"10px",color:"red",children:[" ",(null===m||void 0===m?void 0:m.firstName)&&(null===v||void 0===v?void 0:v.firstName)&&(null===m||void 0===m?void 0:m.firstName)]})]}),(0,N.jsxs)(r.GridItem,{colSpan:{base:12},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Last Name"}),(0,N.jsx)(p.Input,{fontSize:"sm",onChange:y,onBlur:C,value:null===D||void 0===D?void 0:D.lastName,name:"lastName",placeholder:"Enter Last Name",fontWeight:"500"}),(0,N.jsxs)(r.Text,{mb:"10px",color:"red",children:[" ",(null===m||void 0===m?void 0:m.lastName)&&(null===v||void 0===v?void 0:v.lastName)&&(null===m||void 0===m?void 0:m.lastName)]})]}),(0,N.jsxs)(r.GridItem,{colSpan:{base:12},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Email Id"}),(0,N.jsx)(p.Input,{fontSize:"sm",onChange:y,onBlur:C,value:null===D||void 0===D?void 0:D.username,name:"username",placeholder:"Enter User Name",fontWeight:"500"}),(0,N.jsxs)(r.Text,{mb:"10px",color:"red",children:[" ",(null===m||void 0===m?void 0:m.username)&&(null===v||void 0===v?void 0:v.username)&&(null===m||void 0===m?void 0:m.username)]})]})]})}),(0,N.jsxs)(S.jl,{children:[(0,N.jsx)(d.Button,{size:"sm",variant:"brand",mr:2,onClick:A,disabled:!(!l&&I),children:l?(0,N.jsx)(f.A,{}):"Search"}),(0,N.jsx)(d.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>z(),children:"Clear"})]})]})]})})};var C=s(8177),y=s(4978);const A=()=>{const[e,a]=(0,t.useState)(!1),[s,h]=(0,t.useState)({}),[x,S]=(0,t.useState)(!1),[j,p]=(0,t.useState)(),[f,b]=(0,t.useState)(!1),[g,A]=(0,t.useState)([]),[z,I]=(0,t.useState)(!1),[k,w]=(0,t.useState)([]),[W,B]=(0,t.useState)(""),V=(0,l.Zp)(),[F,O]=(0,t.useState)(!1),[T,E]=(0,t.useState)([]),[L,_]=(0,t.useState)(!1),[U,H]=(0,t.useState)([]),[G,$]=(0,t.useState)(""),M=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Email Id",accessor:"username",cell:e=>{var a,s;return(0,N.jsx)(i.N_,{to:`/userView/${null===e||void 0===e||null===(a=e.row)||void 0===a||null===(s=a.values)||void 0===s?void 0:s._id}`,children:(0,N.jsx)(r.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})}},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Role",accessor:"role"},{Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var a;let{row:s}=e;return(0,N.jsx)(r.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,N.jsxs)(o.W1,{isLazy:!0,children:[(0,N.jsx)(o.IU,{children:(0,N.jsx)(m.txp,{})}),(0,N.jsxs)(o.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(0,N.jsx)(o.Dr,{py:2.5,onClick:()=>{h(null===s||void 0===s?void 0:s.original),S(!0),p(null===s||void 0===s?void 0:s.original._id),$("edit")},icon:(0,N.jsx)(n.EditIcon,{mb:1,fontSize:15}),children:"Edit"}),(0,N.jsx)(o.Dr,{py:2.5,color:"green",onClick:()=>V(`/userView/${null===s||void 0===s?void 0:s.values._id}`),icon:(0,N.jsx)(n.ViewIcon,{mb:1,fontSize:15}),children:"View"}),"superAdmin"===(null===s||void 0===s||null===(a=s.original)||void 0===a?void 0:a.role)?"":(0,N.jsx)(o.Dr,{py:2.5,color:"red",onClick:()=>{A([null===s||void 0===s?void 0:s.original._id]),b(!0)},icon:(0,N.jsx)(n.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})})}}],Q=async()=>{var e;O(!0);let a=await(0,c.x4)("api/user/");E(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.user),O(!1)};return(0,t.useEffect)((()=>{Q()}),[e]),(0,N.jsxs)("div",{children:[(0,N.jsx)(u.A,{title:"Users",isLoding:F,columnData:null!==M&&void 0!==M?M:[],allData:null!==T&&void 0!==T?T:[],tableData:L?U:T,searchDisplay:L,setSearchDisplay:_,searchedDataOut:U,setSearchedDataOut:H,tableCustomFields:[],access:{create:!0,edit:!0,delete:!0,view:!0},onOpen:()=>{$("add"),S(!0)},selectedValues:g,setSelectedValues:A,setDelete:b,BackButton:(0,N.jsx)(d.Button,{onClick:()=>V("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,N.jsx)(v.m6W,{}),ml:2,children:"Back"}),AdvanceSearch:(0,N.jsx)(d.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,N.jsx)(n.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>I(!0),children:"Advance Search"}),getTagValuesOutSide:k,searchboxOutside:W,setGetTagValuesOutside:w,setSearchboxOutside:B,handleSearchType:"UsersSearch"}),(0,N.jsx)(y.A,{isOpen:x,onClose:()=>{S(!1)},data:s,selectedId:j,userAction:G,setAction:a,setUserAction:$,fetchData:Q}),(0,N.jsx)(C.A,{isOpen:f,onClose:()=>b(!1),type:"User",handleDeleteData:async()=>{try{O(!0);let e=await(0,c.Vn)("api/user/deleteMany",g);200===(null===e||void 0===e?void 0:e.status)&&(A([]),b(!1),a((e=>!e)))}catch(e){console.log(e)}finally{O(!1)}},ids:"",selectedValues:g}),(0,N.jsx)(D,{advanceSearch:z,setAdvanceSearch:I,setSearchedData:H,setDisplaySearchData:_,allData:null!==T&&void 0!==T?T:[],setAction:a,setGetTagValues:w,setSearchbox:B})]})}}}]);
//# sourceMappingURL=2673.aa69e93a.chunk.js.map