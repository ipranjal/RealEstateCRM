"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[6419],{4734:(e,t,n)=>{var i,l=n(5043),o=(i=l)&&"object"==typeof i&&"default"in i?i.default:i;function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var d=[],r=!1,s=function(){if(r)for(var e;e=d.shift();)e()},u="undefined"==typeof window?{__unlayer_lastEditorId:0}:window;u.__unlayer_lastEditorId=u.__unlayer_lastEditorId||0;var c=o.forwardRef((function(e,t){var n,i,c,v,p,m,f,h,y,j=e.onLoad,x=e.onReady,g=e.scriptUrl,E=e.minHeight,b=void 0===E?500:E,I=e.style,w=void 0===I?{}:I,S=l.useState(null),_=S[0],C=S[1],k=l.useState(!1),N=k[0],O=k[1],R=l.useMemo((function(){return e.editorId||"editor-"+ ++u.__unlayer_lastEditorId}),[e.editorId]),z=a({},e.options||{},{appearance:null!=(n=e.appearance)?n:null==(i=e.options)?void 0:i.appearance,displayMode:(null==e?void 0:e.displayMode)||(null==(c=e.options)?void 0:c.displayMode)||"email",locale:null!=(v=e.locale)?v:null==(p=e.options)?void 0:p.locale,projectId:null!=(m=e.projectId)?m:null==(f=e.options)?void 0:f.projectId,tools:null!=(h=e.tools)?h:null==(y=e.options)?void 0:y.tools,id:R,source:{name:"react-email-editor",version:"1.7.11"}});l.useImperativeHandle(t,(function(){return{editor:_}}),[_]),l.useEffect((function(){return function(){null==_||_.destroy()}}),[]),l.useEffect((function(){O(!1),function(e,t){if(void 0===t&&(t="https://editor.unlayer.com/embed.js?2"),d.push((function(){return O(!0)})),function(e){var t=document.querySelectorAll("script"),n=!1;return t.forEach((function(t){t.src.includes(e)&&(n=!0)})),n}(t))s();else{var n=document.createElement("script");n.setAttribute("src",t),n.onload=function(){r=!0,s()},document.head.appendChild(n)}}(0,g)}),[g]),l.useEffect((function(){N&&(null==_||_.destroy(),C(unlayer.createEditor(z)))}),[JSON.stringify(z),N]);var G=Object.keys(e).filter((function(e){return/^on/.test(e)}));return l.useEffect((function(){_&&(null==j||j(_),G.forEach((function(t){/^on/.test(t)&&"onLoad"!==t&&"onReady"!==t&&"function"==typeof e[t]&&_.addEventListener(t,e[t])})),x&&_.addEventListener("editor:ready",(function(){x(_)})))}),[_,Object.keys(G).join(",")]),o.createElement("div",{style:{flex:1,display:"flex",minHeight:b}},o.createElement("div",{id:R,style:a({},w,{flex:1})}))}));t.EmailEditor=c},4857:(e,t,n)=>{e.exports=n(4734)},6419:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var i=n(4450),l=n(2554),o=n(7682),a=n(5043),d=(n(6178),n(3216)),r=n(5475),s=n(9621),u=n(216),c=n(4960),v=n(5574),p=n(3994),m=(n(8177),n(4857)),f=n(2145),h=n(579);const y=()=>{const e=JSON.parse(localStorage.getItem("user")),t=(0,d.Zp)(),n=(0,d.zy)(),{type:y,id:j}=(null===n||void 0===n?void 0:n.state)||{},[x]=(0,v.h)(["Email Template"]),g=(0,a.useRef)(null),[E,b]=(0,a.useState)(!1),[I,w]=(0,a.useState)(""),[S,_]=(0,a.useState)("");return(0,a.useEffect)((()=>{"edit"===y&&(async()=>{const e=await(0,s.x4)(`api/email-temp/view/${j}`);var t,n,i,l,o;e&&200===(null===e||void 0===e?void 0:e.status)&&(w(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.templateName),_(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.description),null===g||void 0===g||null===(i=g.current)||void 0===i||null===(l=i.editor)||void 0===l||l.loadDesign(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.design))})()}),[y]),(0,h.jsx)("div",{children:(0,h.jsxs)(u.A,{children:[(0,h.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:1,justifyContent:"space-between",alignItem:"center",children:[(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsxs)(i.Text,{fontSize:"xl",fontWeight:"bold",color:"blackAlpha.900",children:["add"===y?"Create":"Edit"," Template"," "]})}),(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsxs)(i.Flex,{justifyContent:"right",children:[(0,h.jsx)(l.Button,{size:"sm",variant:"brand",onClick:()=>{var e,t,n,i;E?(null===g||void 0===g||null===(e=g.current)||void 0===e||null===(t=e.editor)||void 0===t||t.hidePreview(),b(!1)):(null===g||void 0===g||null===(n=g.current)||void 0===n||null===(i=n.editor)||void 0===i||i.showPreview("desktop"),b(!0))},children:E?"Hide Preview":"Show Preview"}),(0,h.jsx)(l.Button,{size:"sm",variant:"brand",style:{marginLeft:"10px"},onClick:()=>{"add"===y?(()=>{var n,i;""!==I?null===g||void 0===g||null===(n=g.current)||void 0===n||null===(i=n.editor)||void 0===i||i.exportHtml((async n=>{const{html:i}=n,{design:l}=n,o={html:i,design:l,templateName:I,description:S,createBy:null===e||void 0===e?void 0:e._id},a=await(0,s.d_)("api/email-temp/add",o);var d;a&&200===(null===a||void 0===a?void 0:a.status)&&(f.oR.success(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message),w("")),t("/email-template")})):f.oR.error("Template Name is required")})():(()=>{var n,i;""!==I?null===g||void 0===g||null===(n=g.current)||void 0===n||null===(i=n.editor)||void 0===i||i.exportHtml((async n=>{const{html:i}=n,{design:l}=n,o={html:i,design:l,templateName:I,description:S,createBy:null===e||void 0===e?void 0:e._id},a=await(0,s.yP)(`api/email-temp/edit/${j}`,o);var d;a&&200===(null===a||void 0===a?void 0:a.status)&&(f.oR.success(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message),t("/email-template"))})):f.oR.error("Template Name is required")})()},children:"Save"}),(0,h.jsx)(r.N_,{to:"/email-template",style:{marginLeft:"10px"},children:(0,h.jsx)(l.Button,{size:"sm",leftIcon:(0,h.jsx)(c.m6W,{}),variant:"brand",children:"Back"})})]})})]}),(0,h.jsx)(p.E,{}),(0,h.jsx)("div",{children:(0,h.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,mt:2,children:[(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsx)(o.Input,{fontSize:"sm",name:"templateName",placeholder:"Template Name",fontWeight:"500",value:I,onChange:e=>{var t;return w(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsx)(o.Input,{fontSize:"sm",name:"description",placeholder:"Description",fontWeight:"500",value:S,onChange:e=>{var t;return _(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:12},mt:2,children:(0,h.jsx)(m.EmailEditor,{ref:g})})]})})]})})}}}]);
//# sourceMappingURL=6419.6234e61b.chunk.js.map