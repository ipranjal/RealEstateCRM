"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[66],{66:(e,l,o)=>{o.r(l),o.d(l,{default:()=>k});var i=o(4034),n=o(4450),t=o(5376),d=o(2554),r=o(216),s=o(3994),a=o(9488),c=o(5043),u=o(4960),v=o(3216),x=o(5475),m=o(9621),h=(o(9201),o(2876),o(1206)),p=o(1778),g=o(1094),j=o(6914),f=o(2853),S=o(5369),b=o(579);function y(e){const{columnsData:l,tableData:o,title:i,fetchData:t,selectedValues:s,setSelectedValues:a,roleModal:u,setRoleModal:v}=e,x=(0,c.useMemo)((()=>l),[l]),m=(0,c.useMemo)((()=>o),[o]),y=JSON.parse(localStorage.getItem("user")),[T,I]=(0,c.useState)(),A=(0,h.dU)("gray.200","white"),w=(0,h.dU)("secondaryGray.900","white"),C=(0,h.dU)("gray.200","whiteAlpha.100"),z=(0,g.useTable)({columns:x,data:m,initialState:{pageIndex:0}},g.useGlobalFilter,g.useSortBy,g.usePagination),{getTableProps:N,getTableBodyProps:k,headerGroups:D,prepareRow:G,page:H,pageOptions:W,state:{pageIndex:P,pageSize:E}}=z;return(null===W||void 0===W?void 0:W.length)<T&&I(null===W||void 0===W?void 0:W.length),(0,b.jsxs)(r.A,{direction:"column",w:"100%",padding:"0",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,b.jsxs)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,b.jsxs)(n.Text,{color:w,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[i," (",(0,b.jsx)(j.A,{targetNumber:null===m||void 0===m?void 0:m.length},null===m||void 0===m?void 0:m.length),")"]}),"superAdmin"===(null===y||void 0===y?void 0:y.role)&&(0,b.jsx)(d.Button,{onClick:()=>v(!0),leftIcon:(0,b.jsx)(S.obu,{}),bg:A,size:"sm",colorScheme:"gray",children:"Change Role"})]}),(0,b.jsx)(n.Box,{overflowY:"auto",className:"table-container-property",children:(0,b.jsxs)(p.XI,{...N(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,b.jsx)(p.d8,{children:null===D||void 0===D?void 0:D.map(((e,l)=>{var o;return(0,c.createElement)(p.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===e||void 0===e||null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,c.createElement)(p.Th,{...null===e||void 0===e?void 0:e.getHeaderProps(null===e||void 0===e?void 0:e.getSortByToggleProps()),pe:"10px",key:l,borderColor:C},(0,b.jsx)(n.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:null===e||void 0===e?void 0:e.render("Header")})))))}))}),(0,b.jsxs)(p.NN,{...k(),children:[0===(null===m||void 0===m?void 0:m.length)&&(0,b.jsx)(p.Tr,{children:(0,b.jsx)(p.Td,{colSpan:null===x||void 0===x?void 0:x.length,children:(0,b.jsx)(n.Text,{textAlign:"center",width:"100%",color:w,fontSize:"sm",fontWeight:"700",children:(0,b.jsx)(f.A,{})})})}),null===H||void 0===H?void 0:H.map(((e,l)=>{var o;return G(e),(0,c.createElement)(p.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,l)=>{var o,i,t;let d="";var r;"#"===(null===e||void 0===e||null===(o=e.column)||void 0===o?void 0:o.Header)?d=(0,b.jsx)(n.Flex,{align:"center",children:(0,b.jsx)(n.Text,{color:w,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.index)+1})}):"Role Name"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header)?d=(0,b.jsx)(n.Text,{me:"10px",color:w,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"Description"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)&&(d=(0,b.jsx)(n.Text,{me:"10px",fontSize:"sm",fontWeight:"700",color:w,children:null===e||void 0===e?void 0:e.value}));return(0,c.createElement)(p.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},d)})))}))]})]})})]})}var T=o(9942),I=o(5066);const A=e=>{const{columnsData:l,tableData:o,fetchData:t,isOpen:r,id:s,onClose:u,interestRoles:v}=e,x=(0,h.dU)("secondaryGray.900","white"),j=(0,h.dU)("gray.200","whiteAlpha.100"),S=(0,c.useMemo)((()=>l),[l]),[y,A]=(0,c.useState)([]),[w,C]=(0,c.useState)(!1),[z,N]=(0,c.useState)(),k=(0,c.useMemo)((()=>o),[o]),D=(0,g.useTable)({columns:S,data:k,initialState:{pageIndex:0}},g.useGlobalFilter,g.useSortBy,g.usePagination),{getTableProps:G,getTableBodyProps:H,headerGroups:W,prepareRow:P,page:E,pageOptions:F,state:{pageIndex:B,pageSize:R}}=D;(null===F||void 0===F?void 0:F.length)<z&&N(null===F||void 0===F?void 0:F.length);const O=[...new Set(y)];return(0,c.useEffect)((()=>{null===v||void 0===v||v.map((e=>A((l=>[...l,e]))))}),[v]),(0,b.jsxs)(T.aF,{onClose:u,size:"full",isOpen:r,children:[(0,b.jsx)(T.mH,{}),(0,b.jsxs)(T.$m,{children:[(0,b.jsx)(T.rQ,{children:"Change Role"}),(0,b.jsx)(T.s_,{}),(0,b.jsx)(T.cw,{children:w?(0,b.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,b.jsx)(a.A,{})}):(0,b.jsx)(n.Box,{overflowY:"auto",className:"table-fix-container",children:(0,b.jsxs)(p.XI,{...G(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,b.jsx)(p.d8,{children:null===W||void 0===W?void 0:W.map(((e,l)=>{var o;return(0,c.createElement)(p.Tr,{...null===e||void 0===e?void 0:e.getHeaderGroupProps(),key:l},null===e||void 0===e||null===(o=e.headers)||void 0===o?void 0:o.map(((e,l)=>(0,c.createElement)(p.Th,{...null===e||void 0===e?void 0:e.getHeaderProps(!1!==(null===e||void 0===e?void 0:e.isSortable)&&(null===e||void 0===e?void 0:e.getSortByToggleProps())),pe:"10px",key:l,borderColor:j},(0,b.jsx)(n.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:null===e||void 0===e?void 0:e.render("Header")})))))}))}),(0,b.jsx)(p.NN,{...H(),children:w?(0,b.jsx)(p.Tr,{children:(0,b.jsx)(p.Td,{colSpan:null===S||void 0===S?void 0:S.length,children:(0,b.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:x,fontSize:"sm",fontWeight:"700",children:(0,b.jsx)(a.A,{})})})}):0===(null===k||void 0===k?void 0:k.length)?(0,b.jsx)(p.Tr,{children:(0,b.jsx)(p.Td,{colSpan:S.length,children:(0,b.jsx)(n.Text,{textAlign:"center",width:"100%",color:x,fontSize:"sm",fontWeight:"700",children:(0,b.jsx)(f.A,{})})})}):null===E||void 0===E?void 0:E.map(((e,l)=>{var o;return P(e),(0,c.createElement)(p.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(o=e.cells)||void 0===o?void 0:o.map(((e,l)=>{var o,i,t;let d="";var r;"#"===(null===e||void 0===e||null===(o=e.column)||void 0===o?void 0:o.Header)?d=(0,b.jsxs)(n.Flex,{align:"center",children:[(0,b.jsx)(I.Sc,{colorScheme:"brandScheme",value:y,isChecked:null===y||void 0===y?void 0:y.includes(null===e||void 0===e?void 0:e.value),onChange:l=>((e,l)=>{var o;null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&o.checked?A((e=>[...e,l])):A((e=>null===e||void 0===e?void 0:e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,b.jsx)(n.Text,{color:x,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.index)+1})]}):"Role Name"===(null===e||void 0===e||null===(i=e.column)||void 0===i?void 0:i.Header)?d=(0,b.jsx)(n.Text,{me:"10px",color:x,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"Description"===(null===e||void 0===e||null===(t=e.column)||void 0===t?void 0:t.Header)&&(d=(0,b.jsx)(n.Text,{me:"10px",color:x,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}));return(0,c.createElement)(p.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},d)})))}))})]})})}),(0,b.jsxs)(T.jl,{children:[(0,b.jsxs)(d.Button,{size:"sm",variant:"brand",onClick:async()=>{try{C(!0);let e=await(0,m.yP)(`api/user/change-roles/${s}`,O);e&&200===(null===e||void 0===e?void 0:e.status)&&(t(),u())}catch(e){console.log(e)}finally{C(!1)}},disabled:!!w,leftIcon:(0,b.jsx)(i.AddIcon,{}),children:[" ",w?(0,b.jsx)(a.A,{}):"Add"]}),(0,b.jsx)(d.Button,{size:"sm",variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},onClick:()=>u(),children:"Close"})]})]})]})};var w=o(7508),C=o(4066),z=o(8177),N=o(4978);const k=()=>{var e,l,o;const h=[{Header:"#",accessor:"_id",width:10,display:!1},{Header:"Role Name",accessor:"roleName"},{Header:"Description",accessor:"description"}],p=(0,w.wA)(),g=(0,w.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.user})),j=("string"===typeof g&&JSON.parse(g),(0,v.g)()),f=(0,v.Zp)(),[S,T]=(0,c.useState)(),[I,k]=(0,c.useState)([]),[D,G]=(0,c.useState)(!1),[H,W]=(0,c.useState)(!1),[P,E]=(0,c.useState)(!1),[F,B]=(0,c.useState)(!1),[R,O]=(0,c.useState)(!1),[U,M]=(0,c.useState)(""),[_,J]=(0,c.useState)(!1),V=e=>{M(e),J(!0)},$=async()=>{B(!0);let e=await(0,m.x4)("api/user/view/",null===j||void 0===j?void 0:j.id);T(null===e||void 0===e?void 0:e.data),B(!1)};(0,c.useEffect)((()=>{null!==j&&void 0!==j&&j.id&&$()}),[R]),(0,c.useEffect)((async()=>{B(!0);let e=await(0,m.x4)("api/role-access");k(null===e||void 0===e?void 0:e.data),B(!1)}),[]);return(0,b.jsx)(b.Fragment,{children:F?(0,b.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,b.jsx)(a.A,{})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.A,{isOpen:_,onClose:()=>{J(!1)},data:S,selectedId:null===j||void 0===j?void 0:j.id,userAction:U,setAction:O,setUserAction:M,fetchData:$}),(0,b.jsx)(z.A,{isOpen:H,onClose:()=>W(!1),type:"User",handleDeleteData:async()=>{try{B(!0);let e=await(0,m.Gx)("api/user/delete/",null===j||void 0===j?void 0:j.id);200===(null===e||void 0===e?void 0:e.status)&&(W(!1),f(-1),O((e=>!e)))}catch(e){console.log(e)}finally{B(!1)}},ids:"",selectedValues:null===j||void 0===j?void 0:j.id}),(0,b.jsx)(n.GridItem,{colSpan:{base:4},children:(0,b.jsx)(n.Heading,{size:"lg",m:3,children:(null===S||void 0===S?void 0:S.firstName)||""})}),(0,b.jsxs)(r.A,{children:[(0,b.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:4,children:[(0,b.jsx)(n.GridItem,{colSpan:{base:12,md:6},children:(0,b.jsxs)(n.Heading,{size:"md",mb:3,textTransform:"capitalize",children:[null!==S&&void 0!==S&&S.firstName||null!==S&&void 0!==S&&S.lastName?`${null===S||void 0===S?void 0:S.firstName} ${null===S||void 0===S?void 0:S.lastName}`:"User"," ","Information"]})}),(0,b.jsx)(n.GridItem,{colSpan:{base:12,md:6},children:(0,b.jsxs)(n.Flex,{justifyContent:{base:"start",sm:"start",md:"end"},children:["superAdmin"===(null===S||void 0===S?void 0:S.role)&&(0,b.jsxs)(t.W1,{children:[(0,b.jsx)(t.IU,{variant:"outline",colorScheme:"blackAlpha",size:"sm",va:!0,mr:2.5,as:d.Button,rightIcon:(0,b.jsx)(i.ChevronDownIcon,{}),children:"Actions"}),(0,b.jsx)(t.Nj,{}),(0,b.jsxs)(t.cO,{minWidth:"13rem",children:[(0,b.jsx)(t.Dr,{alignItems:"start",onClick:()=>V("add"),icon:(0,b.jsx)(i.AddIcon,{}),children:"Add"}),(0,b.jsx)(t.Dr,{alignItems:"start",onClick:()=>V("edit"),icon:(0,b.jsx)(i.EditIcon,{}),color:"green",children:"Edit"}),"superAdmin"!==(null===S||void 0===S?void 0:S.role)&&"superAdmin"===(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.role)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Nj,{}),(0,b.jsx)(t.Dr,{alignItems:"start",onClick:()=>W(!0),icon:(0,b.jsx)(i.DeleteIcon,{}),children:"Delete"})]})]})]}),(0,b.jsx)(x.N_,{to:"/user",children:(0,b.jsx)(d.Button,{leftIcon:(0,b.jsx)(u.m6W,{}),variant:"brand",size:"sm",children:"Back"})})]})})]}),(0,b.jsx)(s.E,{}),(0,b.jsxs)(n.Grid,{templateColumns:"repeat(2, 1fr)",gap:4,mt:"5",children:[(0,b.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,b.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","First Name"," "]}),(0,b.jsx)(n.Text,{children:null!==S&&void 0!==S&&S.firstName?null===S||void 0===S?void 0:S.firstName:" - "})]}),(0,b.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,b.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","Last Name"," "]}),(0,b.jsx)(n.Text,{children:null!==S&&void 0!==S&&S.lastName?null===S||void 0===S?void 0:S.lastName:" - "})]}),(0,b.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,b.jsx)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:"Phone Number"}),(0,b.jsx)(n.Text,{children:null!==S&&void 0!==S&&S.phoneNumber?null===S||void 0===S?void 0:S.phoneNumber:" - "})]}),(0,b.jsxs)(n.GridItem,{colSpan:{base:2,md:1},children:[(0,b.jsxs)(n.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:[" ","User Email"," "]}),(0,b.jsx)(n.Text,{children:null!==S&&void 0!==S&&S.username?null===S||void 0===S?void 0:S.username:" - "})]})]})]}),"superAdmin"!==(null===S||void 0===S?void 0:S.role)&&(0,b.jsx)(r.A,{mt:3,children:(0,b.jsx)(y,{fetchData:$,columnsData:null!==h&&void 0!==h?h:[],roleModal:P,setRoleModal:E,tableData:(null===S||void 0===S?void 0:S.roles)||[],title:"Role"})}),(0,b.jsx)(A,{fetchData:$,isOpen:P,onClose:E,columnsData:null!==h&&void 0!==h?h:[],id:j.id,tableData:null!==I&&void 0!==I?I:[],interestRoles:null===S||void 0===S||null===(l=S.roles)||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e._id))}),(0,b.jsx)(r.A,{mt:3,children:(0,b.jsx)(n.Grid,{templateColumns:"repeat(6, 1fr)",gap:1,children:(0,b.jsx)(n.GridItem,{colStart:6,children:(0,b.jsxs)(n.Flex,{justifyContent:"right",children:[(0,b.jsx)(d.Button,{onClick:()=>{(e=>{G(!0),p((0,C.gV)(e))})(g),V("edit")},leftIcon:(0,b.jsx)(i.EditIcon,{}),mr:2.5,variant:"outline",size:"sm",colorScheme:"green",children:"Edit"}),"superAdmin"!==(null===S||void 0===S?void 0:S.role)&&"superAdmin"===(null===(o=JSON.parse(localStorage.getItem("user")))||void 0===o?void 0:o.role)&&(0,b.jsx)(d.Button,{size:"sm",style:{background:"red.800"},onClick:()=>W(!0),leftIcon:(0,b.jsx)(i.DeleteIcon,{}),colorScheme:"red",children:"Delete"})]})})})})]})})}}}]);
//# sourceMappingURL=66.4001be27.chunk.js.map